"use strict";(self.webpackChunksampling_coverage=self.webpackChunksampling_coverage||[]).push([[634],{7158:function(e,n,t){var i=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}s((i=i.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const a=t(8372),r=t(9864),o=t(8691),l=document.getElementById("game"),s=document.getElementById("image_preview"),p=document.getElementById("chooseimage"),u=document.getElementById("resolution"),d=document.getElementById("timetaken"),g=l.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1});if(!g)throw new Error("No WebGL :(");if(null===g.getExtension("EXT_color_buffer_float"))throw new Error("No render to Float32 support :(");const c=()=>i(void 0,void 0,void 0,(function*(){const e=new Image,n=()=>{s.src=p.value;const n=parseInt(u.value,10);((e,n)=>{const t=Math.pow(n,2);g.canvas.width=t,g.canvas.height=t,g.clearColor(0,0,0,0),g.viewport(0,0,g.canvas.width,g.canvas.height);const i=(0,r.createProgramFromShader)(g,o.summedGenerator);g.useProgram(i);const a=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,a),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);const l=g.getUniformLocation(i,"uSampler");g.uniform1i(l,0);const s=g.getUniformLocation(i,"uResolution");g.uniform1ui(s,n);const p=g.getUniformLocation(i,"uSize");g.uniform1ui(p,t);const u=g.getUniformLocation(i,"uStep");g.uniform2fv(u,[e.width/n,e.height/n])})((0,a.getImageData)(e),n),(()=>{const e=Date.now();g.clear(g.COLOR_BUFFER_BIT),g.drawArrays(g.TRIANGLES,0,3),g.readPixels(0,0,1,1,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(4)),d.innerText=Date.now()-e+" ms"})()};u.onchange=n,e.onload=n,e.src=p.value}));p.onchange=c,c()},3094:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.intersectLineSquare=void 0;const i=t(8049),a=t(4673);n.intersectLineSquare={dependencies:[i.Aabb,a.inverseLerp],text:"\n        vec4 intersectLineSquare(vec2 pos, vec2 dir, Aabb bounds) {\n            return vec4(\n                inverseLerp(pos.x, dir.x, bounds.minPos.x),\n                inverseLerp(pos.x, dir.x, bounds.maxPos.x),\n                inverseLerp(pos.y, dir.y, bounds.minPos.y),\n                inverseLerp(pos.y, dir.y, bounds.maxPos.y)\n            );\n        }\n    "}},2699:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.intersectTriangleSquare=void 0;const i=t(8049),a=t(1858),r=t(136),o=t(3094);n.intersectTriangleSquare={dependencies:[a.Triangle,i.Aabb,r.sort,o.intersectLineSquare],text:"\n        vec2[12] intersectTriangleSquare(Triangle triangle, Triangle edges, Aabb bounds) {\n            vec4 t1s = sort(intersectLineSquare(triangle.p1, edges.p1, bounds));\n            vec4 t2s = sort(intersectLineSquare(triangle.p2, edges.p2, bounds));\n            vec4 t3s = sort(intersectLineSquare(triangle.p3, edges.p3, bounds));\n            \n            return vec2[12](\n                clamp(triangle.p1 + edges.p1 * t1s.x, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p1 + edges.p1 * t1s.y, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p1 + edges.p1 * t1s.z, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p1 + edges.p1 * t1s.w, bounds.minPos, bounds.maxPos),\n\n                clamp(triangle.p2 + edges.p2 * t2s.x, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p2 + edges.p2 * t2s.y, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p2 + edges.p2 * t2s.z, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p2 + edges.p2 * t2s.w, bounds.minPos, bounds.maxPos),\n                \n                clamp(triangle.p3 + edges.p3 * t3s.x, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p3 + edges.p3 * t3s.y, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p3 + edges.p3 * t3s.z, bounds.minPos, bounds.maxPos),\n                clamp(triangle.p3 + edges.p3 * t3s.w, bounds.minPos, bounds.maxPos)\n            );\n        }\n    "}},7637:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getLineEquation=void 0;const i=t(4821),a=t(641);n.getLineEquation={dependencies:[i.Line,a.LineEquation],text:"\n        LineEquation getLineEquation(Line line) {\n            vec2 direction = line.p2 - line.p1;\n\n            float gradient = direction.y / direction.x;\n            float intersect = line.p1.y - line.p1.x * gradient;\n\n            return LineEquation(gradient, intersect);\n        }\n    "}},1233:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getLineRange=void 0;const i=t(4821),a=t(4923),r=t(7637);n.getLineRange={dependencies:[i.Line,a.LineRange,r.getLineEquation],text:"\n        LineRange getLineRange(Line line) {\n            vec2 pStart;\n            vec2 pEnd;\n            \n            //TODO: make a branchless version\n            if (line.p1.y < line.p2.y) {\n                pStart = line.p1;\n                pEnd = line.p2;\n            } else if (line.p1.y > line.p2.y) {\n                pStart = line.p2;\n                pEnd = line.p1;\n            } else if (line.p1.x < line.p2.x) {\n                pStart = line.p1;\n                pEnd = line.p2;\n            } else {\n                pStart = line.p2;\n                pEnd = line.p1;\n            }\n\n            return LineRange(\n                pStart,\n                pEnd,\n                vec2(min(line.p1.x, line.p2.x), max(line.p1.x, line.p2.x)),\n                getLineEquation(line)\n            );\n        }\n    "}},6729:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.solveLineX=void 0;const i=t(1648),a=t(4821),r=t(641);n.solveLineX={dependencies:[a.Line,r.LineEquation,i.epsilon],text:"\n        float solveLineX(LineEquation equation, float y) {\n            if (abs(equation.gradient) > epsilon) {\n                return (y - equation.intersect) / equation.gradient;\n            } else {\n                return -1.0;\n            }\n        }\n    "}},1648:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.epsilon=void 0,n.epsilon={text:"\n        const float epsilon = 0.00001;\n    "}},4673:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.inverseLerp=void 0,n.inverseLerp={text:"\n        float inverseLerp(float a, float diff, float val) {\n            return clamp((val - a) / diff, 0.0, 1.0);\n        }\n    "}},136:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.sort=void 0,n.sort={text:"\n        vec4 sort(vec4 nums) {\n            float a = min(nums.x, nums.y);\n            float b = max(nums.x, nums.y);\n            float c = min(nums.z, nums.w);\n            float d = max(nums.z, nums.w);\n            float e = min(b, c);\n            float f = max(b, c);\n            float h = max(a, e);\n            float i = min(f, d);\n\n            return vec4(min(a, e), min(h, i), max(h, i), max(f, d));\n        }\n    "}},4814:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.vec2Determinant=void 0,n.vec2Determinant={text:"\n        float vec2Determinant(vec2 p1, vec2 p2) {\n            return (p1.x * p2.y) - (p1.y * p2.x);\n        }\n    "}},5190:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.rasterise=void 0;const i=t(6531),a=t(1233),r=t(6729),o=t(4821),l=t(4923),s=t(1858),p=t(9142),u=t(4321);n.rasterise={dependencies:[u.triangleMin,p.triangleMax,o.Line,l.LineRange,a.getLineRange,s.Triangle,r.solveLineX],params:[{qualifier:"in",type:"Triangle",name:"triangle"}],text:e=>`\n        vec2 minPos = triangleMin(triangle);\n        vec2 maxPos = triangleMax(triangle);\n\n        Line[3] lines = Line[3](\n            Line(triangle.p1, triangle.p2),\n            Line(triangle.p2, triangle.p3),\n            Line(triangle.p3, triangle.p1)\n        );\n\n        LineRange[3] lineRanges = LineRange[3](\n            getLineRange(lines[0]),\n            getLineRange(lines[1]), \n            getLineRange(lines[2])\n        );\n        \n        int maxY = int(ceil(maxPos.y));\n        int prevY = int(minPos.y);\n        \n        if (maxY - prevY < 1) {\n            ${(0,i.callShaderSnippet)(e,["uvec3(minPos.x, maxPos.x, prevY)","false"])}\n            return;\n        }\n\n        for (int y=prevY+1; y<=maxY; y++) {\n            //we just need to get four numbers, the outer min and max and inner min and max values\n            ivec4 range = ivec4(-1);\n\n            for (int i=0; i<3; i++) {\n                LineRange line = lineRanges[i];\n\n                if (line.pEnd.y >= float(prevY) && line.pStart.y < float(y)) {\n                    float fromX = solveLineX(line.equation, float(prevY));\n\n                    if (fromX > -1.0) {\n                        fromX = clamp(fromX, line.xRange.x, line.xRange.y);\n                    } else {\n                        fromX = line.pStart.x;\n                    }\n\n                    float toX = solveLineX(line.equation, float(y));\n\n                    if (toX > -1.0) {\n                        toX = clamp(toX, line.xRange.x, line.xRange.y);\n                    } else {\n                        toX = line.pEnd.x;\n                    }\n\n                    ivec2 xRange = ivec2(min(fromX, toX), max(fromX, toX));\n\n                    if (range.x < 0) {\n                        //first entry\n                        range.xy = xRange;\n                    } else if ((xRange.x <= range.y + 1 && xRange.x >= range.x - 1) || (xRange.y <= range.y + 1 && xRange.y >= range.x - 1)) {\n                        //extends the first entry\n                        range.xy = ivec2(min(range.x, xRange.x), max(range.y, xRange.y));\n                    } else if (range.z < 0) {\n                        //must be a new second range, determine if we need to swap or not to keep them ordered\n                        if (xRange.x > range.y) {\n                            range.zw = xRange;\n                        } else {\n                            range = ivec4(xRange, range.xy);\n                        } \n                    } else {\n                        //extends the second range\n                        range.zw = ivec2(min(range.z, xRange.x), max(range.w, xRange.y));\n                    }\n                }\n            }\n\n            //we have an inside\n            if (range.z > range.y) {\n                ${(0,i.callShaderSnippet)(e,["uvec3(range.x, range.y, prevY)","false"])}\n                ${(0,i.callShaderSnippet)(e,["uvec3(range.y + 1, range.z - 1, prevY)","true"])}\n                ${(0,i.callShaderSnippet)(e,["uvec3(range.z, range.w, prevY)","false"])}\n            } else {\n                ${(0,i.callShaderSnippet)(e,["uvec3(range.x, max(range.y, range.w), prevY)","false"])}\n            }\n\n            prevY = y;\n        }\n    `}},861:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.triangleCoverage=void 0;const i=t(6531),a=t(5285),r=t(2072),o=t(2699),l=t(4814),s=t(8049),p=t(1858),u=t(5047),d=t(5190),g=[{qualifier:"inout",type:"vec4",name:"colour"},{qualifier:"inout",type:"int",name:"numPixels"},{qualifier:"in",type:"sampler2D",name:"texture"},{qualifier:"in",type:"Triangle",name:"triangle"},{qualifier:"in",type:"Triangle",name:"edges"}],c=[{qualifier:"in",type:"uvec3",name:"range"},{qualifier:"in",type:"bool",name:"isInside"}],m=(0,a.createShaderSnippetInstance)({snippet:d.rasterise,resultObjs:g,params:[(0,a.createShaderSnippetInstance)({resultObjs:g,snippet:{params:c,text:()=>`\n                    for (uint x=range.x; x<=range.y; x++) {\n                        ${r.snippetResult}colour += texelFetch(${r.snippetResult}texture, ivec2(x, range.z), 0);\n                        ${r.snippetResult}numPixels += 1;\n                    }\n                `}})]}),v=(0,a.createShaderSnippetInstance)({dependencies:[o.intersectTriangleSquare,l.vec2Determinant,s.Aabb],snippet:d.rasterise,resultObjs:g,params:[(0,a.createShaderSnippetInstance)({resultObjs:g,snippet:{params:c,text:()=>`\n                    if (isInside) {\n                        for (uint x=range.x; x<=range.y; x++) {\n                            ${r.snippetResult}colour += texelFetch(${r.snippetResult}texture, ivec2(x, range.z), 0);\n                        }\n                    } else {\n                        //process each outer pixel separately so we have per-pixel shading\n                        uint yMax = range.z + uint(1);\n\n                        for (uint x=range.x; x<=range.y; x++) {\n                            Aabb bounds = Aabb(vec2(x, range.z), vec2(x + uint(1), yMax));\n\n                            //as a test, determine the coverage of the triangle in outside cells and use as antialiasing\n                            vec2[12] polygon = intersectTriangleSquare(${r.snippetResult}triangle, ${r.snippetResult}edges, bounds);\n                            \n                            float percentCoverage = clamp(abs((\n                                vec2Determinant(polygon[0], polygon[1]) +\n                                vec2Determinant(polygon[1], polygon[2]) +\n                                vec2Determinant(polygon[2], polygon[3]) +\n                                vec2Determinant(polygon[3], polygon[4]) +\n                                vec2Determinant(polygon[4], polygon[5]) +\n                                vec2Determinant(polygon[5], polygon[6]) +\n                                vec2Determinant(polygon[6], polygon[7]) +\n                                vec2Determinant(polygon[7], polygon[8]) +\n                                vec2Determinant(polygon[8], polygon[9]) +\n                                vec2Determinant(polygon[9], polygon[10]) +\n                                vec2Determinant(polygon[10], polygon[11]) +\n                                vec2Determinant(polygon[11], polygon[0])\n                            ) / 2.0), 0.0, 1.0);\n\n                            ${r.snippetResult}colour += texelFetch(${r.snippetResult}texture, ivec2(x, range.z), 0) * percentCoverage;\n                        }\n                    }\n                `}})]});n.triangleCoverage={dependencies:[p.Triangle,u.triangleArea,m,v],text:`\n         vec4 triangleCoverage(in Triangle triangle, in sampler2D texture) {\n            float area = triangleArea(triangle);\n\n            Triangle edges = Triangle(triangle.p2 - triangle.p1, triangle.p3 - triangle.p2, triangle.p1 - triangle.p3);\n\n            vec4 colour = vec4(0.0);\n            int numPixels = 0;\n            \n            //if the triangle is degenerate and has no area then we just average the colours the lines cover\n            if (area < 1.0) {\n                ${(0,i.callShaderSnippet)(m,["triangle"],["colour","numPixels","texture","triangle","edges"])}\n                return colour / float(numPixels);\n            }\n            \n            ${(0,i.callShaderSnippet)(v,["triangle"],["colour","numPixels","texture","triangle","edges"])}\n            return colour / area;\n        }\n    `}},8049:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Aabb=void 0,n.Aabb={text:"\n        struct Aabb {\n            vec2 minPos;\n            vec2 maxPos;\n        };\n    "}},4821:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Line=void 0,n.Line={text:"\n        struct Line {\n            vec2 p1;\n            vec2 p2;\n        };\n    "}},641:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LineEquation=void 0,n.LineEquation={text:"\n        struct LineEquation {\n            float gradient;\n            float intersect;\n        };\n    "}},4923:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LineRange=void 0,n.LineRange={text:"\n        struct LineRange {\n            vec2 pStart;\n            vec2 pEnd;\n            vec2 xRange;\n            LineEquation equation;\n        };\n    "}},1858:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Triangle=void 0,n.Triangle={text:"\n        struct Triangle {\n            vec2 p1;\n            vec2 p2;\n            vec2 p3;\n        };\n    "}},8691:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.summedGenerator=void 0;const i=t(861),a=t(1858);n.summedGenerator={version:"300 es",vertex:{head:"\n            const vec2[3] coords = vec2[3](\n                vec2(-1.0, 1.0),\n                vec2(3.0, 1.0),\n                vec2(-1.0, -3.0)\n            );\n        ",main:"\n            gl_Position = vec4(coords[gl_VertexID], 0.0, 1.0);\n        "},fragment:{dependencies:[a.Triangle,i.triangleCoverage],head:"\n            precision mediump float;\n\n            uniform vec2 uStep;\n            uniform uint uResolution;\n            uniform uint uSize;\n            uniform sampler2D uSampler;\n\n            out highp vec4 outColor;\n        ",main:"\n            //start from the top left corner like the other solutions\n            uvec2 pixelIndex = uvec2(gl_FragCoord.x, uSize - uint(gl_FragCoord.y));\n            uint flatPixelIndex = pixelIndex.y * uSize + pixelIndex.x;\n\n            //deconstruct the 2d coord into the 2 2d line coords\n            uint inverseIndex = flatPixelIndex;\n            uint p2y = inverseIndex % uResolution;\n            inverseIndex /= uResolution;\n            uint p2x = inverseIndex % uResolution;\n            inverseIndex /= uResolution;\n            uint p1y = inverseIndex % uResolution;\n            inverseIndex /= uResolution;\n            uint p1x = inverseIndex;\n\n            Triangle triangle = Triangle(\n                vec2(p1x, p1y) * uStep,\n                vec2(p2x, p2y) * uStep,\n                vec2(0.0)\n            );\n\n            //summed triangle coverage\n            //if we divide by the area here, we can normalise all of the colours to 0-1 but need to multiply by the areas later\n            outColor = triangleCoverage(triangle, uSampler);\n        "}}},5047:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.triangleArea=void 0;const i=t(1858),a=t(4814);n.triangleArea={dependencies:[i.Triangle,a.vec2Determinant],text:"\n        float triangleArea(Triangle triangle) {\n            return abs((\n                vec2Determinant(triangle.p1, triangle.p2) +\n                vec2Determinant(triangle.p2, triangle.p3) +\n                vec2Determinant(triangle.p3, triangle.p1)\n            ) / 2.0);\n        }\n    "}},9142:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.triangleMax=void 0;const i=t(1858);n.triangleMax={dependencies:[i.Triangle],text:"\n        vec2 triangleMax(Triangle triangle) {\n            return max(max(triangle.p1, triangle.p2), triangle.p3);\n        }\n    "}},4321:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.triangleMin=void 0;const i=t(1858);n.triangleMin={dependencies:[i.Triangle],text:"\n        vec2 triangleMin(Triangle triangle) {\n            return min(min(triangle.p1, triangle.p2), triangle.p3);\n        }\n    "}},8372:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getImageData=void 0,n.getImageData=e=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const t=n.getContext("2d");if(!t)throw new Error("Could not create canvas to extract image data");return t.clearRect(0,0,n.width,n.height),t.drawImage(e,0,0),t.getImageData(0,0,n.width,n.height)}},5498:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.buildShaderStage=void 0;const i=t(5941);n.buildShaderStage=(e,n)=>{var t;let a=new Set(e.dependencies||[]);const r=new Set(a);let o;const l=e=>{if(e)for(const n of e)r.has(n)?r.delete(n):o.add(n),r.add(n)};for(;a.size;){o=new Set;for(const e of a){if("snippet"in e){const n=e;l(n.snippet.dependencies),l(n.params)}l(e.dependencies)}a=o}const s=Array.from(r.values()).reverse();return`#version ${n}\n\n        ${null!==(t=e.head)&&void 0!==t?t:""}\n\n        ${s.map((e=>{const n=e;return"snippet"in n?(0,i.defineShaderSnippet)(n):n.text})).join("\n")}\n    \n        void main(void) {\n            ${e.main}\n        }\n    `}},6531:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.callShaderSnippet=void 0;const i=t(2072);n.callShaderSnippet=(e,n,t)=>{if(e.snippet.params.length!==n.length)throw new Error(`Missing params in ${e.name} call, expecting params: ${e.snippet.params.map((e=>e.name)).join(", ")}`);if(t){if(t.length!==e.resultObjs.length)throw new Error(`Missing result object in ${e.name} call, expecting results: ${e.resultObjs.map((e=>e.name)).join(", ")}`)}else t=e.resultObjs.map((e=>`${i.snippetResult}${e.name}`));return`${e.name}(${n.join(", ")}, ${t.join(", ")});`}},3795:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createProgram=void 0,n.createProgram=(e,n,t)=>{const i=e.createProgram();if(null===i)throw new Error("Could not create program");if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const n=e.getProgramInfoLog(i);throw e.deleteProgram(i),new Error(`Error linking program : ${n}`)}return i}},9864:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createProgramFromShader=void 0;const i=t(5498),a=t(3795),r=t(5549);n.createProgramFromShader=(e,n)=>{const t=(0,i.buildShaderStage)(n.vertex,n.version),o=(0,i.buildShaderStage)(n.fragment,n.version),l=(0,r.loadShader)(e,t,e.VERTEX_SHADER),s=(0,r.loadShader)(e,o,e.FRAGMENT_SHADER);return(0,a.createProgram)(e,l,s)}},5285:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createShaderSnippetInstance=void 0;let t=0;n.createShaderSnippetInstance=e=>Object.assign(Object.assign({},e),{name:"_snippet_"+t++})},5941:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.defineShaderSnippet=void 0;const i=t(2072);n.defineShaderSnippet=e=>{var n,t;const a=[...e.snippet.params,...e.resultObjs.map((e=>Object.assign(Object.assign({},e),{name:`${i.snippetResult}${e.name}`})))].map((e=>`${e.qualifier} ${e.type} ${e.name}`));return`${null!==(n=e.snippet.returnType)&&void 0!==n?n:"void"} ${e.name}(${a.join(",")}) {\n        ${e.snippet.text(...null!==(t=e.params)&&void 0!==t?t:[])}\n    }`}},5549:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.loadShader=void 0,n.loadShader=(e,n,t)=>{const i=e.createShader(t);if(null===i)throw new Error("Could not create shader");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`Error compiling shader: ${t}\n${n.split("\n").map(((e,n)=>`${n+1}:${e}`)).join("\n")}`)}return i}},2072:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.snippetResult=void 0,n.snippetResult="_result_"}},e=>{e(e.s=7158)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBUDlDLEVBQWdCQSxFQUFLLFVBQVVXLEVBQVM1QyxRQUFROEUsRUFBVzFCLEtBQUssb0JBQ25IUixFQUFTOUIsUUFBUTdDLFFBQW9DLFFBQTFCNEcsRUFBS2pDLEVBQVMvQyxjQUEyQixJQUFQZ0YsRUFBZ0JBLEVBQUssZSxhQ1Y1Ri9MLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFWCxPQUFPLElBQ3REVyxFQUFRd0wsZ0JBQWEsRUFtQnJCeEwsRUFBUXdMLFdBbEJXLENBQUM3SyxFQUFJcUwsRUFBUWpGLEtBQzVCLE1BQU1pQyxFQUFTckksRUFBR3NMLGFBQWFsRixHQUMvQixHQUFlLE9BQVhpQyxFQUNBLE1BQU0sSUFBSWpJLE1BQU0sMkJBS3BCLEdBSEFKLEVBQUd1TCxhQUFhbEQsRUFBUWdELEdBQ3hCckwsRUFBR3dMLGNBQWNuRCxJQUNBckksRUFBR3lMLG1CQUFtQnBELEVBQVFySSxFQUFHMEwsZ0JBQ25DLENBQ1gsTUFBTXJCLEVBQWVySyxFQUFHMkwsaUJBQWlCdEQsR0FFekMsTUFEQXJJLEVBQUc0TCxhQUFhdkQsR0FDVixJQUFJakksTUFBTSwyQkFBMkJpSyxNQUFpQmdCLEVBQ3ZEUSxNQUFNLE1BQ052QyxLQUFJLENBQUN3QyxFQUFLQyxJQUFVLEdBQUdBLEVBQVEsS0FBS0QsTUFDcENyQyxLQUFLLFNBRWQsT0FBT3BCLEksYUNsQlhsSixPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRVgsT0FBTyxJQUN0RFcsRUFBUWdJLG1CQUFnQixFQUN4QmhJLEVBQVFnSSxjQUFnQixhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZGVtb3Mvc3VtbWVkR2VuZXJhdG9yV2ViZ2wudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9pbnRlcnNlY3QvaW50ZXJzZWN0TGluZVNxdWFyZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9zaGFkZXJzL2ludGVyc2VjdC9pbnRlcnNlY3RUcmlhbmdsZVNxdWFyZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9zaGFkZXJzL2xpbmUvZ2V0TGluZUVxdWF0aW9uLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvbGluZS9nZXRMaW5lUmFuZ2UudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9saW5lL3NvbHZlTGluZVgudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9tYXRocy9lcHNpbG9uLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvbWF0aHMvaW52ZXJzZUxlcnAudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9tYXRocy9zb3J0LnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvbWF0aHMvdmVjMkRldGVybWluYW50LnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvcmFzdGVyaXNlL3Jhc3RlcmlzZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9zaGFkZXJzL3Jhc3RlcmlzZS90cmlhbmdsZUNvdmVyYWdlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvc3RydWN0cy9BYWJiLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvc3RydWN0cy9MaW5lLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3NoYWRlcnMvc3RydWN0cy9MaW5lRXF1YXRpb24udHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9zdHJ1Y3RzL0xpbmVSYW5nZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9zaGFkZXJzL3N0cnVjdHMvVHJpYW5nbGUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy9zdW1tZWRHZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy90cmlhbmdsZS90cmlhbmdsZUFyZWEudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvc2hhZGVycy90cmlhbmdsZS90cmlhbmdsZU1heC50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9zaGFkZXJzL3RyaWFuZ2xlL3RyaWFuZ2xlTWluLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL2dldEltYWdlRGF0YS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy93ZWJnbC9idWlsZFNoYWRlclN0YWdlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3dlYmdsL2NhbGxTaGFkZXJTbmlwcGV0LnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3dlYmdsL2NyZWF0ZVByb2dyYW0udHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvd2ViZ2wvY3JlYXRlUHJvZ3JhbUZyb21TaGFkZXIudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvd2ViZ2wvY3JlYXRlU2hhZGVyU25pcHBldEluc3RhbmNlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3dlYmdsL2RlZmluZVNoYWRlclNuaXBwZXQudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvd2ViZ2wvbG9hZFNoYWRlci50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy93ZWJnbC9zbmlwcGV0UmVzdWx0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2V0SW1hZ2VEYXRhXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2V0SW1hZ2VEYXRhXCIpO1xyXG5jb25zdCBjcmVhdGVQcm9ncmFtRnJvbVNoYWRlcl8xID0gcmVxdWlyZShcIi4uL3dlYmdsL2NyZWF0ZVByb2dyYW1Gcm9tU2hhZGVyXCIpO1xyXG5jb25zdCBzdW1tZWRHZW5lcmF0b3JfMSA9IHJlcXVpcmUoXCIuLi9zaGFkZXJzL3N1bW1lZEdlbmVyYXRvclwiKTtcclxuY29uc3QgZ2FtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJyk7XHJcbmNvbnN0IGltYWdlUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZV9wcmV2aWV3Jyk7XHJcbmNvbnN0IGltYWdlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hvb3NlaW1hZ2UnKTtcclxuY29uc3QgcmVzb2x1dGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNvbHV0aW9uJyk7XHJcbmNvbnN0IHRpbWV0YWtlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1ldGFrZW4nKTtcclxuY29uc3QgZ2wgPSBnYW1lLmdldENvbnRleHQoJ3dlYmdsMicsIHsgYW50aWFsaWFzOiBmYWxzZSwgcHJlbXVsdGlwbGllZEFscGhhOiBmYWxzZSB9KTtcclxuaWYgKCFnbCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gV2ViR0wgOihcIik7XHJcbn1cclxuaWYgKGdsLmdldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpID09PSBudWxsKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZW5kZXIgdG8gRmxvYXQzMiBzdXBwb3J0IDooXCIpO1xyXG59XHJcbmNvbnN0IGxvYWQgPSAoaW1hZ2VEYXRhLCBudW1JdGVyYXRpb25zKSA9PiB7XHJcbiAgICBjb25zdCBzaXplID0gTWF0aC5wb3cobnVtSXRlcmF0aW9ucywgMik7XHJcbiAgICBnbC5jYW52YXMud2lkdGggPSBzaXplO1xyXG4gICAgZ2wuY2FudmFzLmhlaWdodCA9IHNpemU7XHJcbiAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDAuMCk7XHJcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgLy9yZW5kZXIgb3VyIHN1bW1lZCBjaGFubmVsIGltYWdlIHRvIGEgZnJhbWVidWZmZXIgKHN0b3JlIGFjY3VtdWxhdGVkIHN1bSBvciBwcmVjaXNpb24gdXNpbmcgMzItYml0IHBlciBjaGFubmVsKVxyXG4gICAgLypjb25zdCBzdW1tZWRNYXBGcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XHJcbiAgICBjb25zdCBzdW1tZWRNYXBSZW5kZXJidWZmZXIgPSBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcclxuXHJcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHN1bW1lZE1hcEZyYW1lYnVmZmVyKTtcclxuICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBzdW1tZWRNYXBSZW5kZXJidWZmZXIpO1xyXG4gICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5SRU5ERVJCVUZGRVIsIHN1bW1lZE1hcFJlbmRlcmJ1ZmZlcik7XHJcbiAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuUkdCQTMyRiwgc2l6ZSwgc2l6ZSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHN1bW1lZFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzdW1tZWRUZXh0dXJlKTtcclxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQTMyRiwgc2l6ZSwgc2l6ZSwgMCwgZ2wuUkdCQSwgZ2wuRkxPQVQsIG51bGwpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcclxuXHJcbiAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHN1bW1lZFRleHR1cmUsIDApO1xyXG4gICAgKi9cclxuICAgIGNvbnN0IHNoYWRlclByb2dyYW0gPSAoMCwgY3JlYXRlUHJvZ3JhbUZyb21TaGFkZXJfMS5jcmVhdGVQcm9ncmFtRnJvbVNoYWRlcikoZ2wsIHN1bW1lZEdlbmVyYXRvcl8xLnN1bW1lZEdlbmVyYXRvcik7XHJcbiAgICBnbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgLy9wYXNzIG91ciB0ZXh0dXJlIGFuZCBudW1iZXIgb2YgaXRlcmF0aW9ucyBhcyB1bmlmb3JtcyB0byBvdXIgc2hhZGVyc1xyXG4gICAgY29uc3QgaW1hZ2VUZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XHJcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBpbWFnZVRleHR1cmUpO1xyXG4gICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgZmFsc2UpO1xyXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBpbWFnZURhdGEpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgY29uc3QgaW1hZ2VUZXh0dXJlTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3VTYW1wbGVyJyk7XHJcbiAgICBnbC51bmlmb3JtMWkoaW1hZ2VUZXh0dXJlTG9jYXRpb24sIDApO1xyXG4gICAgY29uc3QgcmVzb2x1dGlvbkxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sICd1UmVzb2x1dGlvbicpO1xyXG4gICAgZ2wudW5pZm9ybTF1aShyZXNvbHV0aW9uTG9jYXRpb24sIG51bUl0ZXJhdGlvbnMpO1xyXG4gICAgY29uc3Qgc2FtcGxlclNpemVMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAndVNpemUnKTtcclxuICAgIGdsLnVuaWZvcm0xdWkoc2FtcGxlclNpemVMb2NhdGlvbiwgc2l6ZSk7XHJcbiAgICBjb25zdCBzdGVwTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3VTdGVwJyk7XHJcbiAgICBnbC51bmlmb3JtMmZ2KHN0ZXBMb2NhdGlvbiwgW1xyXG4gICAgICAgIGltYWdlRGF0YS53aWR0aCAvIG51bUl0ZXJhdGlvbnMsXHJcbiAgICAgICAgaW1hZ2VEYXRhLmhlaWdodCAvIG51bUl0ZXJhdGlvbnNcclxuICAgIF0pO1xyXG4gICAgLy93ZSB3aWxsIHRoZW4gdXNlIGEgc2ltcGxlIHNoYWRlciB0byByZW5kZXIgaXQgZGlyZWN0bHkgc28gd2UgY2FuIHNob3cgaXRcclxuICAgIC8qZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgMyk7XHJcblxyXG4gICAgLy9wcmVwIHRoZSBtYWluIGZyYW1lYnVmZmVyIGZvciByZW5kZXJpbmcgb3VyIGdlbmVyYXRlZCB0ZXh0dXJlXHJcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG5cclxuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtRnJvbVNoYWRlcihnbCwgdGV4dHVyZVNoYWRlcik7XHJcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICAgIGNvbnN0IGRpdmlzb3JMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAndURpdmlzb3InKTtcclxuICAgIGdsLnVuaWZvcm0xdWkoZGl2aXNvckxvY2F0aW9uLCBzaXplICogc2l6ZSk7XHJcblxyXG4gICAgY29uc3QgdGV4dHVyZVVuaWZvcm1Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndVNhbXBsZXInKTtcclxuICAgIGdsLnVuaWZvcm0xaSh0ZXh0dXJlVW5pZm9ybUxvY2F0aW9uLCAwKTtcclxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xyXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgc3VtbWVkVGV4dHVyZSk7XHJcbiAgICAqL1xyXG59O1xyXG5jb25zdCBkcmF3ID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDMpO1xyXG4gICAgZ2wucmVhZFBpeGVscygwLCAwLCAxLCAxLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBuZXcgVWludDhBcnJheSg0KSk7XHJcbiAgICB0aW1ldGFrZW4uaW5uZXJUZXh0ID0gYCR7RGF0ZS5ub3coKSAtIHN0YXJ0VGltZX0gbXNgO1xyXG59O1xyXG5jb25zdCBzdGFydCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGNvbnN0IGNyZWF0ZU1hcCA9ICgpID0+IHtcclxuICAgICAgICBpbWFnZVByZXZpZXcuc3JjID0gaW1hZ2VJbnB1dC52YWx1ZTtcclxuICAgICAgICBjb25zdCBudW1JdGVyYXRpb25zID0gcGFyc2VJbnQocmVzb2x1dGlvbi52YWx1ZSwgMTApO1xyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9ICgwLCBnZXRJbWFnZURhdGFfMS5nZXRJbWFnZURhdGEpKGltYWdlKTtcclxuICAgICAgICBsb2FkKGltYWdlRGF0YSwgbnVtSXRlcmF0aW9ucyk7XHJcbiAgICAgICAgZHJhdygpO1xyXG4gICAgfTtcclxuICAgIHJlc29sdXRpb24ub25jaGFuZ2UgPSBjcmVhdGVNYXA7XHJcbiAgICBpbWFnZS5vbmxvYWQgPSBjcmVhdGVNYXA7XHJcbiAgICBpbWFnZS5zcmMgPSBpbWFnZUlucHV0LnZhbHVlO1xyXG59KTtcclxuaW1hZ2VJbnB1dC5vbmNoYW5nZSA9IHN0YXJ0O1xyXG5zdGFydCgpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmludGVyc2VjdExpbmVTcXVhcmUgPSB2b2lkIDA7XHJcbmNvbnN0IEFhYmJfMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL0FhYmJcIik7XHJcbmNvbnN0IGludmVyc2VMZXJwXzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvaW52ZXJzZUxlcnBcIik7XHJcbmV4cG9ydHMuaW50ZXJzZWN0TGluZVNxdWFyZSA9IHtcclxuICAgIGRlcGVuZGVuY2llczogW0FhYmJfMS5BYWJiLCBpbnZlcnNlTGVycF8xLmludmVyc2VMZXJwXSxcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIHZlYzQgaW50ZXJzZWN0TGluZVNxdWFyZSh2ZWMyIHBvcywgdmVjMiBkaXIsIEFhYmIgYm91bmRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2ZWM0KFxyXG4gICAgICAgICAgICAgICAgaW52ZXJzZUxlcnAocG9zLngsIGRpci54LCBib3VuZHMubWluUG9zLngpLFxyXG4gICAgICAgICAgICAgICAgaW52ZXJzZUxlcnAocG9zLngsIGRpci54LCBib3VuZHMubWF4UG9zLngpLFxyXG4gICAgICAgICAgICAgICAgaW52ZXJzZUxlcnAocG9zLnksIGRpci55LCBib3VuZHMubWluUG9zLnkpLFxyXG4gICAgICAgICAgICAgICAgaW52ZXJzZUxlcnAocG9zLnksIGRpci55LCBib3VuZHMubWF4UG9zLnkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgYFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmludGVyc2VjdFRyaWFuZ2xlU3F1YXJlID0gdm9pZCAwO1xyXG5jb25zdCBBYWJiXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9BYWJiXCIpO1xyXG5jb25zdCBUcmlhbmdsZV8xID0gcmVxdWlyZShcIi4uL3N0cnVjdHMvVHJpYW5nbGVcIik7XHJcbmNvbnN0IHNvcnRfMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9zb3J0XCIpO1xyXG5jb25zdCBpbnRlcnNlY3RMaW5lU3F1YXJlXzEgPSByZXF1aXJlKFwiLi9pbnRlcnNlY3RMaW5lU3F1YXJlXCIpO1xyXG5leHBvcnRzLmludGVyc2VjdFRyaWFuZ2xlU3F1YXJlID0ge1xyXG4gICAgZGVwZW5kZW5jaWVzOiBbVHJpYW5nbGVfMS5UcmlhbmdsZSwgQWFiYl8xLkFhYmIsIHNvcnRfMS5zb3J0LCBpbnRlcnNlY3RMaW5lU3F1YXJlXzEuaW50ZXJzZWN0TGluZVNxdWFyZV0sXHJcbiAgICB0ZXh0OiAvKiBnbHNsICovIGBcclxuICAgICAgICB2ZWMyWzEyXSBpbnRlcnNlY3RUcmlhbmdsZVNxdWFyZShUcmlhbmdsZSB0cmlhbmdsZSwgVHJpYW5nbGUgZWRnZXMsIEFhYmIgYm91bmRzKSB7XHJcbiAgICAgICAgICAgIHZlYzQgdDFzID0gc29ydChpbnRlcnNlY3RMaW5lU3F1YXJlKHRyaWFuZ2xlLnAxLCBlZGdlcy5wMSwgYm91bmRzKSk7XHJcbiAgICAgICAgICAgIHZlYzQgdDJzID0gc29ydChpbnRlcnNlY3RMaW5lU3F1YXJlKHRyaWFuZ2xlLnAyLCBlZGdlcy5wMiwgYm91bmRzKSk7XHJcbiAgICAgICAgICAgIHZlYzQgdDNzID0gc29ydChpbnRlcnNlY3RMaW5lU3F1YXJlKHRyaWFuZ2xlLnAzLCBlZGdlcy5wMywgYm91bmRzKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdmVjMlsxMl0oXHJcbiAgICAgICAgICAgICAgICBjbGFtcCh0cmlhbmdsZS5wMSArIGVkZ2VzLnAxICogdDFzLngsIGJvdW5kcy5taW5Qb3MsIGJvdW5kcy5tYXhQb3MpLFxyXG4gICAgICAgICAgICAgICAgY2xhbXAodHJpYW5nbGUucDEgKyBlZGdlcy5wMSAqIHQxcy55LCBib3VuZHMubWluUG9zLCBib3VuZHMubWF4UG9zKSxcclxuICAgICAgICAgICAgICAgIGNsYW1wKHRyaWFuZ2xlLnAxICsgZWRnZXMucDEgKiB0MXMueiwgYm91bmRzLm1pblBvcywgYm91bmRzLm1heFBvcyksXHJcbiAgICAgICAgICAgICAgICBjbGFtcCh0cmlhbmdsZS5wMSArIGVkZ2VzLnAxICogdDFzLncsIGJvdW5kcy5taW5Qb3MsIGJvdW5kcy5tYXhQb3MpLFxyXG5cclxuICAgICAgICAgICAgICAgIGNsYW1wKHRyaWFuZ2xlLnAyICsgZWRnZXMucDIgKiB0MnMueCwgYm91bmRzLm1pblBvcywgYm91bmRzLm1heFBvcyksXHJcbiAgICAgICAgICAgICAgICBjbGFtcCh0cmlhbmdsZS5wMiArIGVkZ2VzLnAyICogdDJzLnksIGJvdW5kcy5taW5Qb3MsIGJvdW5kcy5tYXhQb3MpLFxyXG4gICAgICAgICAgICAgICAgY2xhbXAodHJpYW5nbGUucDIgKyBlZGdlcy5wMiAqIHQycy56LCBib3VuZHMubWluUG9zLCBib3VuZHMubWF4UG9zKSxcclxuICAgICAgICAgICAgICAgIGNsYW1wKHRyaWFuZ2xlLnAyICsgZWRnZXMucDIgKiB0MnMudywgYm91bmRzLm1pblBvcywgYm91bmRzLm1heFBvcyksXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNsYW1wKHRyaWFuZ2xlLnAzICsgZWRnZXMucDMgKiB0M3MueCwgYm91bmRzLm1pblBvcywgYm91bmRzLm1heFBvcyksXHJcbiAgICAgICAgICAgICAgICBjbGFtcCh0cmlhbmdsZS5wMyArIGVkZ2VzLnAzICogdDNzLnksIGJvdW5kcy5taW5Qb3MsIGJvdW5kcy5tYXhQb3MpLFxyXG4gICAgICAgICAgICAgICAgY2xhbXAodHJpYW5nbGUucDMgKyBlZGdlcy5wMyAqIHQzcy56LCBib3VuZHMubWluUG9zLCBib3VuZHMubWF4UG9zKSxcclxuICAgICAgICAgICAgICAgIGNsYW1wKHRyaWFuZ2xlLnAzICsgZWRnZXMucDMgKiB0M3MudywgYm91bmRzLm1pblBvcywgYm91bmRzLm1heFBvcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICBgXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZ2V0TGluZUVxdWF0aW9uID0gdm9pZCAwO1xyXG5jb25zdCBMaW5lXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9MaW5lXCIpO1xyXG5jb25zdCBMaW5lRXF1YXRpb25fMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL0xpbmVFcXVhdGlvblwiKTtcclxuZXhwb3J0cy5nZXRMaW5lRXF1YXRpb24gPSB7XHJcbiAgICBkZXBlbmRlbmNpZXM6IFtMaW5lXzEuTGluZSwgTGluZUVxdWF0aW9uXzEuTGluZUVxdWF0aW9uXSxcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIExpbmVFcXVhdGlvbiBnZXRMaW5lRXF1YXRpb24oTGluZSBsaW5lKSB7XHJcbiAgICAgICAgICAgIHZlYzIgZGlyZWN0aW9uID0gbGluZS5wMiAtIGxpbmUucDE7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCBncmFkaWVudCA9IGRpcmVjdGlvbi55IC8gZGlyZWN0aW9uLng7XHJcbiAgICAgICAgICAgIGZsb2F0IGludGVyc2VjdCA9IGxpbmUucDEueSAtIGxpbmUucDEueCAqIGdyYWRpZW50O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIExpbmVFcXVhdGlvbihncmFkaWVudCwgaW50ZXJzZWN0KTtcclxuICAgICAgICB9XHJcbiAgICBgXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZ2V0TGluZVJhbmdlID0gdm9pZCAwO1xyXG5jb25zdCBMaW5lXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9MaW5lXCIpO1xyXG5jb25zdCBMaW5lUmFuZ2VfMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL0xpbmVSYW5nZVwiKTtcclxuY29uc3QgZ2V0TGluZUVxdWF0aW9uXzEgPSByZXF1aXJlKFwiLi9nZXRMaW5lRXF1YXRpb25cIik7XHJcbmV4cG9ydHMuZ2V0TGluZVJhbmdlID0ge1xyXG4gICAgZGVwZW5kZW5jaWVzOiBbTGluZV8xLkxpbmUsIExpbmVSYW5nZV8xLkxpbmVSYW5nZSwgZ2V0TGluZUVxdWF0aW9uXzEuZ2V0TGluZUVxdWF0aW9uXSxcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIExpbmVSYW5nZSBnZXRMaW5lUmFuZ2UoTGluZSBsaW5lKSB7XHJcbiAgICAgICAgICAgIHZlYzIgcFN0YXJ0O1xyXG4gICAgICAgICAgICB2ZWMyIHBFbmQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL1RPRE86IG1ha2UgYSBicmFuY2hsZXNzIHZlcnNpb25cclxuICAgICAgICAgICAgaWYgKGxpbmUucDEueSA8IGxpbmUucDIueSkge1xyXG4gICAgICAgICAgICAgICAgcFN0YXJ0ID0gbGluZS5wMTtcclxuICAgICAgICAgICAgICAgIHBFbmQgPSBsaW5lLnAyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUucDEueSA+IGxpbmUucDIueSkge1xyXG4gICAgICAgICAgICAgICAgcFN0YXJ0ID0gbGluZS5wMjtcclxuICAgICAgICAgICAgICAgIHBFbmQgPSBsaW5lLnAxO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUucDEueCA8IGxpbmUucDIueCkge1xyXG4gICAgICAgICAgICAgICAgcFN0YXJ0ID0gbGluZS5wMTtcclxuICAgICAgICAgICAgICAgIHBFbmQgPSBsaW5lLnAyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcFN0YXJ0ID0gbGluZS5wMjtcclxuICAgICAgICAgICAgICAgIHBFbmQgPSBsaW5lLnAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTGluZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgcFN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgcEVuZCxcclxuICAgICAgICAgICAgICAgIHZlYzIobWluKGxpbmUucDEueCwgbGluZS5wMi54KSwgbWF4KGxpbmUucDEueCwgbGluZS5wMi54KSksXHJcbiAgICAgICAgICAgICAgICBnZXRMaW5lRXF1YXRpb24obGluZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICBgXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuc29sdmVMaW5lWCA9IHZvaWQgMDtcclxuY29uc3QgZXBzaWxvbl8xID0gcmVxdWlyZShcIi4uL21hdGhzL2Vwc2lsb25cIik7XHJcbmNvbnN0IExpbmVfMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL0xpbmVcIik7XHJcbmNvbnN0IExpbmVFcXVhdGlvbl8xID0gcmVxdWlyZShcIi4uL3N0cnVjdHMvTGluZUVxdWF0aW9uXCIpO1xyXG5leHBvcnRzLnNvbHZlTGluZVggPSB7XHJcbiAgICBkZXBlbmRlbmNpZXM6IFtMaW5lXzEuTGluZSwgTGluZUVxdWF0aW9uXzEuTGluZUVxdWF0aW9uLCBlcHNpbG9uXzEuZXBzaWxvbl0sXHJcbiAgICB0ZXh0OiAvKiBnbHNsICovIGBcclxuICAgICAgICBmbG9hdCBzb2x2ZUxpbmVYKExpbmVFcXVhdGlvbiBlcXVhdGlvbiwgZmxvYXQgeSkge1xyXG4gICAgICAgICAgICBpZiAoYWJzKGVxdWF0aW9uLmdyYWRpZW50KSA+IGVwc2lsb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoeSAtIGVxdWF0aW9uLmludGVyc2VjdCkgLyBlcXVhdGlvbi5ncmFkaWVudDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMS4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgYFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmVwc2lsb24gPSB2b2lkIDA7XHJcbmV4cG9ydHMuZXBzaWxvbiA9IHtcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIGNvbnN0IGZsb2F0IGVwc2lsb24gPSAwLjAwMDAxO1xyXG4gICAgYFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmludmVyc2VMZXJwID0gdm9pZCAwO1xyXG5leHBvcnRzLmludmVyc2VMZXJwID0ge1xyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgZmxvYXQgaW52ZXJzZUxlcnAoZmxvYXQgYSwgZmxvYXQgZGlmZiwgZmxvYXQgdmFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbGFtcCgodmFsIC0gYSkgLyBkaWZmLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgYFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNvcnQgPSB2b2lkIDA7XHJcbmV4cG9ydHMuc29ydCA9IHtcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIHZlYzQgc29ydCh2ZWM0IG51bXMpIHtcclxuICAgICAgICAgICAgZmxvYXQgYSA9IG1pbihudW1zLngsIG51bXMueSk7XHJcbiAgICAgICAgICAgIGZsb2F0IGIgPSBtYXgobnVtcy54LCBudW1zLnkpO1xyXG4gICAgICAgICAgICBmbG9hdCBjID0gbWluKG51bXMueiwgbnVtcy53KTtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IG1heChudW1zLnosIG51bXMudyk7XHJcbiAgICAgICAgICAgIGZsb2F0IGUgPSBtaW4oYiwgYyk7XHJcbiAgICAgICAgICAgIGZsb2F0IGYgPSBtYXgoYiwgYyk7XHJcbiAgICAgICAgICAgIGZsb2F0IGggPSBtYXgoYSwgZSk7XHJcbiAgICAgICAgICAgIGZsb2F0IGkgPSBtaW4oZiwgZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmVjNChtaW4oYSwgZSksIG1pbihoLCBpKSwgbWF4KGgsIGkpLCBtYXgoZiwgZCkpO1xyXG4gICAgICAgIH1cclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy52ZWMyRGV0ZXJtaW5hbnQgPSB2b2lkIDA7XHJcbmV4cG9ydHMudmVjMkRldGVybWluYW50ID0ge1xyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgZmxvYXQgdmVjMkRldGVybWluYW50KHZlYzIgcDEsIHZlYzIgcDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChwMS54ICogcDIueSkgLSAocDEueSAqIHAyLngpO1xyXG4gICAgICAgIH1cclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5yYXN0ZXJpc2UgPSB2b2lkIDA7XHJcbmNvbnN0IGNhbGxTaGFkZXJTbmlwcGV0XzEgPSByZXF1aXJlKFwiLi4vLi4vd2ViZ2wvY2FsbFNoYWRlclNuaXBwZXRcIik7XHJcbmNvbnN0IGdldExpbmVSYW5nZV8xID0gcmVxdWlyZShcIi4uL2xpbmUvZ2V0TGluZVJhbmdlXCIpO1xyXG5jb25zdCBzb2x2ZUxpbmVYXzEgPSByZXF1aXJlKFwiLi4vbGluZS9zb2x2ZUxpbmVYXCIpO1xyXG5jb25zdCBMaW5lXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9MaW5lXCIpO1xyXG5jb25zdCBMaW5lUmFuZ2VfMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL0xpbmVSYW5nZVwiKTtcclxuY29uc3QgVHJpYW5nbGVfMSA9IHJlcXVpcmUoXCIuLi9zdHJ1Y3RzL1RyaWFuZ2xlXCIpO1xyXG5jb25zdCB0cmlhbmdsZU1heF8xID0gcmVxdWlyZShcIi4uL3RyaWFuZ2xlL3RyaWFuZ2xlTWF4XCIpO1xyXG5jb25zdCB0cmlhbmdsZU1pbl8xID0gcmVxdWlyZShcIi4uL3RyaWFuZ2xlL3RyaWFuZ2xlTWluXCIpO1xyXG4vL25vdGU6IHRoaXMgaXMgYSBjb25zZXJ2YXRpdmUgcmFzdGVyaXNlclxyXG5leHBvcnRzLnJhc3RlcmlzZSA9IHtcclxuICAgIGRlcGVuZGVuY2llczogW3RyaWFuZ2xlTWluXzEudHJpYW5nbGVNaW4sIHRyaWFuZ2xlTWF4XzEudHJpYW5nbGVNYXgsIExpbmVfMS5MaW5lLCBMaW5lUmFuZ2VfMS5MaW5lUmFuZ2UsIGdldExpbmVSYW5nZV8xLmdldExpbmVSYW5nZSwgVHJpYW5nbGVfMS5UcmlhbmdsZSwgc29sdmVMaW5lWF8xLnNvbHZlTGluZVhdLFxyXG4gICAgcGFyYW1zOiBbeyBxdWFsaWZpZXI6ICdpbicsIHR5cGU6ICdUcmlhbmdsZScsIG5hbWU6ICd0cmlhbmdsZScgfV0sXHJcbiAgICB0ZXh0OiAoY2IpID0+IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIHZlYzIgbWluUG9zID0gdHJpYW5nbGVNaW4odHJpYW5nbGUpO1xyXG4gICAgICAgIHZlYzIgbWF4UG9zID0gdHJpYW5nbGVNYXgodHJpYW5nbGUpO1xyXG5cclxuICAgICAgICBMaW5lWzNdIGxpbmVzID0gTGluZVszXShcclxuICAgICAgICAgICAgTGluZSh0cmlhbmdsZS5wMSwgdHJpYW5nbGUucDIpLFxyXG4gICAgICAgICAgICBMaW5lKHRyaWFuZ2xlLnAyLCB0cmlhbmdsZS5wMyksXHJcbiAgICAgICAgICAgIExpbmUodHJpYW5nbGUucDMsIHRyaWFuZ2xlLnAxKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIExpbmVSYW5nZVszXSBsaW5lUmFuZ2VzID0gTGluZVJhbmdlWzNdKFxyXG4gICAgICAgICAgICBnZXRMaW5lUmFuZ2UobGluZXNbMF0pLFxyXG4gICAgICAgICAgICBnZXRMaW5lUmFuZ2UobGluZXNbMV0pLCBcclxuICAgICAgICAgICAgZ2V0TGluZVJhbmdlKGxpbmVzWzJdKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW50IG1heFkgPSBpbnQoY2VpbChtYXhQb3MueSkpO1xyXG4gICAgICAgIGludCBwcmV2WSA9IGludChtaW5Qb3MueSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG1heFkgLSBwcmV2WSA8IDEpIHtcclxuICAgICAgICAgICAgJHsoMCwgY2FsbFNoYWRlclNuaXBwZXRfMS5jYWxsU2hhZGVyU25pcHBldCkoY2IsIFsndXZlYzMobWluUG9zLngsIG1heFBvcy54LCBwcmV2WSknLCAnZmFsc2UnXSl9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoaW50IHk9cHJldlkrMTsgeTw9bWF4WTsgeSsrKSB7XHJcbiAgICAgICAgICAgIC8vd2UganVzdCBuZWVkIHRvIGdldCBmb3VyIG51bWJlcnMsIHRoZSBvdXRlciBtaW4gYW5kIG1heCBhbmQgaW5uZXIgbWluIGFuZCBtYXggdmFsdWVzXHJcbiAgICAgICAgICAgIGl2ZWM0IHJhbmdlID0gaXZlYzQoLTEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaT0wOyBpPDM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgTGluZVJhbmdlIGxpbmUgPSBsaW5lUmFuZ2VzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnBFbmQueSA+PSBmbG9hdChwcmV2WSkgJiYgbGluZS5wU3RhcnQueSA8IGZsb2F0KHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZnJvbVggPSBzb2x2ZUxpbmVYKGxpbmUuZXF1YXRpb24sIGZsb2F0KHByZXZZKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tWCA+IC0xLjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVggPSBjbGFtcChmcm9tWCwgbGluZS54UmFuZ2UueCwgbGluZS54UmFuZ2UueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVggPSBsaW5lLnBTdGFydC54O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgdG9YID0gc29sdmVMaW5lWChsaW5lLmVxdWF0aW9uLCBmbG9hdCh5KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b1ggPiAtMS4wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvWCA9IGNsYW1wKHRvWCwgbGluZS54UmFuZ2UueCwgbGluZS54UmFuZ2UueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9YID0gbGluZS5wRW5kLng7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdmVjMiB4UmFuZ2UgPSBpdmVjMihtaW4oZnJvbVgsIHRvWCksIG1heChmcm9tWCwgdG9YKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS54IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZpcnN0IGVudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnh5ID0geFJhbmdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKHhSYW5nZS54IDw9IHJhbmdlLnkgKyAxICYmIHhSYW5nZS54ID49IHJhbmdlLnggLSAxKSB8fCAoeFJhbmdlLnkgPD0gcmFuZ2UueSArIDEgJiYgeFJhbmdlLnkgPj0gcmFuZ2UueCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXh0ZW5kcyB0aGUgZmlyc3QgZW50cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UueHkgPSBpdmVjMihtaW4ocmFuZ2UueCwgeFJhbmdlLngpLCBtYXgocmFuZ2UueSwgeFJhbmdlLnkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLnogPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbXVzdCBiZSBhIG5ldyBzZWNvbmQgcmFuZ2UsIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIHN3YXAgb3Igbm90IHRvIGtlZXAgdGhlbSBvcmRlcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4UmFuZ2UueCA+IHJhbmdlLnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnp3ID0geFJhbmdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBpdmVjNCh4UmFuZ2UsIHJhbmdlLnh5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2V4dGVuZHMgdGhlIHNlY29uZCByYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZS56dyA9IGl2ZWMyKG1pbihyYW5nZS56LCB4UmFuZ2UueCksIG1heChyYW5nZS53LCB4UmFuZ2UueSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy93ZSBoYXZlIGFuIGluc2lkZVxyXG4gICAgICAgICAgICBpZiAocmFuZ2UueiA+IHJhbmdlLnkpIHtcclxuICAgICAgICAgICAgICAgICR7KDAsIGNhbGxTaGFkZXJTbmlwcGV0XzEuY2FsbFNoYWRlclNuaXBwZXQpKGNiLCBbJ3V2ZWMzKHJhbmdlLngsIHJhbmdlLnksIHByZXZZKScsICdmYWxzZSddKX1cclxuICAgICAgICAgICAgICAgICR7KDAsIGNhbGxTaGFkZXJTbmlwcGV0XzEuY2FsbFNoYWRlclNuaXBwZXQpKGNiLCBbJ3V2ZWMzKHJhbmdlLnkgKyAxLCByYW5nZS56IC0gMSwgcHJldlkpJywgJ3RydWUnXSl9XHJcbiAgICAgICAgICAgICAgICAkeygwLCBjYWxsU2hhZGVyU25pcHBldF8xLmNhbGxTaGFkZXJTbmlwcGV0KShjYiwgWyd1dmVjMyhyYW5nZS56LCByYW5nZS53LCBwcmV2WSknLCAnZmFsc2UnXSl9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkeygwLCBjYWxsU2hhZGVyU25pcHBldF8xLmNhbGxTaGFkZXJTbmlwcGV0KShjYiwgWyd1dmVjMyhyYW5nZS54LCBtYXgocmFuZ2UueSwgcmFuZ2UudyksIHByZXZZKScsICdmYWxzZSddKX1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJldlkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy50cmlhbmdsZUNvdmVyYWdlID0gdm9pZCAwO1xyXG5jb25zdCBjYWxsU2hhZGVyU25pcHBldF8xID0gcmVxdWlyZShcIi4uLy4uL3dlYmdsL2NhbGxTaGFkZXJTbmlwcGV0XCIpO1xyXG5jb25zdCBjcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2VfMSA9IHJlcXVpcmUoXCIuLi8uLi93ZWJnbC9jcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2VcIik7XHJcbmNvbnN0IHNuaXBwZXRSZXN1bHRfMSA9IHJlcXVpcmUoXCIuLi8uLi93ZWJnbC9zbmlwcGV0UmVzdWx0XCIpO1xyXG5jb25zdCBpbnRlcnNlY3RUcmlhbmdsZVNxdWFyZV8xID0gcmVxdWlyZShcIi4uL2ludGVyc2VjdC9pbnRlcnNlY3RUcmlhbmdsZVNxdWFyZVwiKTtcclxuY29uc3QgdmVjMkRldGVybWluYW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvdmVjMkRldGVybWluYW50XCIpO1xyXG5jb25zdCBBYWJiXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9BYWJiXCIpO1xyXG5jb25zdCBUcmlhbmdsZV8xID0gcmVxdWlyZShcIi4uL3N0cnVjdHMvVHJpYW5nbGVcIik7XHJcbmNvbnN0IHRyaWFuZ2xlQXJlYV8xID0gcmVxdWlyZShcIi4uL3RyaWFuZ2xlL3RyaWFuZ2xlQXJlYVwiKTtcclxuY29uc3QgcmFzdGVyaXNlXzEgPSByZXF1aXJlKFwiLi9yYXN0ZXJpc2VcIik7XHJcbmNvbnN0IHJhc3RlcmlzZVJlc3VsdCA9IFtcclxuICAgIHsgcXVhbGlmaWVyOiAnaW5vdXQnLCB0eXBlOiAndmVjNCcsIG5hbWU6ICdjb2xvdXInIH0sXHJcbiAgICB7IHF1YWxpZmllcjogJ2lub3V0JywgdHlwZTogJ2ludCcsIG5hbWU6ICdudW1QaXhlbHMnIH0sXHJcbiAgICB7IHF1YWxpZmllcjogJ2luJywgdHlwZTogJ3NhbXBsZXIyRCcsIG5hbWU6ICd0ZXh0dXJlJyB9LFxyXG4gICAgeyBxdWFsaWZpZXI6ICdpbicsIHR5cGU6ICdUcmlhbmdsZScsIG5hbWU6ICd0cmlhbmdsZScgfSxcclxuICAgIHsgcXVhbGlmaWVyOiAnaW4nLCB0eXBlOiAnVHJpYW5nbGUnLCBuYW1lOiAnZWRnZXMnIH1cclxuXTtcclxuY29uc3QgcmFzdGVyaXNlQ2FsbGJhY2tQYXJhbXMgPSBbXHJcbiAgICB7IHF1YWxpZmllcjogJ2luJywgdHlwZTogJ3V2ZWMzJywgbmFtZTogJ3JhbmdlJyB9LFxyXG4gICAgeyBxdWFsaWZpZXI6ICdpbicsIHR5cGU6ICdib29sJywgbmFtZTogJ2lzSW5zaWRlJyB9XHJcbl07XHJcbmNvbnN0IHJhc3RlcmlzZUxpbmVzID0gKDAsIGNyZWF0ZVNoYWRlclNuaXBwZXRJbnN0YW5jZV8xLmNyZWF0ZVNoYWRlclNuaXBwZXRJbnN0YW5jZSkoe1xyXG4gICAgc25pcHBldDogcmFzdGVyaXNlXzEucmFzdGVyaXNlLFxyXG4gICAgcmVzdWx0T2JqczogcmFzdGVyaXNlUmVzdWx0LFxyXG4gICAgcGFyYW1zOiBbXHJcbiAgICAgICAgKDAsIGNyZWF0ZVNoYWRlclNuaXBwZXRJbnN0YW5jZV8xLmNyZWF0ZVNoYWRlclNuaXBwZXRJbnN0YW5jZSkoe1xyXG4gICAgICAgICAgICByZXN1bHRPYmpzOiByYXN0ZXJpc2VSZXN1bHQsXHJcbiAgICAgICAgICAgIHNuaXBwZXQ6IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcmFzdGVyaXNlQ2FsbGJhY2tQYXJhbXMsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAoKSA9PiAvKiBnbHNsICovIGBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHVpbnQgeD1yYW5nZS54OyB4PD1yYW5nZS55OyB4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtzbmlwcGV0UmVzdWx0XzEuc25pcHBldFJlc3VsdH1jb2xvdXIgKz0gdGV4ZWxGZXRjaCgke3NuaXBwZXRSZXN1bHRfMS5zbmlwcGV0UmVzdWx0fXRleHR1cmUsIGl2ZWMyKHgsIHJhbmdlLnopLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtzbmlwcGV0UmVzdWx0XzEuc25pcHBldFJlc3VsdH1udW1QaXhlbHMgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgXVxyXG59KTtcclxuY29uc3QgcmFzdGVyaXNlVHJpYW5nbGUgPSAoMCwgY3JlYXRlU2hhZGVyU25pcHBldEluc3RhbmNlXzEuY3JlYXRlU2hhZGVyU25pcHBldEluc3RhbmNlKSh7XHJcbiAgICBkZXBlbmRlbmNpZXM6IFtpbnRlcnNlY3RUcmlhbmdsZVNxdWFyZV8xLmludGVyc2VjdFRyaWFuZ2xlU3F1YXJlLCB2ZWMyRGV0ZXJtaW5hbnRfMS52ZWMyRGV0ZXJtaW5hbnQsIEFhYmJfMS5BYWJiXSxcclxuICAgIHNuaXBwZXQ6IHJhc3RlcmlzZV8xLnJhc3RlcmlzZSxcclxuICAgIHJlc3VsdE9ianM6IHJhc3RlcmlzZVJlc3VsdCxcclxuICAgIHBhcmFtczogW1xyXG4gICAgICAgICgwLCBjcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2VfMS5jcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2UpKHtcclxuICAgICAgICAgICAgcmVzdWx0T2JqczogcmFzdGVyaXNlUmVzdWx0LFxyXG4gICAgICAgICAgICBzbmlwcGV0OiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHJhc3RlcmlzZUNhbGxiYWNrUGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogKCkgPT4gLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5zaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodWludCB4PXJhbmdlLng7IHg8PXJhbmdlLnk7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzbmlwcGV0UmVzdWx0XzEuc25pcHBldFJlc3VsdH1jb2xvdXIgKz0gdGV4ZWxGZXRjaCgke3NuaXBwZXRSZXN1bHRfMS5zbmlwcGV0UmVzdWx0fXRleHR1cmUsIGl2ZWMyKHgsIHJhbmdlLnopLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcHJvY2VzcyBlYWNoIG91dGVyIHBpeGVsIHNlcGFyYXRlbHkgc28gd2UgaGF2ZSBwZXItcGl4ZWwgc2hhZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aW50IHlNYXggPSByYW5nZS56ICsgdWludCgxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodWludCB4PXJhbmdlLng7IHg8PXJhbmdlLnk7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWFiYiBib3VuZHMgPSBBYWJiKHZlYzIoeCwgcmFuZ2UueiksIHZlYzIoeCArIHVpbnQoMSksIHlNYXgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FzIGEgdGVzdCwgZGV0ZXJtaW5lIHRoZSBjb3ZlcmFnZSBvZiB0aGUgdHJpYW5nbGUgaW4gb3V0c2lkZSBjZWxscyBhbmQgdXNlIGFzIGFudGlhbGlhc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMlsxMl0gcG9seWdvbiA9IGludGVyc2VjdFRyaWFuZ2xlU3F1YXJlKCR7c25pcHBldFJlc3VsdF8xLnNuaXBwZXRSZXN1bHR9dHJpYW5nbGUsICR7c25pcHBldFJlc3VsdF8xLnNuaXBwZXRSZXN1bHR9ZWRnZXMsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IHBlcmNlbnRDb3ZlcmFnZSA9IGNsYW1wKGFicygoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMkRldGVybWluYW50KHBvbHlnb25bMF0sIHBvbHlnb25bMV0pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQocG9seWdvblsxXSwgcG9seWdvblsyXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzJEZXRlcm1pbmFudChwb2x5Z29uWzJdLCBwb2x5Z29uWzNdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMkRldGVybWluYW50KHBvbHlnb25bM10sIHBvbHlnb25bNF0pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQocG9seWdvbls0XSwgcG9seWdvbls1XSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzJEZXRlcm1pbmFudChwb2x5Z29uWzVdLCBwb2x5Z29uWzZdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMkRldGVybWluYW50KHBvbHlnb25bNl0sIHBvbHlnb25bN10pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQocG9seWdvbls3XSwgcG9seWdvbls4XSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzJEZXRlcm1pbmFudChwb2x5Z29uWzhdLCBwb2x5Z29uWzldKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMkRldGVybWluYW50KHBvbHlnb25bOV0sIHBvbHlnb25bMTBdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMkRldGVybWluYW50KHBvbHlnb25bMTBdLCBwb2x5Z29uWzExXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzJEZXRlcm1pbmFudChwb2x5Z29uWzExXSwgcG9seWdvblswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgLyAyLjApLCAwLjAsIDEuMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzbmlwcGV0UmVzdWx0XzEuc25pcHBldFJlc3VsdH1jb2xvdXIgKz0gdGV4ZWxGZXRjaCgke3NuaXBwZXRSZXN1bHRfMS5zbmlwcGV0UmVzdWx0fXRleHR1cmUsIGl2ZWMyKHgsIHJhbmdlLnopLCAwKSAqIHBlcmNlbnRDb3ZlcmFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICBdXHJcbn0pO1xyXG5leHBvcnRzLnRyaWFuZ2xlQ292ZXJhZ2UgPSB7XHJcbiAgICBkZXBlbmRlbmNpZXM6IFtUcmlhbmdsZV8xLlRyaWFuZ2xlLCB0cmlhbmdsZUFyZWFfMS50cmlhbmdsZUFyZWEsIHJhc3RlcmlzZUxpbmVzLCByYXN0ZXJpc2VUcmlhbmdsZV0sXHJcbiAgICB0ZXh0OiAvKiBnbHNsICovIGBcclxuICAgICAgICAgdmVjNCB0cmlhbmdsZUNvdmVyYWdlKGluIFRyaWFuZ2xlIHRyaWFuZ2xlLCBpbiBzYW1wbGVyMkQgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICBmbG9hdCBhcmVhID0gdHJpYW5nbGVBcmVhKHRyaWFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgIFRyaWFuZ2xlIGVkZ2VzID0gVHJpYW5nbGUodHJpYW5nbGUucDIgLSB0cmlhbmdsZS5wMSwgdHJpYW5nbGUucDMgLSB0cmlhbmdsZS5wMiwgdHJpYW5nbGUucDEgLSB0cmlhbmdsZS5wMyk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IGNvbG91ciA9IHZlYzQoMC4wKTtcclxuICAgICAgICAgICAgaW50IG51bVBpeGVscyA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2lmIHRoZSB0cmlhbmdsZSBpcyBkZWdlbmVyYXRlIGFuZCBoYXMgbm8gYXJlYSB0aGVuIHdlIGp1c3QgYXZlcmFnZSB0aGUgY29sb3VycyB0aGUgbGluZXMgY292ZXJcclxuICAgICAgICAgICAgaWYgKGFyZWEgPCAxLjApIHtcclxuICAgICAgICAgICAgICAgICR7KDAsIGNhbGxTaGFkZXJTbmlwcGV0XzEuY2FsbFNoYWRlclNuaXBwZXQpKHJhc3RlcmlzZUxpbmVzLCBbJ3RyaWFuZ2xlJ10sIFsnY29sb3VyJywgJ251bVBpeGVscycsICd0ZXh0dXJlJywgJ3RyaWFuZ2xlJywgJ2VkZ2VzJ10pfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG91ciAvIGZsb2F0KG51bVBpeGVscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICR7KDAsIGNhbGxTaGFkZXJTbmlwcGV0XzEuY2FsbFNoYWRlclNuaXBwZXQpKHJhc3RlcmlzZVRyaWFuZ2xlLCBbJ3RyaWFuZ2xlJ10sIFsnY29sb3VyJywgJ251bVBpeGVscycsICd0ZXh0dXJlJywgJ3RyaWFuZ2xlJywgJ2VkZ2VzJ10pfVxyXG4gICAgICAgICAgICByZXR1cm4gY29sb3VyIC8gYXJlYTtcclxuICAgICAgICB9XHJcbiAgICBgXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQWFiYiA9IHZvaWQgMDtcclxuZXhwb3J0cy5BYWJiID0ge1xyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgc3RydWN0IEFhYmIge1xyXG4gICAgICAgICAgICB2ZWMyIG1pblBvcztcclxuICAgICAgICAgICAgdmVjMiBtYXhQb3M7XHJcbiAgICAgICAgfTtcclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MaW5lID0gdm9pZCAwO1xyXG5leHBvcnRzLkxpbmUgPSB7XHJcbiAgICB0ZXh0OiAvKiBnbHNsICovIGBcclxuICAgICAgICBzdHJ1Y3QgTGluZSB7XHJcbiAgICAgICAgICAgIHZlYzIgcDE7XHJcbiAgICAgICAgICAgIHZlYzIgcDI7XHJcbiAgICAgICAgfTtcclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MaW5lRXF1YXRpb24gPSB2b2lkIDA7XHJcbmV4cG9ydHMuTGluZUVxdWF0aW9uID0ge1xyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgc3RydWN0IExpbmVFcXVhdGlvbiB7XHJcbiAgICAgICAgICAgIGZsb2F0IGdyYWRpZW50O1xyXG4gICAgICAgICAgICBmbG9hdCBpbnRlcnNlY3Q7XHJcbiAgICAgICAgfTtcclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MaW5lUmFuZ2UgPSB2b2lkIDA7XHJcbmV4cG9ydHMuTGluZVJhbmdlID0ge1xyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgc3RydWN0IExpbmVSYW5nZSB7XHJcbiAgICAgICAgICAgIHZlYzIgcFN0YXJ0O1xyXG4gICAgICAgICAgICB2ZWMyIHBFbmQ7XHJcbiAgICAgICAgICAgIHZlYzIgeFJhbmdlO1xyXG4gICAgICAgICAgICBMaW5lRXF1YXRpb24gZXF1YXRpb247XHJcbiAgICAgICAgfTtcclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5UcmlhbmdsZSA9IHZvaWQgMDtcclxuZXhwb3J0cy5UcmlhbmdsZSA9IHtcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIHN0cnVjdCBUcmlhbmdsZSB7XHJcbiAgICAgICAgICAgIHZlYzIgcDE7XHJcbiAgICAgICAgICAgIHZlYzIgcDI7XHJcbiAgICAgICAgICAgIHZlYzIgcDM7XHJcbiAgICAgICAgfTtcclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5zdW1tZWRHZW5lcmF0b3IgPSB2b2lkIDA7XHJcbmNvbnN0IHRyaWFuZ2xlQ292ZXJhZ2VfMSA9IHJlcXVpcmUoXCIuL3Jhc3RlcmlzZS90cmlhbmdsZUNvdmVyYWdlXCIpO1xyXG5jb25zdCBUcmlhbmdsZV8xID0gcmVxdWlyZShcIi4vc3RydWN0cy9UcmlhbmdsZVwiKTtcclxuZXhwb3J0cy5zdW1tZWRHZW5lcmF0b3IgPSB7XHJcbiAgICB2ZXJzaW9uOiAnMzAwIGVzJyxcclxuICAgIHZlcnRleDoge1xyXG4gICAgICAgIGhlYWQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgICAgICBjb25zdCB2ZWMyWzNdIGNvb3JkcyA9IHZlYzJbM10oXHJcbiAgICAgICAgICAgICAgICB2ZWMyKC0xLjAsIDEuMCksXHJcbiAgICAgICAgICAgICAgICB2ZWMyKDMuMCwgMS4wKSxcclxuICAgICAgICAgICAgICAgIHZlYzIoLTEuMCwgLTMuMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBgLFxyXG4gICAgICAgIG1haW46IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoY29vcmRzW2dsX1ZlcnRleElEXSwgMC4wLCAxLjApO1xyXG4gICAgICAgIGBcclxuICAgIH0sXHJcbiAgICBmcmFnbWVudDoge1xyXG4gICAgICAgIGRlcGVuZGVuY2llczogW1RyaWFuZ2xlXzEuVHJpYW5nbGUsIHRyaWFuZ2xlQ292ZXJhZ2VfMS50cmlhbmdsZUNvdmVyYWdlXSxcclxuICAgICAgICBoZWFkOiAvKiBnbHNsICovIGBcclxuICAgICAgICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcblxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgdVN0ZXA7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gdWludCB1UmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgdW5pZm9ybSB1aW50IHVTaXplO1xyXG4gICAgICAgICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcclxuXHJcbiAgICAgICAgICAgIG91dCBoaWdocCB2ZWM0IG91dENvbG9yO1xyXG4gICAgICAgIGAsXHJcbiAgICAgICAgbWFpbjogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgICAgIC8vc3RhcnQgZnJvbSB0aGUgdG9wIGxlZnQgY29ybmVyIGxpa2UgdGhlIG90aGVyIHNvbHV0aW9uc1xyXG4gICAgICAgICAgICB1dmVjMiBwaXhlbEluZGV4ID0gdXZlYzIoZ2xfRnJhZ0Nvb3JkLngsIHVTaXplIC0gdWludChnbF9GcmFnQ29vcmQueSkpO1xyXG4gICAgICAgICAgICB1aW50IGZsYXRQaXhlbEluZGV4ID0gcGl4ZWxJbmRleC55ICogdVNpemUgKyBwaXhlbEluZGV4Lng7XHJcblxyXG4gICAgICAgICAgICAvL2RlY29uc3RydWN0IHRoZSAyZCBjb29yZCBpbnRvIHRoZSAyIDJkIGxpbmUgY29vcmRzXHJcbiAgICAgICAgICAgIHVpbnQgaW52ZXJzZUluZGV4ID0gZmxhdFBpeGVsSW5kZXg7XHJcbiAgICAgICAgICAgIHVpbnQgcDJ5ID0gaW52ZXJzZUluZGV4ICUgdVJlc29sdXRpb247XHJcbiAgICAgICAgICAgIGludmVyc2VJbmRleCAvPSB1UmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgdWludCBwMnggPSBpbnZlcnNlSW5kZXggJSB1UmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgaW52ZXJzZUluZGV4IC89IHVSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICB1aW50IHAxeSA9IGludmVyc2VJbmRleCAlIHVSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICBpbnZlcnNlSW5kZXggLz0gdVJlc29sdXRpb247XHJcbiAgICAgICAgICAgIHVpbnQgcDF4ID0gaW52ZXJzZUluZGV4O1xyXG5cclxuICAgICAgICAgICAgVHJpYW5nbGUgdHJpYW5nbGUgPSBUcmlhbmdsZShcclxuICAgICAgICAgICAgICAgIHZlYzIocDF4LCBwMXkpICogdVN0ZXAsXHJcbiAgICAgICAgICAgICAgICB2ZWMyKHAyeCwgcDJ5KSAqIHVTdGVwLFxyXG4gICAgICAgICAgICAgICAgdmVjMigwLjApXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvL3N1bW1lZCB0cmlhbmdsZSBjb3ZlcmFnZVxyXG4gICAgICAgICAgICAvL2lmIHdlIGRpdmlkZSBieSB0aGUgYXJlYSBoZXJlLCB3ZSBjYW4gbm9ybWFsaXNlIGFsbCBvZiB0aGUgY29sb3VycyB0byAwLTEgYnV0IG5lZWQgdG8gbXVsdGlwbHkgYnkgdGhlIGFyZWFzIGxhdGVyXHJcbiAgICAgICAgICAgIG91dENvbG9yID0gdHJpYW5nbGVDb3ZlcmFnZSh0cmlhbmdsZSwgdVNhbXBsZXIpO1xyXG4gICAgICAgIGBcclxuICAgIH1cclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy50cmlhbmdsZUFyZWEgPSB2b2lkIDA7XHJcbmNvbnN0IFRyaWFuZ2xlXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9UcmlhbmdsZVwiKTtcclxuY29uc3QgdmVjMkRldGVybWluYW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvdmVjMkRldGVybWluYW50XCIpO1xyXG5leHBvcnRzLnRyaWFuZ2xlQXJlYSA9IHtcclxuICAgIGRlcGVuZGVuY2llczogW1RyaWFuZ2xlXzEuVHJpYW5nbGUsIHZlYzJEZXRlcm1pbmFudF8xLnZlYzJEZXRlcm1pbmFudF0sXHJcbiAgICB0ZXh0OiAvKiBnbHNsICovIGBcclxuICAgICAgICBmbG9hdCB0cmlhbmdsZUFyZWEoVHJpYW5nbGUgdHJpYW5nbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFicygoXHJcbiAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQodHJpYW5nbGUucDEsIHRyaWFuZ2xlLnAyKSArXHJcbiAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQodHJpYW5nbGUucDIsIHRyaWFuZ2xlLnAzKSArXHJcbiAgICAgICAgICAgICAgICB2ZWMyRGV0ZXJtaW5hbnQodHJpYW5nbGUucDMsIHRyaWFuZ2xlLnAxKVxyXG4gICAgICAgICAgICApIC8gMi4wKTtcclxuICAgICAgICB9XHJcbiAgICBgXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMudHJpYW5nbGVNYXggPSB2b2lkIDA7XHJcbmNvbnN0IFRyaWFuZ2xlXzEgPSByZXF1aXJlKFwiLi4vc3RydWN0cy9UcmlhbmdsZVwiKTtcclxuZXhwb3J0cy50cmlhbmdsZU1heCA9IHtcclxuICAgIGRlcGVuZGVuY2llczogW1RyaWFuZ2xlXzEuVHJpYW5nbGVdLFxyXG4gICAgdGV4dDogLyogZ2xzbCAqLyBgXHJcbiAgICAgICAgdmVjMiB0cmlhbmdsZU1heChUcmlhbmdsZSB0cmlhbmdsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF4KG1heCh0cmlhbmdsZS5wMSwgdHJpYW5nbGUucDIpLCB0cmlhbmdsZS5wMyk7XHJcbiAgICAgICAgfVxyXG4gICAgYFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnRyaWFuZ2xlTWluID0gdm9pZCAwO1xyXG5jb25zdCBUcmlhbmdsZV8xID0gcmVxdWlyZShcIi4uL3N0cnVjdHMvVHJpYW5nbGVcIik7XHJcbmV4cG9ydHMudHJpYW5nbGVNaW4gPSB7XHJcbiAgICBkZXBlbmRlbmNpZXM6IFtUcmlhbmdsZV8xLlRyaWFuZ2xlXSxcclxuICAgIHRleHQ6IC8qIGdsc2wgKi8gYFxyXG4gICAgICAgIHZlYzIgdHJpYW5nbGVNaW4oVHJpYW5nbGUgdHJpYW5nbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbihtaW4odHJpYW5nbGUucDEsIHRyaWFuZ2xlLnAyKSwgdHJpYW5nbGUucDMpO1xyXG4gICAgICAgIH1cclxuICAgIGBcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5nZXRJbWFnZURhdGEgPSB2b2lkIDA7XHJcbmNvbnN0IGdldEltYWdlRGF0YSA9IChpbWFnZSkgPT4ge1xyXG4gICAgY29uc3QgaW1hZ2VDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGltYWdlQ2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICBpbWFnZUNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XHJcbiAgICBjb25zdCBpbWFnZUdyYXBoaWNzID0gaW1hZ2VDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGlmICghaW1hZ2VHcmFwaGljcykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGNyZWF0ZSBjYW52YXMgdG8gZXh0cmFjdCBpbWFnZSBkYXRhJyk7XHJcbiAgICB9XHJcbiAgICBpbWFnZUdyYXBoaWNzLmNsZWFyUmVjdCgwLCAwLCBpbWFnZUNhbnZhcy53aWR0aCwgaW1hZ2VDYW52YXMuaGVpZ2h0KTtcclxuICAgIGltYWdlR3JhcGhpY3MuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcclxuICAgIHJldHVybiBpbWFnZUdyYXBoaWNzLmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZUNhbnZhcy53aWR0aCwgaW1hZ2VDYW52YXMuaGVpZ2h0KTtcclxufTtcclxuZXhwb3J0cy5nZXRJbWFnZURhdGEgPSBnZXRJbWFnZURhdGE7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuYnVpbGRTaGFkZXJTdGFnZSA9IHZvaWQgMDtcclxuY29uc3QgZGVmaW5lU2hhZGVyU25pcHBldF8xID0gcmVxdWlyZShcIi4vZGVmaW5lU2hhZGVyU25pcHBldFwiKTtcclxuY29uc3QgYnVpbGRTaGFkZXJTdGFnZSA9IChzaGFkZXIsIHZlcnNpb24pID0+IHtcclxuICAgIHZhciBfYTtcclxuICAgIGxldCB0ZXN0RGVwZW5kZW5jaWVzID0gbmV3IFNldChzaGFkZXIuZGVwZW5kZW5jaWVzIHx8IFtdKTtcclxuICAgIGNvbnN0IGFsbERlcGVuZGVuY2llcyA9IG5ldyBTZXQodGVzdERlcGVuZGVuY2llcyk7XHJcbiAgICBsZXQgbmV4dFNldDtcclxuICAgIGNvbnN0IGFkZERlcGVuZGVuY2llcyA9IChkZXBlbmRlbmNpZXMpID0+IHtcclxuICAgICAgICBpZiAoZGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViZGVwZW5kZW5jeSBvZiBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbGxEZXBlbmRlbmNpZXMuaGFzKHN1YmRlcGVuZGVuY3kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsRGVwZW5kZW5jaWVzLmRlbGV0ZShzdWJkZXBlbmRlbmN5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRTZXQuYWRkKHN1YmRlcGVuZGVuY3kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYWxsRGVwZW5kZW5jaWVzLmFkZChzdWJkZXBlbmRlbmN5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB3aGlsZSAodGVzdERlcGVuZGVuY2llcy5zaXplKSB7XHJcbiAgICAgICAgbmV4dFNldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRlcGVuZGVuY3kgb2YgdGVzdERlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBpZiAoJ3NuaXBwZXQnIGluIGRlcGVuZGVuY3kpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZGVwZW5kZW5jeTtcclxuICAgICAgICAgICAgICAgIGFkZERlcGVuZGVuY2llcyhpbnN0YW5jZS5zbmlwcGV0LmRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgICAgICAgICBhZGREZXBlbmRlbmNpZXMoaW5zdGFuY2UucGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZGREZXBlbmRlbmNpZXMoZGVwZW5kZW5jeS5kZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXN0RGVwZW5kZW5jaWVzID0gbmV4dFNldDtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IEFycmF5LmZyb20oYWxsRGVwZW5kZW5jaWVzLnZhbHVlcygpKS5yZXZlcnNlKCk7XHJcbiAgICByZXR1cm4gYCN2ZXJzaW9uICR7dmVyc2lvbn1cclxuXHJcbiAgICAgICAgJHsoX2EgPSBzaGFkZXIuaGVhZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJyd9XHJcblxyXG4gICAgICAgICR7ZGVwZW5kZW5jaWVzXHJcbiAgICAgICAgLm1hcCgoZGVwZW5kZW5jeSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRlcCA9IGRlcGVuZGVuY3k7XHJcbiAgICAgICAgaWYgKCdzbmlwcGV0JyBpbiBkZXApIHtcclxuICAgICAgICAgICAgcmV0dXJuICgwLCBkZWZpbmVTaGFkZXJTbmlwcGV0XzEuZGVmaW5lU2hhZGVyU25pcHBldCkoZGVwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXAudGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5qb2luKCdcXG4nKX1cclxuICAgIFxyXG4gICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcbiAgICAgICAgICAgICR7c2hhZGVyLm1haW59XHJcbiAgICAgICAgfVxyXG4gICAgYDtcclxufTtcclxuZXhwb3J0cy5idWlsZFNoYWRlclN0YWdlID0gYnVpbGRTaGFkZXJTdGFnZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jYWxsU2hhZGVyU25pcHBldCA9IHZvaWQgMDtcclxuY29uc3Qgc25pcHBldFJlc3VsdF8xID0gcmVxdWlyZShcIi4vc25pcHBldFJlc3VsdFwiKTtcclxuY29uc3QgY2FsbFNoYWRlclNuaXBwZXQgPSAoaW5zdGFuY2UsIHBhcmFtcywgcmVzdWx0T2JqcykgPT4ge1xyXG4gICAgaWYgKGluc3RhbmNlLnNuaXBwZXQucGFyYW1zLmxlbmd0aCAhPT0gcGFyYW1zLmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBwYXJhbXMgaW4gJHtpbnN0YW5jZS5uYW1lfSBjYWxsLCBleHBlY3RpbmcgcGFyYW1zOiAke2luc3RhbmNlLnNuaXBwZXQucGFyYW1zXHJcbiAgICAgICAgICAgIC5tYXAoKHBhcmFtKSA9PiBwYXJhbS5uYW1lKVxyXG4gICAgICAgICAgICAuam9pbignLCAnKX1gKTtcclxuICAgIH1cclxuICAgIC8vYWxsIGNiIHNob3VsZCBmb3J3YXJkIHRoZSByZXN1bHQgb2JqZWN0cyBieSBkZWZhdWx0IGlmIHVuc3BlY2lmaWVkIHNvIGZ1cnRoZXIgY2FsbGJhY2tzIGNhbiBhY2Nlc3MgdGhlIHJlc3VsdCBkYXRhXHJcbiAgICBpZiAocmVzdWx0T2Jqcykge1xyXG4gICAgICAgIGlmIChyZXN1bHRPYmpzLmxlbmd0aCAhPT0gaW5zdGFuY2UucmVzdWx0T2Jqcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlc3VsdCBvYmplY3QgaW4gJHtpbnN0YW5jZS5uYW1lfSBjYWxsLCBleHBlY3RpbmcgcmVzdWx0czogJHtpbnN0YW5jZS5yZXN1bHRPYmpzXHJcbiAgICAgICAgICAgICAgICAubWFwKChyZXN1bHRPYmopID0+IHJlc3VsdE9iai5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJywgJyl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0T2JqcyA9IGluc3RhbmNlLnJlc3VsdE9ianMubWFwKChyZXN1bHRPYmopID0+IGAke3NuaXBwZXRSZXN1bHRfMS5zbmlwcGV0UmVzdWx0fSR7cmVzdWx0T2JqLm5hbWV9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7aW5zdGFuY2UubmFtZX0oJHtwYXJhbXMuam9pbignLCAnKX0sICR7cmVzdWx0T2Jqcy5qb2luKCcsICcpfSk7YDtcclxufTtcclxuZXhwb3J0cy5jYWxsU2hhZGVyU25pcHBldCA9IGNhbGxTaGFkZXJTbmlwcGV0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVByb2dyYW0gPSB2b2lkIDA7XHJcbmNvbnN0IGNyZWF0ZVByb2dyYW0gPSAoZ2wsIHZlcnRTaGFkZXIsIGZyYWdTaGFkZXIpID0+IHtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGNyZWF0ZSBwcm9ncmFtJyk7XHJcbiAgICB9XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydFNoYWRlcik7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ1NoYWRlcik7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgIGNvbnN0IGxpbmtlZCA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xyXG4gICAgaWYgKCFsaW5rZWQpIHtcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcclxuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgbGlua2luZyBwcm9ncmFtIDogJHtlcnJvck1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvZ3JhbTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVQcm9ncmFtID0gY3JlYXRlUHJvZ3JhbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jcmVhdGVQcm9ncmFtRnJvbVNoYWRlciA9IHZvaWQgMDtcclxuY29uc3QgYnVpbGRTaGFkZXJTdGFnZV8xID0gcmVxdWlyZShcIi4vYnVpbGRTaGFkZXJTdGFnZVwiKTtcclxuY29uc3QgY3JlYXRlUHJvZ3JhbV8xID0gcmVxdWlyZShcIi4vY3JlYXRlUHJvZ3JhbVwiKTtcclxuY29uc3QgbG9hZFNoYWRlcl8xID0gcmVxdWlyZShcIi4vbG9hZFNoYWRlclwiKTtcclxuY29uc3QgY3JlYXRlUHJvZ3JhbUZyb21TaGFkZXIgPSAoZ2wsIHNoYWRlcikgPT4ge1xyXG4gICAgY29uc3QgdmVydFNvdXJjZSA9ICgwLCBidWlsZFNoYWRlclN0YWdlXzEuYnVpbGRTaGFkZXJTdGFnZSkoc2hhZGVyLnZlcnRleCwgc2hhZGVyLnZlcnNpb24pO1xyXG4gICAgY29uc3QgZnJhZ1NvdXJjZSA9ICgwLCBidWlsZFNoYWRlclN0YWdlXzEuYnVpbGRTaGFkZXJTdGFnZSkoc2hhZGVyLmZyYWdtZW50LCBzaGFkZXIudmVyc2lvbik7XHJcbiAgICBjb25zdCB2ZXJ0U2hhZGVyID0gKDAsIGxvYWRTaGFkZXJfMS5sb2FkU2hhZGVyKShnbCwgdmVydFNvdXJjZSwgZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgICBjb25zdCBmcmFnU2hhZGVyID0gKDAsIGxvYWRTaGFkZXJfMS5sb2FkU2hhZGVyKShnbCwgZnJhZ1NvdXJjZSwgZ2wuRlJBR01FTlRfU0hBREVSKTtcclxuICAgIHJldHVybiAoMCwgY3JlYXRlUHJvZ3JhbV8xLmNyZWF0ZVByb2dyYW0pKGdsLCB2ZXJ0U2hhZGVyLCBmcmFnU2hhZGVyKTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVQcm9ncmFtRnJvbVNoYWRlciA9IGNyZWF0ZVByb2dyYW1Gcm9tU2hhZGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVNoYWRlclNuaXBwZXRJbnN0YW5jZSA9IHZvaWQgMDtcclxubGV0IHVuaXF1ZU5hbWUgPSAwO1xyXG5jb25zdCBjcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2UgPSAoaW5zdGFuY2UpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbmNlKSwgeyBuYW1lOiBgX3NuaXBwZXRfJHt1bmlxdWVOYW1lKyt9YCB9KTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2UgPSBjcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2U7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZGVmaW5lU2hhZGVyU25pcHBldCA9IHZvaWQgMDtcclxuY29uc3Qgc25pcHBldFJlc3VsdF8xID0gcmVxdWlyZShcIi4vc25pcHBldFJlc3VsdFwiKTtcclxuY29uc3QgZGVmaW5lU2hhZGVyU25pcHBldCA9IChpbnN0YW5jZSkgPT4ge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGNvbnN0IGZ1bmNQYXJhbXMgPSBbXHJcbiAgICAgICAgLi4uaW5zdGFuY2Uuc25pcHBldC5wYXJhbXMsXHJcbiAgICAgICAgLi4uaW5zdGFuY2UucmVzdWx0T2Jqcy5tYXAoKHBhcmFtKSA9PiAoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbSksIHsgbmFtZTogYCR7c25pcHBldFJlc3VsdF8xLnNuaXBwZXRSZXN1bHR9JHtwYXJhbS5uYW1lfWAgfSkpKVxyXG4gICAgXS5tYXAoKHBhcmFtKSA9PiBgJHtwYXJhbS5xdWFsaWZpZXJ9ICR7cGFyYW0udHlwZX0gJHtwYXJhbS5uYW1lfWApO1xyXG4gICAgcmV0dXJuIGAkeyhfYSA9IGluc3RhbmNlLnNuaXBwZXQucmV0dXJuVHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3ZvaWQnfSAke2luc3RhbmNlLm5hbWV9KCR7ZnVuY1BhcmFtcy5qb2luKCcsJyl9KSB7XHJcbiAgICAgICAgJHtpbnN0YW5jZS5zbmlwcGV0LnRleHQoLi4uKChfYiA9IGluc3RhbmNlLnBhcmFtcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pKX1cclxuICAgIH1gO1xyXG59O1xyXG5leHBvcnRzLmRlZmluZVNoYWRlclNuaXBwZXQgPSBkZWZpbmVTaGFkZXJTbmlwcGV0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmxvYWRTaGFkZXIgPSB2b2lkIDA7XHJcbmNvbnN0IGxvYWRTaGFkZXIgPSAoZ2wsIHNvdXJjZSwgdHlwZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gICAgaWYgKHNoYWRlciA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGNyZWF0ZSBzaGFkZXInKTtcclxuICAgIH1cclxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XHJcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICBjb25zdCBjb21waWxlZCA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcclxuICAgIGlmICghY29tcGlsZWQpIHtcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBjb21waWxpbmcgc2hhZGVyOiAke2Vycm9yTWVzc2FnZX1cXG4ke3NvdXJjZVxyXG4gICAgICAgICAgICAuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICAgIC5tYXAoKHN0ciwgaW5kZXgpID0+IGAke2luZGV4ICsgMX06JHtzdHJ9YClcclxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpfWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNoYWRlcjtcclxufTtcclxuZXhwb3J0cy5sb2FkU2hhZGVyID0gbG9hZFNoYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5zbmlwcGV0UmVzdWx0ID0gdm9pZCAwO1xyXG5leHBvcnRzLnNuaXBwZXRSZXN1bHQgPSAnX3Jlc3VsdF8nO1xyXG4iXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJnZXRJbWFnZURhdGFfMSIsImNyZWF0ZVByb2dyYW1Gcm9tU2hhZGVyXzEiLCJzdW1tZWRHZW5lcmF0b3JfMSIsImdhbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW1hZ2VQcmV2aWV3IiwiaW1hZ2VJbnB1dCIsInJlc29sdXRpb24iLCJ0aW1ldGFrZW4iLCJnbCIsImdldENvbnRleHQiLCJhbnRpYWxpYXMiLCJwcmVtdWx0aXBsaWVkQWxwaGEiLCJFcnJvciIsImdldEV4dGVuc2lvbiIsInN0YXJ0IiwiaW1hZ2UiLCJJbWFnZSIsImNyZWF0ZU1hcCIsInNyYyIsIm51bUl0ZXJhdGlvbnMiLCJwYXJzZUludCIsImltYWdlRGF0YSIsInNpemUiLCJNYXRoIiwicG93IiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhckNvbG9yIiwidmlld3BvcnQiLCJzaGFkZXJQcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbUZyb21TaGFkZXIiLCJzdW1tZWRHZW5lcmF0b3IiLCJ1c2VQcm9ncmFtIiwiaW1hZ2VUZXh0dXJlIiwiY3JlYXRlVGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInBpeGVsU3RvcmVpIiwiVU5QQUNLX0ZMSVBfWV9XRUJHTCIsInRleEltYWdlMkQiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01BR19GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiaW1hZ2VUZXh0dXJlTG9jYXRpb24iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJ1bmlmb3JtMWkiLCJyZXNvbHV0aW9uTG9jYXRpb24iLCJ1bmlmb3JtMXVpIiwic2FtcGxlclNpemVMb2NhdGlvbiIsInN0ZXBMb2NhdGlvbiIsInVuaWZvcm0yZnYiLCJsb2FkIiwiZ2V0SW1hZ2VEYXRhIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsImRyYXdBcnJheXMiLCJUUklBTkdMRVMiLCJyZWFkUGl4ZWxzIiwiVWludDhBcnJheSIsImlubmVyVGV4dCIsImRyYXciLCJvbmNoYW5nZSIsIm9ubG9hZCIsImludGVyc2VjdExpbmVTcXVhcmUiLCJBYWJiXzEiLCJpbnZlcnNlTGVycF8xIiwiZGVwZW5kZW5jaWVzIiwiQWFiYiIsImludmVyc2VMZXJwIiwidGV4dCIsImludGVyc2VjdFRyaWFuZ2xlU3F1YXJlIiwiVHJpYW5nbGVfMSIsInNvcnRfMSIsImludGVyc2VjdExpbmVTcXVhcmVfMSIsIlRyaWFuZ2xlIiwic29ydCIsImdldExpbmVFcXVhdGlvbiIsIkxpbmVfMSIsIkxpbmVFcXVhdGlvbl8xIiwiTGluZSIsIkxpbmVFcXVhdGlvbiIsImdldExpbmVSYW5nZSIsIkxpbmVSYW5nZV8xIiwiZ2V0TGluZUVxdWF0aW9uXzEiLCJMaW5lUmFuZ2UiLCJzb2x2ZUxpbmVYIiwiZXBzaWxvbl8xIiwiZXBzaWxvbiIsInZlYzJEZXRlcm1pbmFudCIsInJhc3RlcmlzZSIsImNhbGxTaGFkZXJTbmlwcGV0XzEiLCJnZXRMaW5lUmFuZ2VfMSIsInNvbHZlTGluZVhfMSIsInRyaWFuZ2xlTWF4XzEiLCJ0cmlhbmdsZU1pbl8xIiwidHJpYW5nbGVNaW4iLCJ0cmlhbmdsZU1heCIsInBhcmFtcyIsInF1YWxpZmllciIsInR5cGUiLCJuYW1lIiwiY2IiLCJjYWxsU2hhZGVyU25pcHBldCIsInRyaWFuZ2xlQ292ZXJhZ2UiLCJjcmVhdGVTaGFkZXJTbmlwcGV0SW5zdGFuY2VfMSIsInNuaXBwZXRSZXN1bHRfMSIsImludGVyc2VjdFRyaWFuZ2xlU3F1YXJlXzEiLCJ2ZWMyRGV0ZXJtaW5hbnRfMSIsInRyaWFuZ2xlQXJlYV8xIiwicmFzdGVyaXNlXzEiLCJyYXN0ZXJpc2VSZXN1bHQiLCJyYXN0ZXJpc2VDYWxsYmFja1BhcmFtcyIsInJhc3RlcmlzZUxpbmVzIiwiY3JlYXRlU2hhZGVyU25pcHBldEluc3RhbmNlIiwic25pcHBldCIsInJlc3VsdE9ianMiLCJzbmlwcGV0UmVzdWx0IiwicmFzdGVyaXNlVHJpYW5nbGUiLCJ0cmlhbmdsZUFyZWEiLCJ0cmlhbmdsZUNvdmVyYWdlXzEiLCJ2ZXJzaW9uIiwidmVydGV4IiwiaGVhZCIsIm1haW4iLCJmcmFnbWVudCIsImltYWdlQ2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImltYWdlR3JhcGhpY3MiLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJidWlsZFNoYWRlclN0YWdlIiwiZGVmaW5lU2hhZGVyU25pcHBldF8xIiwic2hhZGVyIiwiX2EiLCJ0ZXN0RGVwZW5kZW5jaWVzIiwiU2V0IiwiYWxsRGVwZW5kZW5jaWVzIiwibmV4dFNldCIsImFkZERlcGVuZGVuY2llcyIsInN1YmRlcGVuZGVuY3kiLCJoYXMiLCJkZWxldGUiLCJhZGQiLCJkZXBlbmRlbmN5IiwiaW5zdGFuY2UiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJyZXZlcnNlIiwibWFwIiwiZGVwIiwiZGVmaW5lU2hhZGVyU25pcHBldCIsImpvaW4iLCJsZW5ndGgiLCJwYXJhbSIsInJlc3VsdE9iaiIsImNyZWF0ZVByb2dyYW0iLCJ2ZXJ0U2hhZGVyIiwiZnJhZ1NoYWRlciIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImVycm9yTWVzc2FnZSIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsImJ1aWxkU2hhZGVyU3RhZ2VfMSIsImNyZWF0ZVByb2dyYW1fMSIsImxvYWRTaGFkZXJfMSIsInZlcnRTb3VyY2UiLCJmcmFnU291cmNlIiwibG9hZFNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJ1bmlxdWVOYW1lIiwiYXNzaWduIiwiX2IiLCJmdW5jUGFyYW1zIiwicmV0dXJuVHlwZSIsInNvdXJjZSIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJzcGxpdCIsInN0ciIsImluZGV4Il0sInNvdXJjZVJvb3QiOiIifQ==