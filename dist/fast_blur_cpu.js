"use strict";(self.webpackChunksampling_coverage=self.webpackChunksampling_coverage||[]).push([[679],{4685:(e,t,a)=>{const o=a(2086),l=a(5676),u=a(7787),d=a(6374),r=a(6086),M=a(8372),c=a(7601),i=document.getElementById("game"),n=document.getElementById("image"),s=document.getElementById("method"),g=document.getElementById("amount"),h=document.getElementById("amountvalue"),f=document.getElementById("timetaken"),m=i.getContext("2d");let v=8;const P=()=>{const e=M.getImageData(n),t=d.createSummedTexture(e),a=c.makeLogScale(0,512),P=u.createRenderer((()=>{h.value=v.toString(),g.value=a.toLinear(v).toString(),((e,t)=>{m.clearRect(0,0,i.width,i.height);const a=m.getImageData(0,0,i.width,i.height);let u;switch(s.value){case"summed":u=(a,o,u,d)=>l.averageSummed(t,e,a,o,u,d);break;case"naive":u=(t,a,l,u)=>o.averageNaive(e,t,a,l,u);break;default:throw new Error("Unknown method")}const d=Date.now();for(let e=0,t=0;e<i.height;e++)for(let o=0;o<i.width;o++,t+=4){const l=u(r.clamp(o-v,0,i.width),r.clamp(e-v,0,i.height),r.clamp(o+v,0,i.width),r.clamp(e+v,0,i.height));a.data.set(l,t)}m.putImageData(a,0,0),f.innerText=Date.now()-d+" ms"})(e,t)}));g.oninput=()=>{v=parseFloat(a.fromLinear(parseFloat(g.value)).toFixed(1)),P()},h.onchange=()=>{v=parseFloat(h.value),P()},s.onchange=P,P()};n.complete?P():n.onload=P},2086:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.averageNaive=void 0;const o=a(9078),l=a(5062),u=a(8027),d=a(975);t.averageNaive=(e,t,a,r,M)=>{const c=Math.floor(t),i=Math.floor(a),n=Math.floor(r),s=Math.floor(M);if(c==n&&i==s)return l.floor4Mutate(d.getPixel(e,c,i));const g=r-t,h=M-a,f=1/(g*h),m=Math.ceil(t),v=Math.ceil(a),P=Math.floor(r),x=Math.floor(M),p=m-t,w=v-a,_=r-P,y=M-x,b=[0,0,0,0];if(c==n){w&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,c,i),g*w)),y&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,n,s),g*y));const t=[0,0,0,0];for(let a=v;a<x;a++)o.add4Mutate(t,d.getPixel(e,c,a));return o.add4Mutate(b,u.scale4Mutate(t,g)),l.floor4Mutate(u.scale4Mutate(b,f))}if(i==s){p&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,c,i),h*p)),_&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,n,s),h*_));const t=[0,0,0,0];for(let a=m;a<P;a++)o.add4Mutate(t,d.getPixel(e,a,i));return o.add4Mutate(b,u.scale4Mutate(t,h)),l.floor4Mutate(u.scale4Mutate(b,f))}if(w&&(p&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,c,i),p*w)),_&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,n,i),_*w))),y&&(p&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,c,s),p*y)),_&&o.add4Mutate(b,u.scale4Mutate(d.getPixel(e,n,s),_*y))),w){const t=[0,0,0,0];for(let a=m;a<P;a++)o.add4Mutate(t,d.getPixel(e,a,i));o.add4Mutate(b,u.scale4Mutate(t,w))}if(p){const t=[0,0,0,0];for(let a=v;a<x;a++)o.add4Mutate(t,d.getPixel(e,c,a));o.add4Mutate(b,u.scale4Mutate(t,p))}if(y){const t=[0,0,0,0];for(let a=m;a<P;a++)o.add4Mutate(t,d.getPixel(e,a,s));o.add4Mutate(b,u.scale4Mutate(t,y))}if(_){const t=[0,0,0,0];for(let a=v;a<x;a++)o.add4Mutate(t,d.getPixel(e,n,a));o.add4Mutate(b,u.scale4Mutate(t,_))}for(let t=m;t<P;t++)for(let a=v;a<x;a++)o.add4Mutate(b,d.getPixel(e,t,a));return l.floor4Mutate(u.scale4Mutate(b,f))}},5676:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.averageSummed=void 0;const o=a(9078),l=a(5062),u=a(8027),d=a(6196),r=a(975),M=(e,t,a)=>{try{const o=t>=0&&a>=0?e[a][t]:[0,0,0,0];if(void 0===o)throw Error("No summed texture value");return o}catch(e){throw console.error(t,a),e}},c=(e,t,a,l,u)=>{const r=[0,0,0,0];try{o.add4Mutate(r,M(e,l,u)),d.subtract4Mutate(r,M(e,t,u)),d.subtract4Mutate(r,M(e,l,a)),o.add4Mutate(r,M(e,t,a))}catch(o){throw console.error([r,M(e,l,u),M(e,t,u),M(e,l,a),M(e,t,a)]),o}return r};t.averageSummed=(e,t,a,d,M,i)=>{const n=Math.floor(a),s=Math.floor(d),g=Math.floor(M),h=Math.floor(i);if(n==g&&s==h)return l.floor4Mutate(r.getPixel(t,n,s));const f=M-a,m=i-d,v=1/(f*m),P=Math.ceil(a),x=Math.ceil(d),p=Math.floor(M),w=Math.floor(i),_=P-a,y=x-d,b=M-p,I=i-w,j=[0,0,0,0];return n==g?(y&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,n,s),f*y)),I&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,g,h),f*I)),o.add4Mutate(j,u.scale4Mutate(c(e,n-1,x-1,n,w-1),f)),l.floor4Mutate(u.scale4Mutate(j,v))):s==h?(_&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,n,s),m*_)),b&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,g,h),m*b)),o.add4Mutate(j,u.scale4Mutate(c(e,P-1,s-1,p-1,s),m)),l.floor4Mutate(u.scale4Mutate(j,v))):(y&&(_&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,n,s),_*y)),b&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,g,s),b*y))),I&&(_&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,n,h),_*I)),b&&o.add4Mutate(j,u.scale4Mutate(r.getPixel(t,g,h),b*I))),y&&o.add4Mutate(j,u.scale4Mutate(c(e,P-1,s-1,p-1,s),y)),_&&o.add4Mutate(j,u.scale4Mutate(c(e,n-1,x-1,n,w-1),_)),I&&o.add4Mutate(j,u.scale4Mutate(c(e,P-1,h-1,p-1,h),I)),b&&o.add4Mutate(j,u.scale4Mutate(c(e,g-1,x-1,g,w-1),b)),o.add4Mutate(j,c(e,P-1,x-1,p-1,w-1)),l.floor4Mutate(u.scale4Mutate(j,v)))}},975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPixel=t.getPixel=void 0,t.getPixel=(e,t,a)=>{const o=4*(e.width*Math.floor(a)+Math.floor(t));return e.data.slice(o,o+4)},t.setPixel=(e,t,a,o)=>{e.data.set(o,4*(Math.floor(a)*e.width+Math.floor(t)))}},7787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderer=void 0,t.createRenderer=(e,t)=>{let a=!1;return()=>{a||(a=!0,requestAnimationFrame((()=>{e(),a=!1,null==t||t()})))}}},6374:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSummedTexture=void 0;const o=a(9078),l=a(6196);t.createSummedTexture=e=>{const t=new Array(e.height);for(let a=0,u=0;u<e.height;u++){t[u]=new Array(e.width);for(let d=0;d<e.width;d++,a+=4){const r=new Uint32Array(e.data.slice(a,a+4));d>0&&o.add4Mutate(r,t[u][d-1]),u>0&&o.add4Mutate(r,t[u-1][d]),d>0&&u>0&&l.subtract4Mutate(r,t[u-1][d-1]),t[u][d]=r}}return t}},7601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLogScale=void 0,t.makeLogScale=(e,t)=>{const a=e?Math.log(e):0,o=Math.log(t)-a;return{fromLinear:e=>Math.exp(a+o*e),toLinear:e=>(Math.log(e)-a)/o}}},9078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.add4Mutate=void 0,t.add4Mutate=(e,t)=>(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e)},6086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=(e,t,a)=>Math.max(Math.min(e,a),t)},5062:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.floor4Mutate=void 0,t.floor4Mutate=e=>(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),e[3]=Math.floor(e[3]),e)},8372:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getImageData=void 0,t.getImageData=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");if(!a)throw new Error("Could not create canvas to extract image data");return a.clearRect(0,0,t.width,t.height),a.drawImage(e,0,0),a.getImageData(0,0,t.width,t.height)}},8027:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scale4Mutate=void 0,t.scale4Mutate=(e,t)=>(e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e)},6196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subtract4Mutate=void 0,t.subtract4Mutate=(e,t)=>(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e[3]-=t[3],e)}},e=>{e(e.s=4685)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZSxFQVF2QnpCLEVBQVF5QixhQVBhLENBQUNrQyxFQUFHTyxLQUNyQlAsRUFBRSxJQUFNTyxFQUNSUCxFQUFFLElBQU1PLEVBQ1JQLEVBQUUsSUFBTU8sRUFDUlAsRUFBRSxJQUFNTyxFQUNEUCxJLGFDUFg3RCxPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRW5DLE9BQU8sSUFDdERtQyxFQUFRd0MscUJBQWtCLEVBUTFCeEMsRUFBUXdDLGdCQVBnQixDQUFDbUIsRUFBR0MsS0FDeEJELEVBQUUsSUFBTUMsRUFBRSxHQUNWRCxFQUFFLElBQU1DLEVBQUUsR0FDVkQsRUFBRSxJQUFNQyxFQUFFLEdBQ1ZELEVBQUUsSUFBTUMsRUFBRSxHQUNIRCxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZGVtb3MvZmFzdEJsdXJDcHUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZHJhdy9hdmVyYWdlTmFpdmUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZHJhdy9hdmVyYWdlU3VtbWVkLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL2RyYXcvY2FudmFzLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL2RyYXcvY3JlYXRlUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZHJhdy9jcmVhdGVTdW1tZWRUZXh0dXJlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL21hdGhzL21ha2VMb2dTY2FsZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy91dGlscy9hZGQ0TXV0YXRlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL2NsYW1wLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL2Zsb29yNE11dGF0ZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy91dGlscy9nZXRJbWFnZURhdGEudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvdXRpbHMvc2NhbGU0TXV0YXRlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL3N1YnRyYWN0NE11dGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBhdmVyYWdlTmFpdmVfMSA9IHJlcXVpcmUoXCIuLi9kcmF3L2F2ZXJhZ2VOYWl2ZVwiKTtcclxuY29uc3QgYXZlcmFnZVN1bW1lZF8xID0gcmVxdWlyZShcIi4uL2RyYXcvYXZlcmFnZVN1bW1lZFwiKTtcclxuY29uc3QgY3JlYXRlUmVuZGVyZXJfMSA9IHJlcXVpcmUoXCIuLi9kcmF3L2NyZWF0ZVJlbmRlcmVyXCIpO1xyXG5jb25zdCBjcmVhdGVTdW1tZWRUZXh0dXJlXzEgPSByZXF1aXJlKFwiLi4vZHJhdy9jcmVhdGVTdW1tZWRUZXh0dXJlXCIpO1xyXG5jb25zdCBjbGFtcF8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2NsYW1wXCIpO1xyXG5jb25zdCBnZXRJbWFnZURhdGFfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nZXRJbWFnZURhdGFcIik7XHJcbmNvbnN0IG1ha2VMb2dTY2FsZV8xID0gcmVxdWlyZShcIi4uL21hdGhzL21ha2VMb2dTY2FsZVwiKTtcclxuY29uc3QgZ2FtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZVwiKTtcclxuY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlXCIpO1xyXG5jb25zdCBtZXRob2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1ldGhvZFwiKTtcclxuY29uc3QgYW1vdW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFtb3VudFwiKTtcclxuY29uc3QgYW1vdW50VmFsdWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW1vdW50dmFsdWVcIik7XHJcbmNvbnN0IHRpbWV0YWtlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZXRha2VuXCIpO1xyXG5jb25zdCBnID0gZ2FtZS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbmxldCBibHVyQW1vdW50ID0gODtcclxuY29uc3QgZHJhd0ltYWdlID0gKGltYWdlRGF0YSwgc3VtbWVkVGV4dHVyZSkgPT4ge1xyXG4gICAgZy5jbGVhclJlY3QoMCwgMCwgZ2FtZS53aWR0aCwgZ2FtZS5oZWlnaHQpO1xyXG4gICAgY29uc3QgY2FudmFzSW1hZ2UgPSBnLmdldEltYWdlRGF0YSgwLCAwLCBnYW1lLndpZHRoLCBnYW1lLmhlaWdodCk7XHJcbiAgICBsZXQgcGl4ZWxGdW5jO1xyXG4gICAgc3dpdGNoIChtZXRob2QudmFsdWUpIHtcclxuICAgICAgICBjYXNlICdzdW1tZWQnOlxyXG4gICAgICAgICAgICBwaXhlbEZ1bmMgPSAoeCwgeSwgeDIsIHkyKSA9PiBhdmVyYWdlU3VtbWVkXzEuYXZlcmFnZVN1bW1lZChzdW1tZWRUZXh0dXJlLCBpbWFnZURhdGEsIHgsIHksIHgyLCB5Mik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ25haXZlJzpcclxuICAgICAgICAgICAgcGl4ZWxGdW5jID0gKHgsIHksIHgyLCB5MikgPT4gYXZlcmFnZU5haXZlXzEuYXZlcmFnZU5haXZlKGltYWdlRGF0YSwgeCwgeSwgeDIsIHkyKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1ldGhvZCcpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIGZvciAobGV0IHkgPSAwLCBpID0gMDsgeSA8IGdhbWUuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWUud2lkdGg7IHgrKywgaSArPSA0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsb3RYID0gY2xhbXBfMS5jbGFtcCh4IC0gYmx1ckFtb3VudCwgMCwgZ2FtZS53aWR0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsb3RZID0gY2xhbXBfMS5jbGFtcCh5IC0gYmx1ckFtb3VudCwgMCwgZ2FtZS5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjb25zdCBwbG90WDIgPSBjbGFtcF8xLmNsYW1wKHggKyBibHVyQW1vdW50LCAwLCBnYW1lLndpZHRoKTtcclxuICAgICAgICAgICAgY29uc3QgcGxvdFkyID0gY2xhbXBfMS5jbGFtcCh5ICsgYmx1ckFtb3VudCwgMCwgZ2FtZS5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjb25zdCBwaXhlbENvbG91ciA9IHBpeGVsRnVuYyhwbG90WCwgcGxvdFksIHBsb3RYMiwgcGxvdFkyKTtcclxuICAgICAgICAgICAgY2FudmFzSW1hZ2UuZGF0YS5zZXQocGl4ZWxDb2xvdXIsIGkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGcucHV0SW1hZ2VEYXRhKGNhbnZhc0ltYWdlLCAwLCAwKTtcclxuICAgIHRpbWV0YWtlbi5pbm5lclRleHQgPSBgJHsoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSl9IG1zYDtcclxufTtcclxuY29uc3Qgc3RhcnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBpbWFnZURhdGEgPSBnZXRJbWFnZURhdGFfMS5nZXRJbWFnZURhdGEoaW1hZ2UpO1xyXG4gICAgY29uc3Qgc3VtbWVkVGV4dHVyZSA9IGNyZWF0ZVN1bW1lZFRleHR1cmVfMS5jcmVhdGVTdW1tZWRUZXh0dXJlKGltYWdlRGF0YSk7XHJcbiAgICBjb25zdCBibHVyTG9nU2NhbGUgPSBtYWtlTG9nU2NhbGVfMS5tYWtlTG9nU2NhbGUoMCwgNTEyKTtcclxuICAgIGNvbnN0IGRyYXcgPSBjcmVhdGVSZW5kZXJlcl8xLmNyZWF0ZVJlbmRlcmVyKCgpID0+IHtcclxuICAgICAgICBhbW91bnRWYWx1ZUlucHV0LnZhbHVlID0gYmx1ckFtb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgIGFtb3VudElucHV0LnZhbHVlID0gYmx1ckxvZ1NjYWxlLnRvTGluZWFyKGJsdXJBbW91bnQpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgZHJhd0ltYWdlKGltYWdlRGF0YSwgc3VtbWVkVGV4dHVyZSk7XHJcbiAgICB9KTtcclxuICAgIGFtb3VudElucHV0Lm9uaW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgLy9jb252ZXJ0IHRoZSBzbGlkZXIgdmFsdWUgYXMgaWYgaXQgd2FzIGV4cG9uZW50aWFsXHJcbiAgICAgICAgYmx1ckFtb3VudCA9IHBhcnNlRmxvYXQoYmx1ckxvZ1NjYWxlLmZyb21MaW5lYXIocGFyc2VGbG9hdChhbW91bnRJbnB1dC52YWx1ZSkpLnRvRml4ZWQoMSkpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH07XHJcbiAgICBhbW91bnRWYWx1ZUlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgIGJsdXJBbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFZhbHVlSW5wdXQudmFsdWUpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH07XHJcbiAgICBtZXRob2Qub25jaGFuZ2UgPSBkcmF3O1xyXG4gICAgZHJhdygpO1xyXG59O1xyXG5pZiAoaW1hZ2UuY29tcGxldGUpIHtcclxuICAgIHN0YXJ0KCk7XHJcbn1cclxuZWxzZSB7XHJcbiAgICBpbWFnZS5vbmxvYWQgPSBzdGFydDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmF2ZXJhZ2VOYWl2ZSA9IHZvaWQgMDtcclxuY29uc3QgYWRkNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2FkZDRNdXRhdGVcIik7XHJcbmNvbnN0IGZsb29yNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2Zsb29yNE11dGF0ZVwiKTtcclxuY29uc3Qgc2NhbGU0TXV0YXRlXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvc2NhbGU0TXV0YXRlXCIpO1xyXG5jb25zdCBjYW52YXNfMSA9IHJlcXVpcmUoXCIuL2NhbnZhc1wiKTtcclxuY29uc3QgYXZlcmFnZU5haXZlID0gKGltYWdlRGF0YSwgeCwgeSwgeDIsIHkyKSA9PiB7XHJcbiAgICBjb25zdCBzdGFydENlbGxYID0gTWF0aC5mbG9vcih4KTtcclxuICAgIGNvbnN0IHN0YXJ0Q2VsbFkgPSBNYXRoLmZsb29yKHkpO1xyXG4gICAgY29uc3QgZW5kQ2VsbFggPSBNYXRoLmZsb29yKHgyKTtcclxuICAgIGNvbnN0IGVuZENlbGxZID0gTWF0aC5mbG9vcih5Mik7XHJcbiAgICAvL3JhbmdlIGNvbnRhaW5lZCBpbiBvbmUgcGl4ZWxcclxuICAgIGlmIChzdGFydENlbGxYID09IGVuZENlbGxYICYmIHN0YXJ0Q2VsbFkgPT0gZW5kQ2VsbFkpIHtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgc3RhcnRDZWxsWSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd2lkdGggPSB4MiAtIHg7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB5MiAtIHk7XHJcbiAgICBjb25zdCBwaXhlbEFyZWEgPSB3aWR0aCAqIGhlaWdodDtcclxuICAgIGNvbnN0IGNvbG91ck5vcm1hbGlzZXIgPSAxIC8gcGl4ZWxBcmVhO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWCA9IE1hdGguY2VpbCh4KTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFkgPSBNYXRoLmNlaWwoeSk7XHJcbiAgICBjb25zdCBpbm5lckNlbGxYMiA9IE1hdGguZmxvb3IoeDIpO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWTIgPSBNYXRoLmZsb29yKHkyKTtcclxuICAgIGNvbnN0IGxlZnREaWZmID0gaW5uZXJDZWxsWCAtIHg7XHJcbiAgICBjb25zdCB0b3BEaWZmID0gaW5uZXJDZWxsWSAtIHk7XHJcbiAgICBjb25zdCByaWdodERpZmYgPSB4MiAtIGlubmVyQ2VsbFgyO1xyXG4gICAgY29uc3QgYm90dG9tRGlmZiA9IHkyIC0gaW5uZXJDZWxsWTI7XHJcbiAgICBjb25zdCBjb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAvL3BlcmhhcHMgd2Ugc2hvdWxkIGJlIGJsZW5kaW5nIGFub3RoZXIgd2F5IChhbHBoYSkgaW5zdGVhZCBvZiBhZGRpbmc/XHJcbiAgICAvL3NpbmdsZSBob3Jpem9udGFsIHN0cmlwXHJcbiAgICBpZiAoc3RhcnRDZWxsWCA9PSBlbmRDZWxsWCkge1xyXG4gICAgICAgIGlmICh0b3BEaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgc3RhcnRDZWxsWSksIHdpZHRoICogdG9wRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIHdpZHRoICogYm90dG9tRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtaWRDb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGlubmVyQ2VsbFk7IGogPCBpbm5lckNlbGxZMjsgaisrKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKG1pZENvbG91ciwgY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKG1pZENvbG91ciwgd2lkdGgpKTtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjb2xvdXIsIGNvbG91ck5vcm1hbGlzZXIpKTtcclxuICAgIH1cclxuICAgIC8vc2luZ2xlIHZlcnRpY2FsIHN0cmlwXHJcbiAgICBpZiAoc3RhcnRDZWxsWSA9PSBlbmRDZWxsWSkge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCBoZWlnaHQgKiBsZWZ0RGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmlnaHREaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgZW5kQ2VsbFgsIGVuZENlbGxZKSwgaGVpZ2h0ICogcmlnaHREaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1pZENvbG91ciA9IFswLCAwLCAwLCAwXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gaW5uZXJDZWxsWDsgaSA8IGlubmVyQ2VsbFgyOyBpKyspIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUobWlkQ29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGksIHN0YXJ0Q2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUobWlkQ29sb3VyLCBoZWlnaHQpKTtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjb2xvdXIsIGNvbG91ck5vcm1hbGlzZXIpKTtcclxuICAgIH1cclxuICAgIC8vY29ybmVyIGNlbGxzXHJcbiAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCBsZWZ0RGlmZiAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBzdGFydENlbGxZKSwgcmlnaHREaWZmICogdG9wRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChib3R0b21EaWZmKSB7XHJcbiAgICAgICAgaWYgKGxlZnREaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgZW5kQ2VsbFkpLCBsZWZ0RGlmZiAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIHJpZ2h0RGlmZiAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2ZyYWN0aW9uYWwgc3RyaXBzXHJcbiAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgIGNvbnN0IHRvcENvbG91ciA9IFswLCAwLCAwLCAwXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gaW5uZXJDZWxsWDsgaSA8IGlubmVyQ2VsbFgyOyBpKyspIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUodG9wQ29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGksIHN0YXJ0Q2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUodG9wQ29sb3VyLCB0b3BEaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICBjb25zdCBsZWZ0Q29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpbm5lckNlbGxZOyBqIDwgaW5uZXJDZWxsWTI7IGorKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShsZWZ0Q29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIGopKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUobGVmdENvbG91ciwgbGVmdERpZmYpKTtcclxuICAgIH1cclxuICAgIGlmIChib3R0b21EaWZmKSB7XHJcbiAgICAgICAgY29uc3QgYm90dG9tQ29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBpbm5lckNlbGxYOyBpIDwgaW5uZXJDZWxsWDI7IGkrKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShib3R0b21Db2xvdXIsIGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgaSwgZW5kQ2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoYm90dG9tQ29sb3VyLCBib3R0b21EaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmlnaHREaWZmKSB7XHJcbiAgICAgICAgY29uc3QgcmlnaHRDb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGlubmVyQ2VsbFk7IGogPCBpbm5lckNlbGxZMjsgaisrKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKHJpZ2h0Q29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKHJpZ2h0Q29sb3VyLCByaWdodERpZmYpKTtcclxuICAgIH1cclxuICAgIC8vaW5uZXIgcGFydHNcclxuICAgIGZvciAobGV0IGkgPSBpbm5lckNlbGxYOyBpIDwgaW5uZXJDZWxsWDI7IGkrKykge1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpbm5lckNlbGxZOyBqIDwgaW5uZXJDZWxsWTI7IGorKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgaSwgaikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vbm93IHdlIGhhdmUgYW4gYWNjdW11bGF0aXZlIHBpeGVsIHZhbHVlIHRoYXQgY292ZXJzIHRoZSB3aG9sZSBhcmVhIHNvIGp1c3QgYXZlcmFnZSBpdFxyXG4gICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbn07XHJcbmV4cG9ydHMuYXZlcmFnZU5haXZlID0gYXZlcmFnZU5haXZlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmF2ZXJhZ2VTdW1tZWQgPSB2b2lkIDA7XHJcbmNvbnN0IGFkZDRNdXRhdGVfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9hZGQ0TXV0YXRlXCIpO1xyXG5jb25zdCBmbG9vcjRNdXRhdGVfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9mbG9vcjRNdXRhdGVcIik7XHJcbmNvbnN0IHNjYWxlNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL3NjYWxlNE11dGF0ZVwiKTtcclxuY29uc3Qgc3VidHJhY3Q0TXV0YXRlXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvc3VidHJhY3Q0TXV0YXRlXCIpO1xyXG5jb25zdCBjYW52YXNfMSA9IHJlcXVpcmUoXCIuL2NhbnZhc1wiKTtcclxuY29uc3QgZ2V0U3VtbWVkVGV4dHVyZVZhbCA9IChzdW1tZWRUZXh0dXJlLCB4LCB5KSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHggPj0gMCAmJiB5ID49IDAgPyBzdW1tZWRUZXh0dXJlW3ldW3hdIDogWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignTm8gc3VtbWVkIHRleHR1cmUgdmFsdWUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHgsIHkpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0U3VtbWVkQXJlYSA9IChzdW1tZWRUZXh0dXJlLCB4LCB5LCB4MiwgeTIpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFswLCAwLCAwLCAwXTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5MikpO1xyXG4gICAgICAgIHN1YnRyYWN0NE11dGF0ZV8xLnN1YnRyYWN0NE11dGF0ZShyZXN1bHQsIGdldFN1bW1lZFRleHR1cmVWYWwoc3VtbWVkVGV4dHVyZSwgeCwgeTIpKTtcclxuICAgICAgICBzdWJ0cmFjdDRNdXRhdGVfMS5zdWJ0cmFjdDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5KSk7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgsIHkpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFtcclxuICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5MiksXHJcbiAgICAgICAgICAgIGdldFN1bW1lZFRleHR1cmVWYWwoc3VtbWVkVGV4dHVyZSwgeCwgeTIpLFxyXG4gICAgICAgICAgICBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5KSxcclxuICAgICAgICAgICAgZ2V0U3VtbWVkVGV4dHVyZVZhbChzdW1tZWRUZXh0dXJlLCB4LCB5KVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbi8vcmVzdWx0cyBpbiB1cCB0byAyNCB0ZXh0dXJlIGxvb2t1cHMgYmFzZWQgb24gY29tcGxleGl0eSBvZiByYW5nZSwgd2hhdGV2ZXIgc2l6ZSB0aGUgaW1hZ2UgaXNcclxuY29uc3QgYXZlcmFnZVN1bW1lZCA9IChzdW1tZWRUZXh0dXJlLCBpbWFnZURhdGEsIHgsIHksIHgyLCB5MikgPT4ge1xyXG4gICAgY29uc3Qgc3RhcnRDZWxsWCA9IE1hdGguZmxvb3IoeCk7XHJcbiAgICBjb25zdCBzdGFydENlbGxZID0gTWF0aC5mbG9vcih5KTtcclxuICAgIGNvbnN0IGVuZENlbGxYID0gTWF0aC5mbG9vcih4Mik7XHJcbiAgICBjb25zdCBlbmRDZWxsWSA9IE1hdGguZmxvb3IoeTIpO1xyXG4gICAgLy9yYW5nZSBjb250YWluZWQgaW4gb25lIHBpeGVsXHJcbiAgICBpZiAoc3RhcnRDZWxsWCA9PSBlbmRDZWxsWCAmJiBzdGFydENlbGxZID09IGVuZENlbGxZKSB7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHdpZHRoID0geDIgLSB4O1xyXG4gICAgY29uc3QgaGVpZ2h0ID0geTIgLSB5O1xyXG4gICAgY29uc3QgcGl4ZWxBcmVhID0gd2lkdGggKiBoZWlnaHQ7XHJcbiAgICBjb25zdCBjb2xvdXJOb3JtYWxpc2VyID0gMSAvIHBpeGVsQXJlYTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFggPSBNYXRoLmNlaWwoeCk7XHJcbiAgICBjb25zdCBpbm5lckNlbGxZID0gTWF0aC5jZWlsKHkpO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWDIgPSBNYXRoLmZsb29yKHgyKTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFkyID0gTWF0aC5mbG9vcih5Mik7XHJcbiAgICBjb25zdCBsZWZ0RGlmZiA9IGlubmVyQ2VsbFggLSB4O1xyXG4gICAgY29uc3QgdG9wRGlmZiA9IGlubmVyQ2VsbFkgLSB5O1xyXG4gICAgY29uc3QgcmlnaHREaWZmID0geDIgLSBpbm5lckNlbGxYMjtcclxuICAgIGNvbnN0IGJvdHRvbURpZmYgPSB5MiAtIGlubmVyQ2VsbFkyO1xyXG4gICAgY29uc3QgY29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgLy9zaW5nbGUgaG9yaXpvbnRhbCBzdHJpcFxyXG4gICAgaWYgKHN0YXJ0Q2VsbFggPT0gZW5kQ2VsbFgpIHtcclxuICAgICAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCB3aWR0aCAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvdHRvbURpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgZW5kQ2VsbFkpLCB3aWR0aCAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBzdGFydENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIHN0YXJ0Q2VsbFgsIGlubmVyQ2VsbFkyIC0gMSksIHdpZHRoKSk7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbiAgICB9XHJcbiAgICAvL3NpbmdsZSB2ZXJ0aWNhbCBzdHJpcFxyXG4gICAgaWYgKHN0YXJ0Q2VsbFkgPT0gZW5kQ2VsbFkpIHtcclxuICAgICAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBzdGFydENlbGxZKSwgaGVpZ2h0ICogbGVmdERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIGhlaWdodCAqIHJpZ2h0RGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGlubmVyQ2VsbFggLSAxLCBzdGFydENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBzdGFydENlbGxZKSwgaGVpZ2h0KSk7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbiAgICB9XHJcbiAgICAvL2Nvcm5lciBjZWxsc1xyXG4gICAgaWYgKHRvcERpZmYpIHtcclxuICAgICAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBzdGFydENlbGxZKSwgbGVmdERpZmYgKiB0b3BEaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgc3RhcnRDZWxsWSksIHJpZ2h0RGlmZiAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIGVuZENlbGxZKSwgbGVmdERpZmYgKiBib3R0b21EaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgZW5kQ2VsbFkpLCByaWdodERpZmYgKiBib3R0b21EaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9mcmFjdGlvbmFsIHN0cmlwc1xyXG4gICAgaWYgKHRvcERpZmYpIHtcclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGlubmVyQ2VsbFggLSAxLCBzdGFydENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBzdGFydENlbGxZKSwgdG9wRGlmZikpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxlZnREaWZmKSB7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBzdGFydENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIHN0YXJ0Q2VsbFgsIGlubmVyQ2VsbFkyIC0gMSksIGxlZnREaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGdldFN1bW1lZEFyZWEoc3VtbWVkVGV4dHVyZSwgaW5uZXJDZWxsWCAtIDEsIGVuZENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBlbmRDZWxsWSksIGJvdHRvbURpZmYpKTtcclxuICAgIH1cclxuICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGVuZENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIGVuZENlbGxYLCBpbm5lckNlbGxZMiAtIDEpLCByaWdodERpZmYpKTtcclxuICAgIH1cclxuICAgIC8vaW5uZXIgcGFydHNcclxuICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBpbm5lckNlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIGlubmVyQ2VsbFgyIC0gMSwgaW5uZXJDZWxsWTIgLSAxKSk7XHJcbiAgICAvL25vdyB3ZSBoYXZlIGFuIGFjY3VtdWxhdGl2ZSBwaXhlbCB2YWx1ZSB0aGF0IGNvdmVycyB0aGUgd2hvbGUgYXJlYSBzbyBqdXN0IGF2ZXJhZ2UgaXRcclxuICAgIHJldHVybiBmbG9vcjRNdXRhdGVfMS5mbG9vcjRNdXRhdGUoc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNvbG91ciwgY29sb3VyTm9ybWFsaXNlcikpO1xyXG59O1xyXG5leHBvcnRzLmF2ZXJhZ2VTdW1tZWQgPSBhdmVyYWdlU3VtbWVkO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNldFBpeGVsID0gZXhwb3J0cy5nZXRQaXhlbCA9IHZvaWQgMDtcclxuY29uc3QgZ2V0UGl4ZWwgPSAoaW1hZ2VEYXRhLCB4LCB5KSA9PiB7XHJcbiAgICBjb25zdCBzYW1wbGVJbmRleCA9IChpbWFnZURhdGEud2lkdGggKiBNYXRoLmZsb29yKHkpICsgTWF0aC5mbG9vcih4KSkgKiA0O1xyXG4gICAgcmV0dXJuIGltYWdlRGF0YS5kYXRhLnNsaWNlKHNhbXBsZUluZGV4LCBzYW1wbGVJbmRleCArIDQpO1xyXG59O1xyXG5leHBvcnRzLmdldFBpeGVsID0gZ2V0UGl4ZWw7XHJcbmNvbnN0IHNldFBpeGVsID0gKGltYWdlRGF0YSwgeCwgeSwgcmdiYSkgPT4ge1xyXG4gICAgaW1hZ2VEYXRhLmRhdGEuc2V0KHJnYmEsIChNYXRoLmZsb29yKHkpICogaW1hZ2VEYXRhLndpZHRoICsgTWF0aC5mbG9vcih4KSkgKiA0KTtcclxufTtcclxuZXhwb3J0cy5zZXRQaXhlbCA9IHNldFBpeGVsO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVJlbmRlcmVyID0gdm9pZCAwO1xyXG5jb25zdCBjcmVhdGVSZW5kZXJlciA9IChyZW5kZXJGdW5jLCBhZnRlclJlbmRlckZ1bmMpID0+IHtcclxuICAgIGxldCBkcmF3aW5nID0gZmFsc2U7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmICghZHJhd2luZykge1xyXG4gICAgICAgICAgICBkcmF3aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlckZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIGRyYXdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyRnVuYyA9PT0gbnVsbCB8fCBhZnRlclJlbmRlckZ1bmMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFmdGVyUmVuZGVyRnVuYygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZVJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY3JlYXRlU3VtbWVkVGV4dHVyZSA9IHZvaWQgMDtcclxuY29uc3QgYWRkNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2FkZDRNdXRhdGVcIik7XHJcbmNvbnN0IHN1YnRyYWN0NE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL3N1YnRyYWN0NE11dGF0ZVwiKTtcclxuY29uc3QgY3JlYXRlU3VtbWVkVGV4dHVyZSA9IChpbWFnZURhdGEpID0+IHtcclxuICAgIGNvbnN0IHN1bW1lZFRleHR1cmUgPSBuZXcgQXJyYXkoaW1hZ2VEYXRhLmhlaWdodCk7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgeSA9IDA7IHkgPCBpbWFnZURhdGEuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICBzdW1tZWRUZXh0dXJlW3ldID0gbmV3IEFycmF5KGltYWdlRGF0YS53aWR0aCk7XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBpbWFnZURhdGEud2lkdGg7IHgrKywgaSArPSA0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpeCA9IG5ldyBVaW50MzJBcnJheShpbWFnZURhdGEuZGF0YS5zbGljZShpLCBpICsgNCkpO1xyXG4gICAgICAgICAgICBpZiAoeCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKHBpeCwgc3VtbWVkVGV4dHVyZVt5XVt4IC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocGl4LCBzdW1tZWRUZXh0dXJlW3kgLSAxXVt4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPiAwICYmIHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJ0cmFjdDRNdXRhdGVfMS5zdWJ0cmFjdDRNdXRhdGUocGl4LCBzdW1tZWRUZXh0dXJlW3kgLSAxXVt4IC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1bW1lZFRleHR1cmVbeV1beF0gPSBwaXg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1bW1lZFRleHR1cmU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlU3VtbWVkVGV4dHVyZSA9IGNyZWF0ZVN1bW1lZFRleHR1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubWFrZUxvZ1NjYWxlID0gdm9pZCAwO1xyXG5jb25zdCBtYWtlTG9nU2NhbGUgPSAoZnJvbSwgdG8pID0+IHtcclxuICAgIGNvbnN0IG1pbiA9IGZyb20gPyBNYXRoLmxvZyhmcm9tKSA6IDA7XHJcbiAgICBjb25zdCBtYXggPSBNYXRoLmxvZyh0byk7XHJcbiAgICBjb25zdCBzY2FsZSA9IG1heCAtIG1pbjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZnJvbUxpbmVhcjogKHZhbHVlKSA9PiBNYXRoLmV4cChtaW4gKyBzY2FsZSAqIHZhbHVlKSxcclxuICAgICAgICB0b0xpbmVhcjogKGxvZ1ZhbHVlKSA9PiAoTWF0aC5sb2cobG9nVmFsdWUpIC0gbWluKSAvIHNjYWxlXHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnRzLm1ha2VMb2dTY2FsZSA9IG1ha2VMb2dTY2FsZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5hZGQ0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBhZGQ0TXV0YXRlID0gKGEsIGIpID0+IHtcclxuICAgIGFbMF0gKz0gYlswXTtcclxuICAgIGFbMV0gKz0gYlsxXTtcclxuICAgIGFbMl0gKz0gYlsyXTtcclxuICAgIGFbM10gKz0gYlszXTtcclxuICAgIHJldHVybiBhO1xyXG59O1xyXG5leHBvcnRzLmFkZDRNdXRhdGUgPSBhZGQ0TXV0YXRlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNsYW1wID0gdm9pZCAwO1xyXG5jb25zdCBjbGFtcCA9ICh2YWwsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xyXG59O1xyXG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZmxvb3I0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBmbG9vcjRNdXRhdGUgPSAoYSkgPT4ge1xyXG4gICAgYVswXSA9IE1hdGguZmxvb3IoYVswXSk7XHJcbiAgICBhWzFdID0gTWF0aC5mbG9vcihhWzFdKTtcclxuICAgIGFbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xyXG4gICAgYVszXSA9IE1hdGguZmxvb3IoYVszXSk7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy5mbG9vcjRNdXRhdGUgPSBmbG9vcjRNdXRhdGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZ2V0SW1hZ2VEYXRhID0gdm9pZCAwO1xyXG5jb25zdCBnZXRJbWFnZURhdGEgPSAoaW1hZ2UpID0+IHtcclxuICAgIGNvbnN0IGltYWdlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBpbWFnZUNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgaW1hZ2VDYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgY29uc3QgaW1hZ2VHcmFwaGljcyA9IGltYWdlQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIWltYWdlR3JhcGhpY3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBjcmVhdGUgY2FudmFzIHRvIGV4dHJhY3QgaW1hZ2UgZGF0YScpO1xyXG4gICAgfVxyXG4gICAgaW1hZ2VHcmFwaGljcy5jbGVhclJlY3QoMCwgMCwgaW1hZ2VDYW52YXMud2lkdGgsIGltYWdlQ2FudmFzLmhlaWdodCk7XHJcbiAgICBpbWFnZUdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XHJcbiAgICByZXR1cm4gaW1hZ2VHcmFwaGljcy5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2VDYW52YXMud2lkdGgsIGltYWdlQ2FudmFzLmhlaWdodCk7XHJcbn07XHJcbmV4cG9ydHMuZ2V0SW1hZ2VEYXRhID0gZ2V0SW1hZ2VEYXRhO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNjYWxlNE11dGF0ZSA9IHZvaWQgMDtcclxuY29uc3Qgc2NhbGU0TXV0YXRlID0gKGEsIG1hZykgPT4ge1xyXG4gICAgYVswXSAqPSBtYWc7XHJcbiAgICBhWzFdICo9IG1hZztcclxuICAgIGFbMl0gKj0gbWFnO1xyXG4gICAgYVszXSAqPSBtYWc7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy5zY2FsZTRNdXRhdGUgPSBzY2FsZTRNdXRhdGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuc3VidHJhY3Q0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBzdWJ0cmFjdDRNdXRhdGUgPSAoYSwgYikgPT4ge1xyXG4gICAgYVswXSAtPSBiWzBdO1xyXG4gICAgYVsxXSAtPSBiWzFdO1xyXG4gICAgYVsyXSAtPSBiWzJdO1xyXG4gICAgYVszXSAtPSBiWzNdO1xyXG4gICAgcmV0dXJuIGE7XHJcbn07XHJcbmV4cG9ydHMuc3VidHJhY3Q0TXV0YXRlID0gc3VidHJhY3Q0TXV0YXRlO1xyXG4iXSwibmFtZXMiOlsiYXZlcmFnZU5haXZlXzEiLCJhdmVyYWdlU3VtbWVkXzEiLCJjcmVhdGVSZW5kZXJlcl8xIiwiY3JlYXRlU3VtbWVkVGV4dHVyZV8xIiwiY2xhbXBfMSIsImdldEltYWdlRGF0YV8xIiwibWFrZUxvZ1NjYWxlXzEiLCJnYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImltYWdlIiwibWV0aG9kIiwiYW1vdW50SW5wdXQiLCJhbW91bnRWYWx1ZUlucHV0IiwidGltZXRha2VuIiwiZyIsImdldENvbnRleHQiLCJibHVyQW1vdW50Iiwic3RhcnQiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJzdW1tZWRUZXh0dXJlIiwiY3JlYXRlU3VtbWVkVGV4dHVyZSIsImJsdXJMb2dTY2FsZSIsIm1ha2VMb2dTY2FsZSIsImRyYXciLCJjcmVhdGVSZW5kZXJlciIsInZhbHVlIiwidG9TdHJpbmciLCJ0b0xpbmVhciIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2FudmFzSW1hZ2UiLCJwaXhlbEZ1bmMiLCJ4IiwieSIsIngyIiwieTIiLCJhdmVyYWdlU3VtbWVkIiwiYXZlcmFnZU5haXZlIiwiRXJyb3IiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiaSIsInBpeGVsQ29sb3VyIiwiY2xhbXAiLCJkYXRhIiwic2V0IiwicHV0SW1hZ2VEYXRhIiwiaW5uZXJUZXh0IiwiZHJhd0ltYWdlIiwib25pbnB1dCIsInBhcnNlRmxvYXQiLCJmcm9tTGluZWFyIiwidG9GaXhlZCIsIm9uY2hhbmdlIiwiY29tcGxldGUiLCJvbmxvYWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJhZGQ0TXV0YXRlXzEiLCJmbG9vcjRNdXRhdGVfMSIsInNjYWxlNE11dGF0ZV8xIiwiY2FudmFzXzEiLCJzdGFydENlbGxYIiwiTWF0aCIsImZsb29yIiwic3RhcnRDZWxsWSIsImVuZENlbGxYIiwiZW5kQ2VsbFkiLCJmbG9vcjRNdXRhdGUiLCJnZXRQaXhlbCIsImNvbG91ck5vcm1hbGlzZXIiLCJpbm5lckNlbGxYIiwiY2VpbCIsImlubmVyQ2VsbFkiLCJpbm5lckNlbGxYMiIsImlubmVyQ2VsbFkyIiwibGVmdERpZmYiLCJ0b3BEaWZmIiwicmlnaHREaWZmIiwiYm90dG9tRGlmZiIsImNvbG91ciIsImFkZDRNdXRhdGUiLCJzY2FsZTRNdXRhdGUiLCJtaWRDb2xvdXIiLCJqIiwidG9wQ29sb3VyIiwibGVmdENvbG91ciIsImJvdHRvbUNvbG91ciIsInJpZ2h0Q29sb3VyIiwic3VidHJhY3Q0TXV0YXRlXzEiLCJnZXRTdW1tZWRUZXh0dXJlVmFsIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZ2V0U3VtbWVkQXJlYSIsInN1YnRyYWN0NE11dGF0ZSIsInNldFBpeGVsIiwic2FtcGxlSW5kZXgiLCJzbGljZSIsInJnYmEiLCJyZW5kZXJGdW5jIiwiYWZ0ZXJSZW5kZXJGdW5jIiwiZHJhd2luZyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkFycmF5IiwicGl4IiwiVWludDMyQXJyYXkiLCJmcm9tIiwidG8iLCJtaW4iLCJsb2ciLCJzY2FsZSIsImV4cCIsImxvZ1ZhbHVlIiwiYSIsImIiLCJ2YWwiLCJtYXgiLCJpbWFnZUNhbnZhcyIsImNyZWF0ZUVsZW1lbnQiLCJpbWFnZUdyYXBoaWNzIiwibWFnIl0sInNvdXJjZVJvb3QiOiIifQ==