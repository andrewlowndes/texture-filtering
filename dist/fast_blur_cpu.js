(()=>{"use strict";var e={86:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.averageNaive=void 0;const o=a(78),r=a(62),l=a(27),d=a(975);t.averageNaive=(e,t,a,u,M)=>{const c=Math.floor(t),i=Math.floor(a),n=Math.floor(u),s=Math.floor(M);if(c==n&&i==s)return r.floor4Mutate(d.getPixel(e,c,i));const g=u-t,h=M-a,f=1/(g*h),m=Math.ceil(t),v=Math.ceil(a),x=Math.floor(u),P=Math.floor(M),p=m-t,w=v-a,_=u-x,y=M-P,b=[0,0,0,0];if(c==n){w&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,c,i),g*w)),y&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,n,s),g*y));const t=[0,0,0,0];for(let a=v;a<P;a++)o.add4Mutate(t,d.getPixel(e,c,a));return o.add4Mutate(b,l.scale4Mutate(t,g)),r.floor4Mutate(l.scale4Mutate(b,f))}if(i==s){p&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,c,i),h*p)),_&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,n,s),h*_));const t=[0,0,0,0];for(let a=m;a<x;a++)o.add4Mutate(t,d.getPixel(e,a,i));return o.add4Mutate(b,l.scale4Mutate(t,h)),r.floor4Mutate(l.scale4Mutate(b,f))}if(w&&(p&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,c,i),p*w)),_&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,n,i),_*w))),y&&(p&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,c,s),p*y)),_&&o.add4Mutate(b,l.scale4Mutate(d.getPixel(e,n,s),_*y))),w){const t=[0,0,0,0];for(let a=m;a<x;a++)o.add4Mutate(t,d.getPixel(e,a,i));o.add4Mutate(b,l.scale4Mutate(t,w))}if(p){const t=[0,0,0,0];for(let a=v;a<P;a++)o.add4Mutate(t,d.getPixel(e,c,a));o.add4Mutate(b,l.scale4Mutate(t,p))}if(y){const t=[0,0,0,0];for(let a=m;a<x;a++)o.add4Mutate(t,d.getPixel(e,a,s));o.add4Mutate(b,l.scale4Mutate(t,y))}if(_){const t=[0,0,0,0];for(let a=v;a<P;a++)o.add4Mutate(t,d.getPixel(e,n,a));o.add4Mutate(b,l.scale4Mutate(t,_))}for(let t=m;t<x;t++)for(let a=v;a<P;a++)o.add4Mutate(b,d.getPixel(e,t,a));return r.floor4Mutate(l.scale4Mutate(b,f))}},676:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.averageSummed=void 0;const o=a(78),r=a(62),l=a(27),d=a(196),u=a(975),M=(e,t,a)=>{try{const o=t>=0&&a>=0?e[a][t]:[0,0,0,0];if(void 0===o)throw Error("No summed texture value");return o}catch(e){throw console.error(t,a),e}},c=(e,t,a,r,l)=>{const u=[0,0,0,0];try{o.add4Mutate(u,M(e,r,l)),d.subtract4Mutate(u,M(e,t,l)),d.subtract4Mutate(u,M(e,r,a)),o.add4Mutate(u,M(e,t,a))}catch(o){throw console.error([u,M(e,r,l),M(e,t,l),M(e,r,a),M(e,t,a)]),o}return u};t.averageSummed=(e,t,a,d,M,i)=>{const n=Math.floor(a),s=Math.floor(d),g=Math.floor(M),h=Math.floor(i);if(n==g&&s==h)return r.floor4Mutate(u.getPixel(t,n,s));const f=M-a,m=i-d,v=1/(f*m),x=Math.ceil(a),P=Math.ceil(d),p=Math.floor(M),w=Math.floor(i),_=x-a,y=P-d,b=M-p,I=i-w,j=[0,0,0,0];return n==g?(y&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,n,s),f*y)),I&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,g,h),f*I)),o.add4Mutate(j,l.scale4Mutate(c(e,n-1,P-1,n,w-1),f)),r.floor4Mutate(l.scale4Mutate(j,v))):s==h?(_&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,n,s),m*_)),b&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,g,h),m*b)),o.add4Mutate(j,l.scale4Mutate(c(e,x-1,s-1,p-1,s),m)),r.floor4Mutate(l.scale4Mutate(j,v))):(y&&(_&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,n,s),_*y)),b&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,g,s),b*y))),I&&(_&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,n,h),_*I)),b&&o.add4Mutate(j,l.scale4Mutate(u.getPixel(t,g,h),b*I))),y&&o.add4Mutate(j,l.scale4Mutate(c(e,x-1,s-1,p-1,s),y)),_&&o.add4Mutate(j,l.scale4Mutate(c(e,n-1,P-1,n,w-1),_)),I&&o.add4Mutate(j,l.scale4Mutate(c(e,x-1,h-1,p-1,h),I)),b&&o.add4Mutate(j,l.scale4Mutate(c(e,g-1,P-1,g,w-1),b)),o.add4Mutate(j,c(e,x-1,P-1,p-1,w-1)),r.floor4Mutate(l.scale4Mutate(j,v)))}},975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPixel=t.getPixel=void 0,t.getPixel=(e,t,a)=>{const o=4*(e.width*Math.floor(a)+Math.floor(t));return e.data.slice(o,o+4)},t.setPixel=(e,t,a,o)=>{e.data.set(o,4*(Math.floor(a)*e.width+Math.floor(t)))}},787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderer=void 0,t.createRenderer=(e,t)=>{let a=!1;return()=>{a||(a=!0,requestAnimationFrame((()=>{e(),a=!1,null==t||t()})))}}},374:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSummedTexture=void 0;const o=a(78),r=a(196);t.createSummedTexture=e=>{const t=new Array(e.height);for(let a=0,l=0;l<e.height;l++){t[l]=new Array(e.width);for(let d=0;d<e.width;d++,a+=4){const u=new Uint32Array(e.data.slice(a,a+4));d>0&&o.add4Mutate(u,t[l][d-1]),l>0&&o.add4Mutate(u,t[l-1][d]),d>0&&l>0&&r.subtract4Mutate(u,t[l-1][d-1]),t[l][d]=u}}return t}},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLogScale=void 0,t.makeLogScale=(e,t)=>{const a=e?Math.log(e):0,o=Math.log(t)-a;return{fromLinear:e=>Math.exp(a+o*e),toLinear:e=>(Math.log(e)-a)/o}}},78:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.add4Mutate=void 0,t.add4Mutate=(e,t)=>(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e)},586:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=(e,t,a)=>Math.max(Math.min(e,a),t)},62:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.floor4Mutate=void 0,t.floor4Mutate=e=>(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),e[3]=Math.floor(e[3]),e)},372:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getImageData=void 0,t.getImageData=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");if(!a)throw new Error("Could not create canvas to extract image data");return a.clearRect(0,0,t.width,t.height),a.drawImage(e,0,0),a.getImageData(0,0,t.width,t.height)}},27:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scale4Mutate=void 0,t.scale4Mutate=(e,t)=>(e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e)},196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subtract4Mutate=void 0,t.subtract4Mutate=(e,t)=>(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e[3]-=t[3],e)}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,a),l.exports}(()=>{const e=a(86),t=a(676),o=a(787),r=a(374),l=a(586),d=a(372),u=a(601),M=document.getElementById("game"),c=document.getElementById("image"),i=document.getElementById("method"),n=document.getElementById("amount"),s=document.getElementById("amountvalue"),g=document.getElementById("timetaken"),h=M.getContext("2d");let f=8;const m=()=>{const a=d.getImageData(c),m=r.createSummedTexture(a),v=u.makeLogScale(0,512),x=o.createRenderer((()=>{s.value=f.toString(),n.value=v.toLinear(f).toString(),((a,o)=>{h.clearRect(0,0,M.width,M.height);const r=h.getImageData(0,0,M.width,M.height);let d;switch(i.value){case"summed":d=(e,r,l,d)=>t.averageSummed(o,a,e,r,l,d);break;case"naive":d=(t,o,r,l)=>e.averageNaive(a,t,o,r,l);break;default:throw new Error("Unknown method")}const u=Date.now();for(let e=0,t=0;e<M.height;e++)for(let a=0;a<M.width;a++,t+=4){const o=d(l.clamp(a-f,0,M.width),l.clamp(e-f,0,M.height),l.clamp(a+f,0,M.width),l.clamp(e+f,0,M.height));r.data.set(o,t)}h.putImageData(r,0,0),g.innerText=Date.now()-u+" ms"})(a,m)}));n.oninput=()=>{f=parseFloat(v.fromLinear(parseFloat(n.value)).toFixed(1)),x()},s.onchange=()=>{f=parseFloat(s.value),x()},i.onchange=x,x()};c.complete?m():c.onload=m})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9kcmF3L2F2ZXJhZ2VOYWl2ZS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9kcmF3L2F2ZXJhZ2VTdW1tZWQudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZHJhdy9jYW52YXMudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvZHJhdy9jcmVhdGVSZW5kZXJlci50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9kcmF3L2NyZWF0ZVN1bW1lZFRleHR1cmUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvbWF0aHMvbWFrZUxvZ1NjYWxlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL2FkZDRNdXRhdGUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvdXRpbHMvY2xhbXAudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvdXRpbHMvZmxvb3I0TXV0YXRlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL3V0aWxzL2dldEltYWdlRGF0YS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy91dGlscy9zY2FsZTRNdXRhdGUudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvdXRpbHMvc3VidHJhY3Q0TXV0YXRlLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL2RlbW9zL2Zhc3RCbHVyQ3B1LnRzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYXZlcmFnZU5haXZlIiwiYWRkNE11dGF0ZV8xIiwiZmxvb3I0TXV0YXRlXzEiLCJzY2FsZTRNdXRhdGVfMSIsImNhbnZhc18xIiwiaW1hZ2VEYXRhIiwieCIsInkiLCJ4MiIsInkyIiwic3RhcnRDZWxsWCIsIk1hdGgiLCJmbG9vciIsInN0YXJ0Q2VsbFkiLCJlbmRDZWxsWCIsImVuZENlbGxZIiwiZmxvb3I0TXV0YXRlIiwiZ2V0UGl4ZWwiLCJ3aWR0aCIsImhlaWdodCIsImNvbG91ck5vcm1hbGlzZXIiLCJpbm5lckNlbGxYIiwiY2VpbCIsImlubmVyQ2VsbFkiLCJpbm5lckNlbGxYMiIsImlubmVyQ2VsbFkyIiwibGVmdERpZmYiLCJ0b3BEaWZmIiwicmlnaHREaWZmIiwiYm90dG9tRGlmZiIsImNvbG91ciIsImFkZDRNdXRhdGUiLCJzY2FsZTRNdXRhdGUiLCJtaWRDb2xvdXIiLCJqIiwiaSIsInRvcENvbG91ciIsImxlZnRDb2xvdXIiLCJib3R0b21Db2xvdXIiLCJyaWdodENvbG91ciIsImF2ZXJhZ2VTdW1tZWQiLCJzdWJ0cmFjdDRNdXRhdGVfMSIsImdldFN1bW1lZFRleHR1cmVWYWwiLCJzdW1tZWRUZXh0dXJlIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRTdW1tZWRBcmVhIiwic3VidHJhY3Q0TXV0YXRlIiwic2V0UGl4ZWwiLCJzYW1wbGVJbmRleCIsImRhdGEiLCJzbGljZSIsInJnYmEiLCJzZXQiLCJjcmVhdGVSZW5kZXJlciIsInJlbmRlckZ1bmMiLCJhZnRlclJlbmRlckZ1bmMiLCJkcmF3aW5nIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3JlYXRlU3VtbWVkVGV4dHVyZSIsIkFycmF5IiwicGl4IiwiVWludDMyQXJyYXkiLCJtYWtlTG9nU2NhbGUiLCJmcm9tIiwidG8iLCJtaW4iLCJsb2ciLCJzY2FsZSIsImZyb21MaW5lYXIiLCJleHAiLCJ0b0xpbmVhciIsImxvZ1ZhbHVlIiwiYSIsImIiLCJjbGFtcCIsInZhbCIsIm1heCIsImdldEltYWdlRGF0YSIsImltYWdlIiwiaW1hZ2VDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbWFnZUdyYXBoaWNzIiwiZ2V0Q29udGV4dCIsImNsZWFyUmVjdCIsImRyYXdJbWFnZSIsIm1hZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJhdmVyYWdlTmFpdmVfMSIsImF2ZXJhZ2VTdW1tZWRfMSIsImNyZWF0ZVJlbmRlcmVyXzEiLCJjcmVhdGVTdW1tZWRUZXh0dXJlXzEiLCJjbGFtcF8xIiwiZ2V0SW1hZ2VEYXRhXzEiLCJtYWtlTG9nU2NhbGVfMSIsImdhbWUiLCJnZXRFbGVtZW50QnlJZCIsIm1ldGhvZCIsImFtb3VudElucHV0IiwiYW1vdW50VmFsdWVJbnB1dCIsInRpbWV0YWtlbiIsImciLCJibHVyQW1vdW50Iiwic3RhcnQiLCJibHVyTG9nU2NhbGUiLCJkcmF3IiwidG9TdHJpbmciLCJjYW52YXNJbWFnZSIsInBpeGVsRnVuYyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJwaXhlbENvbG91ciIsInB1dEltYWdlRGF0YSIsImlubmVyVGV4dCIsIm9uaW5wdXQiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsIm9uY2hhbmdlIiwiY29tcGxldGUiLCJvbmxvYWQiXSwibWFwcGluZ3MiOiJ1Q0FDQUEsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdERELEVBQVFFLGtCQUFlLEVBQ3ZCLE1BQU1DLEVBQWUsRUFBUSxJQUN2QkMsRUFBaUIsRUFBUSxJQUN6QkMsRUFBaUIsRUFBUSxJQUN6QkMsRUFBVyxFQUFRLEtBNkd6Qk4sRUFBUUUsYUE1R2EsQ0FBQ0ssRUFBV0MsRUFBR0MsRUFBR0MsRUFBSUMsS0FDdkMsTUFBTUMsRUFBYUMsS0FBS0MsTUFBTU4sR0FDeEJPLEVBQWFGLEtBQUtDLE1BQU1MLEdBQ3hCTyxFQUFXSCxLQUFLQyxNQUFN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T3FCLFNBQVdiLEVBQ2xCQSxLQUVBaEMsRUFBTThDLFNBQ05oQixJQUdBOUIsRUFBTStDLE9BQVNqQixHIiwiZmlsZSI6ImZhc3RfYmx1cl9jcHUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmF2ZXJhZ2VOYWl2ZSA9IHZvaWQgMDtcclxuY29uc3QgYWRkNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2FkZDRNdXRhdGVcIik7XHJcbmNvbnN0IGZsb29yNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2Zsb29yNE11dGF0ZVwiKTtcclxuY29uc3Qgc2NhbGU0TXV0YXRlXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvc2NhbGU0TXV0YXRlXCIpO1xyXG5jb25zdCBjYW52YXNfMSA9IHJlcXVpcmUoXCIuL2NhbnZhc1wiKTtcclxuY29uc3QgYXZlcmFnZU5haXZlID0gKGltYWdlRGF0YSwgeCwgeSwgeDIsIHkyKSA9PiB7XHJcbiAgICBjb25zdCBzdGFydENlbGxYID0gTWF0aC5mbG9vcih4KTtcclxuICAgIGNvbnN0IHN0YXJ0Q2VsbFkgPSBNYXRoLmZsb29yKHkpO1xyXG4gICAgY29uc3QgZW5kQ2VsbFggPSBNYXRoLmZsb29yKHgyKTtcclxuICAgIGNvbnN0IGVuZENlbGxZID0gTWF0aC5mbG9vcih5Mik7XHJcbiAgICAvL3JhbmdlIGNvbnRhaW5lZCBpbiBvbmUgcGl4ZWxcclxuICAgIGlmIChzdGFydENlbGxYID09IGVuZENlbGxYICYmIHN0YXJ0Q2VsbFkgPT0gZW5kQ2VsbFkpIHtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgc3RhcnRDZWxsWSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd2lkdGggPSB4MiAtIHg7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB5MiAtIHk7XHJcbiAgICBjb25zdCBwaXhlbEFyZWEgPSB3aWR0aCAqIGhlaWdodDtcclxuICAgIGNvbnN0IGNvbG91ck5vcm1hbGlzZXIgPSAxIC8gcGl4ZWxBcmVhO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWCA9IE1hdGguY2VpbCh4KTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFkgPSBNYXRoLmNlaWwoeSk7XHJcbiAgICBjb25zdCBpbm5lckNlbGxYMiA9IE1hdGguZmxvb3IoeDIpO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWTIgPSBNYXRoLmZsb29yKHkyKTtcclxuICAgIGNvbnN0IGxlZnREaWZmID0gaW5uZXJDZWxsWCAtIHg7XHJcbiAgICBjb25zdCB0b3BEaWZmID0gaW5uZXJDZWxsWSAtIHk7XHJcbiAgICBjb25zdCByaWdodERpZmYgPSB4MiAtIGlubmVyQ2VsbFgyO1xyXG4gICAgY29uc3QgYm90dG9tRGlmZiA9IHkyIC0gaW5uZXJDZWxsWTI7XHJcbiAgICBjb25zdCBjb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAvL3BlcmhhcHMgd2Ugc2hvdWxkIGJlIGJsZW5kaW5nIGFub3RoZXIgd2F5IChhbHBoYSkgaW5zdGVhZCBvZiBhZGRpbmc/XHJcbiAgICAvL3NpbmdsZSBob3Jpem9udGFsIHN0cmlwXHJcbiAgICBpZiAoc3RhcnRDZWxsWCA9PSBlbmRDZWxsWCkge1xyXG4gICAgICAgIGlmICh0b3BEaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgc3RhcnRDZWxsWSksIHdpZHRoICogdG9wRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIHdpZHRoICogYm90dG9tRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtaWRDb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGlubmVyQ2VsbFk7IGogPCBpbm5lckNlbGxZMjsgaisrKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKG1pZENvbG91ciwgY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKG1pZENvbG91ciwgd2lkdGgpKTtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjb2xvdXIsIGNvbG91ck5vcm1hbGlzZXIpKTtcclxuICAgIH1cclxuICAgIC8vc2luZ2xlIHZlcnRpY2FsIHN0cmlwXHJcbiAgICBpZiAoc3RhcnRDZWxsWSA9PSBlbmRDZWxsWSkge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCBoZWlnaHQgKiBsZWZ0RGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmlnaHREaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgZW5kQ2VsbFgsIGVuZENlbGxZKSwgaGVpZ2h0ICogcmlnaHREaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1pZENvbG91ciA9IFswLCAwLCAwLCAwXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gaW5uZXJDZWxsWDsgaSA8IGlubmVyQ2VsbFgyOyBpKyspIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUobWlkQ29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGksIHN0YXJ0Q2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUobWlkQ29sb3VyLCBoZWlnaHQpKTtcclxuICAgICAgICByZXR1cm4gZmxvb3I0TXV0YXRlXzEuZmxvb3I0TXV0YXRlKHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjb2xvdXIsIGNvbG91ck5vcm1hbGlzZXIpKTtcclxuICAgIH1cclxuICAgIC8vY29ybmVyIGNlbGxzXHJcbiAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCBsZWZ0RGlmZiAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBzdGFydENlbGxZKSwgcmlnaHREaWZmICogdG9wRGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChib3R0b21EaWZmKSB7XHJcbiAgICAgICAgaWYgKGxlZnREaWZmKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgc3RhcnRDZWxsWCwgZW5kQ2VsbFkpLCBsZWZ0RGlmZiAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIHJpZ2h0RGlmZiAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2ZyYWN0aW9uYWwgc3RyaXBzXHJcbiAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgIGNvbnN0IHRvcENvbG91ciA9IFswLCAwLCAwLCAwXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gaW5uZXJDZWxsWDsgaSA8IGlubmVyQ2VsbFgyOyBpKyspIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUodG9wQ29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGksIHN0YXJ0Q2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUodG9wQ29sb3VyLCB0b3BEaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICBjb25zdCBsZWZ0Q29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpbm5lckNlbGxZOyBqIDwgaW5uZXJDZWxsWTI7IGorKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShsZWZ0Q29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIGopKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUobGVmdENvbG91ciwgbGVmdERpZmYpKTtcclxuICAgIH1cclxuICAgIGlmIChib3R0b21EaWZmKSB7XHJcbiAgICAgICAgY29uc3QgYm90dG9tQ29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBpbm5lckNlbGxYOyBpIDwgaW5uZXJDZWxsWDI7IGkrKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShib3R0b21Db2xvdXIsIGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgaSwgZW5kQ2VsbFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoYm90dG9tQ29sb3VyLCBib3R0b21EaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmlnaHREaWZmKSB7XHJcbiAgICAgICAgY29uc3QgcmlnaHRDb2xvdXIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGlubmVyQ2VsbFk7IGogPCBpbm5lckNlbGxZMjsgaisrKSB7XHJcbiAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKHJpZ2h0Q29sb3VyLCBjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKHJpZ2h0Q29sb3VyLCByaWdodERpZmYpKTtcclxuICAgIH1cclxuICAgIC8vaW5uZXIgcGFydHNcclxuICAgIGZvciAobGV0IGkgPSBpbm5lckNlbGxYOyBpIDwgaW5uZXJDZWxsWDI7IGkrKykge1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpbm5lckNlbGxZOyBqIDwgaW5uZXJDZWxsWTI7IGorKykge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIGNhbnZhc18xLmdldFBpeGVsKGltYWdlRGF0YSwgaSwgaikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vbm93IHdlIGhhdmUgYW4gYWNjdW11bGF0aXZlIHBpeGVsIHZhbHVlIHRoYXQgY292ZXJzIHRoZSB3aG9sZSBhcmVhIHNvIGp1c3QgYXZlcmFnZSBpdFxyXG4gICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbn07XHJcbmV4cG9ydHMuYXZlcmFnZU5haXZlID0gYXZlcmFnZU5haXZlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmF2ZXJhZ2VTdW1tZWQgPSB2b2lkIDA7XHJcbmNvbnN0IGFkZDRNdXRhdGVfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9hZGQ0TXV0YXRlXCIpO1xyXG5jb25zdCBmbG9vcjRNdXRhdGVfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9mbG9vcjRNdXRhdGVcIik7XHJcbmNvbnN0IHNjYWxlNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL3NjYWxlNE11dGF0ZVwiKTtcclxuY29uc3Qgc3VidHJhY3Q0TXV0YXRlXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvc3VidHJhY3Q0TXV0YXRlXCIpO1xyXG5jb25zdCBjYW52YXNfMSA9IHJlcXVpcmUoXCIuL2NhbnZhc1wiKTtcclxuY29uc3QgZ2V0U3VtbWVkVGV4dHVyZVZhbCA9IChzdW1tZWRUZXh0dXJlLCB4LCB5KSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHggPj0gMCAmJiB5ID49IDAgPyBzdW1tZWRUZXh0dXJlW3ldW3hdIDogWzAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignTm8gc3VtbWVkIHRleHR1cmUgdmFsdWUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHgsIHkpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0U3VtbWVkQXJlYSA9IChzdW1tZWRUZXh0dXJlLCB4LCB5LCB4MiwgeTIpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFswLCAwLCAwLCAwXTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5MikpO1xyXG4gICAgICAgIHN1YnRyYWN0NE11dGF0ZV8xLnN1YnRyYWN0NE11dGF0ZShyZXN1bHQsIGdldFN1bW1lZFRleHR1cmVWYWwoc3VtbWVkVGV4dHVyZSwgeCwgeTIpKTtcclxuICAgICAgICBzdWJ0cmFjdDRNdXRhdGVfMS5zdWJ0cmFjdDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5KSk7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocmVzdWx0LCBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgsIHkpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFtcclxuICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5MiksXHJcbiAgICAgICAgICAgIGdldFN1bW1lZFRleHR1cmVWYWwoc3VtbWVkVGV4dHVyZSwgeCwgeTIpLFxyXG4gICAgICAgICAgICBnZXRTdW1tZWRUZXh0dXJlVmFsKHN1bW1lZFRleHR1cmUsIHgyLCB5KSxcclxuICAgICAgICAgICAgZ2V0U3VtbWVkVGV4dHVyZVZhbChzdW1tZWRUZXh0dXJlLCB4LCB5KVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbi8vcmVzdWx0cyBpbiB1cCB0byAyNCB0ZXh0dXJlIGxvb2t1cHMgYmFzZWQgb24gY29tcGxleGl0eSBvZiByYW5nZSwgd2hhdGV2ZXIgc2l6ZSB0aGUgaW1hZ2UgaXNcclxuY29uc3QgYXZlcmFnZVN1bW1lZCA9IChzdW1tZWRUZXh0dXJlLCBpbWFnZURhdGEsIHgsIHksIHgyLCB5MikgPT4ge1xyXG4gICAgY29uc3Qgc3RhcnRDZWxsWCA9IE1hdGguZmxvb3IoeCk7XHJcbiAgICBjb25zdCBzdGFydENlbGxZID0gTWF0aC5mbG9vcih5KTtcclxuICAgIGNvbnN0IGVuZENlbGxYID0gTWF0aC5mbG9vcih4Mik7XHJcbiAgICBjb25zdCBlbmRDZWxsWSA9IE1hdGguZmxvb3IoeTIpO1xyXG4gICAgLy9yYW5nZSBjb250YWluZWQgaW4gb25lIHBpeGVsXHJcbiAgICBpZiAoc3RhcnRDZWxsWCA9PSBlbmRDZWxsWCAmJiBzdGFydENlbGxZID09IGVuZENlbGxZKSB7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHdpZHRoID0geDIgLSB4O1xyXG4gICAgY29uc3QgaGVpZ2h0ID0geTIgLSB5O1xyXG4gICAgY29uc3QgcGl4ZWxBcmVhID0gd2lkdGggKiBoZWlnaHQ7XHJcbiAgICBjb25zdCBjb2xvdXJOb3JtYWxpc2VyID0gMSAvIHBpeGVsQXJlYTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFggPSBNYXRoLmNlaWwoeCk7XHJcbiAgICBjb25zdCBpbm5lckNlbGxZID0gTWF0aC5jZWlsKHkpO1xyXG4gICAgY29uc3QgaW5uZXJDZWxsWDIgPSBNYXRoLmZsb29yKHgyKTtcclxuICAgIGNvbnN0IGlubmVyQ2VsbFkyID0gTWF0aC5mbG9vcih5Mik7XHJcbiAgICBjb25zdCBsZWZ0RGlmZiA9IGlubmVyQ2VsbFggLSB4O1xyXG4gICAgY29uc3QgdG9wRGlmZiA9IGlubmVyQ2VsbFkgLSB5O1xyXG4gICAgY29uc3QgcmlnaHREaWZmID0geDIgLSBpbm5lckNlbGxYMjtcclxuICAgIGNvbnN0IGJvdHRvbURpZmYgPSB5MiAtIGlubmVyQ2VsbFkyO1xyXG4gICAgY29uc3QgY29sb3VyID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgLy9zaW5nbGUgaG9yaXpvbnRhbCBzdHJpcFxyXG4gICAgaWYgKHN0YXJ0Q2VsbFggPT0gZW5kQ2VsbFgpIHtcclxuICAgICAgICBpZiAodG9wRGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIHN0YXJ0Q2VsbFkpLCB3aWR0aCAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvdHRvbURpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgZW5kQ2VsbFkpLCB3aWR0aCAqIGJvdHRvbURpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBzdGFydENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIHN0YXJ0Q2VsbFgsIGlubmVyQ2VsbFkyIC0gMSksIHdpZHRoKSk7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbiAgICB9XHJcbiAgICAvL3NpbmdsZSB2ZXJ0aWNhbCBzdHJpcFxyXG4gICAgaWYgKHN0YXJ0Q2VsbFkgPT0gZW5kQ2VsbFkpIHtcclxuICAgICAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBzdGFydENlbGxZKSwgaGVpZ2h0ICogbGVmdERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIGVuZENlbGxYLCBlbmRDZWxsWSksIGhlaWdodCAqIHJpZ2h0RGlmZikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGlubmVyQ2VsbFggLSAxLCBzdGFydENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBzdGFydENlbGxZKSwgaGVpZ2h0KSk7XHJcbiAgICAgICAgcmV0dXJuIGZsb29yNE11dGF0ZV8xLmZsb29yNE11dGF0ZShzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY29sb3VyLCBjb2xvdXJOb3JtYWxpc2VyKSk7XHJcbiAgICB9XHJcbiAgICAvL2Nvcm5lciBjZWxsc1xyXG4gICAgaWYgKHRvcERpZmYpIHtcclxuICAgICAgICBpZiAobGVmdERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBzdGFydENlbGxYLCBzdGFydENlbGxZKSwgbGVmdERpZmYgKiB0b3BEaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgc3RhcnRDZWxsWSksIHJpZ2h0RGlmZiAqIHRvcERpZmYpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgIGlmIChsZWZ0RGlmZikge1xyXG4gICAgICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShjYW52YXNfMS5nZXRQaXhlbChpbWFnZURhdGEsIHN0YXJ0Q2VsbFgsIGVuZENlbGxZKSwgbGVmdERpZmYgKiBib3R0b21EaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoY2FudmFzXzEuZ2V0UGl4ZWwoaW1hZ2VEYXRhLCBlbmRDZWxsWCwgZW5kQ2VsbFkpLCByaWdodERpZmYgKiBib3R0b21EaWZmKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9mcmFjdGlvbmFsIHN0cmlwc1xyXG4gICAgaWYgKHRvcERpZmYpIHtcclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGlubmVyQ2VsbFggLSAxLCBzdGFydENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBzdGFydENlbGxZKSwgdG9wRGlmZikpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxlZnREaWZmKSB7XHJcbiAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUoY29sb3VyLCBzY2FsZTRNdXRhdGVfMS5zY2FsZTRNdXRhdGUoZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBzdGFydENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIHN0YXJ0Q2VsbFgsIGlubmVyQ2VsbFkyIC0gMSksIGxlZnREaWZmKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYm90dG9tRGlmZikge1xyXG4gICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGdldFN1bW1lZEFyZWEoc3VtbWVkVGV4dHVyZSwgaW5uZXJDZWxsWCAtIDEsIGVuZENlbGxZIC0gMSwgaW5uZXJDZWxsWDIgLSAxLCBlbmRDZWxsWSksIGJvdHRvbURpZmYpKTtcclxuICAgIH1cclxuICAgIGlmIChyaWdodERpZmYpIHtcclxuICAgICAgICBhZGQ0TXV0YXRlXzEuYWRkNE11dGF0ZShjb2xvdXIsIHNjYWxlNE11dGF0ZV8xLnNjYWxlNE11dGF0ZShnZXRTdW1tZWRBcmVhKHN1bW1lZFRleHR1cmUsIGVuZENlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIGVuZENlbGxYLCBpbm5lckNlbGxZMiAtIDEpLCByaWdodERpZmYpKTtcclxuICAgIH1cclxuICAgIC8vaW5uZXIgcGFydHNcclxuICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKGNvbG91ciwgZ2V0U3VtbWVkQXJlYShzdW1tZWRUZXh0dXJlLCBpbm5lckNlbGxYIC0gMSwgaW5uZXJDZWxsWSAtIDEsIGlubmVyQ2VsbFgyIC0gMSwgaW5uZXJDZWxsWTIgLSAxKSk7XHJcbiAgICAvL25vdyB3ZSBoYXZlIGFuIGFjY3VtdWxhdGl2ZSBwaXhlbCB2YWx1ZSB0aGF0IGNvdmVycyB0aGUgd2hvbGUgYXJlYSBzbyBqdXN0IGF2ZXJhZ2UgaXRcclxuICAgIHJldHVybiBmbG9vcjRNdXRhdGVfMS5mbG9vcjRNdXRhdGUoc2NhbGU0TXV0YXRlXzEuc2NhbGU0TXV0YXRlKGNvbG91ciwgY29sb3VyTm9ybWFsaXNlcikpO1xyXG59O1xyXG5leHBvcnRzLmF2ZXJhZ2VTdW1tZWQgPSBhdmVyYWdlU3VtbWVkO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNldFBpeGVsID0gZXhwb3J0cy5nZXRQaXhlbCA9IHZvaWQgMDtcclxuY29uc3QgZ2V0UGl4ZWwgPSAoaW1hZ2VEYXRhLCB4LCB5KSA9PiB7XHJcbiAgICBjb25zdCBzYW1wbGVJbmRleCA9IChpbWFnZURhdGEud2lkdGggKiBNYXRoLmZsb29yKHkpICsgTWF0aC5mbG9vcih4KSkgKiA0O1xyXG4gICAgcmV0dXJuIGltYWdlRGF0YS5kYXRhLnNsaWNlKHNhbXBsZUluZGV4LCBzYW1wbGVJbmRleCArIDQpO1xyXG59O1xyXG5leHBvcnRzLmdldFBpeGVsID0gZ2V0UGl4ZWw7XHJcbmNvbnN0IHNldFBpeGVsID0gKGltYWdlRGF0YSwgeCwgeSwgcmdiYSkgPT4ge1xyXG4gICAgaW1hZ2VEYXRhLmRhdGEuc2V0KHJnYmEsIChNYXRoLmZsb29yKHkpICogaW1hZ2VEYXRhLndpZHRoICsgTWF0aC5mbG9vcih4KSkgKiA0KTtcclxufTtcclxuZXhwb3J0cy5zZXRQaXhlbCA9IHNldFBpeGVsO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVJlbmRlcmVyID0gdm9pZCAwO1xyXG5jb25zdCBjcmVhdGVSZW5kZXJlciA9IChyZW5kZXJGdW5jLCBhZnRlclJlbmRlckZ1bmMpID0+IHtcclxuICAgIGxldCBkcmF3aW5nID0gZmFsc2U7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmICghZHJhd2luZykge1xyXG4gICAgICAgICAgICBkcmF3aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlckZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIGRyYXdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyRnVuYyA9PT0gbnVsbCB8fCBhZnRlclJlbmRlckZ1bmMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFmdGVyUmVuZGVyRnVuYygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZVJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY3JlYXRlU3VtbWVkVGV4dHVyZSA9IHZvaWQgMDtcclxuY29uc3QgYWRkNE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2FkZDRNdXRhdGVcIik7XHJcbmNvbnN0IHN1YnRyYWN0NE11dGF0ZV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL3N1YnRyYWN0NE11dGF0ZVwiKTtcclxuY29uc3QgY3JlYXRlU3VtbWVkVGV4dHVyZSA9IChpbWFnZURhdGEpID0+IHtcclxuICAgIGNvbnN0IHN1bW1lZFRleHR1cmUgPSBuZXcgQXJyYXkoaW1hZ2VEYXRhLmhlaWdodCk7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgeSA9IDA7IHkgPCBpbWFnZURhdGEuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICBzdW1tZWRUZXh0dXJlW3ldID0gbmV3IEFycmF5KGltYWdlRGF0YS53aWR0aCk7XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBpbWFnZURhdGEud2lkdGg7IHgrKywgaSArPSA0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpeCA9IG5ldyBVaW50MzJBcnJheShpbWFnZURhdGEuZGF0YS5zbGljZShpLCBpICsgNCkpO1xyXG4gICAgICAgICAgICBpZiAoeCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZDRNdXRhdGVfMS5hZGQ0TXV0YXRlKHBpeCwgc3VtbWVkVGV4dHVyZVt5XVt4IC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkNE11dGF0ZV8xLmFkZDRNdXRhdGUocGl4LCBzdW1tZWRUZXh0dXJlW3kgLSAxXVt4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPiAwICYmIHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJ0cmFjdDRNdXRhdGVfMS5zdWJ0cmFjdDRNdXRhdGUocGl4LCBzdW1tZWRUZXh0dXJlW3kgLSAxXVt4IC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1bW1lZFRleHR1cmVbeV1beF0gPSBwaXg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1bW1lZFRleHR1cmU7XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlU3VtbWVkVGV4dHVyZSA9IGNyZWF0ZVN1bW1lZFRleHR1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubWFrZUxvZ1NjYWxlID0gdm9pZCAwO1xyXG5jb25zdCBtYWtlTG9nU2NhbGUgPSAoZnJvbSwgdG8pID0+IHtcclxuICAgIGNvbnN0IG1pbiA9IGZyb20gPyBNYXRoLmxvZyhmcm9tKSA6IDA7XHJcbiAgICBjb25zdCBtYXggPSBNYXRoLmxvZyh0byk7XHJcbiAgICBjb25zdCBzY2FsZSA9IG1heCAtIG1pbjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZnJvbUxpbmVhcjogKHZhbHVlKSA9PiBNYXRoLmV4cChtaW4gKyBzY2FsZSAqIHZhbHVlKSxcclxuICAgICAgICB0b0xpbmVhcjogKGxvZ1ZhbHVlKSA9PiAoTWF0aC5sb2cobG9nVmFsdWUpIC0gbWluKSAvIHNjYWxlXHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnRzLm1ha2VMb2dTY2FsZSA9IG1ha2VMb2dTY2FsZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5hZGQ0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBhZGQ0TXV0YXRlID0gKGEsIGIpID0+IHtcclxuICAgIGFbMF0gKz0gYlswXTtcclxuICAgIGFbMV0gKz0gYlsxXTtcclxuICAgIGFbMl0gKz0gYlsyXTtcclxuICAgIGFbM10gKz0gYlszXTtcclxuICAgIHJldHVybiBhO1xyXG59O1xyXG5leHBvcnRzLmFkZDRNdXRhdGUgPSBhZGQ0TXV0YXRlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNsYW1wID0gdm9pZCAwO1xyXG5jb25zdCBjbGFtcCA9ICh2YWwsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xyXG59O1xyXG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZmxvb3I0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBmbG9vcjRNdXRhdGUgPSAoYSkgPT4ge1xyXG4gICAgYVswXSA9IE1hdGguZmxvb3IoYVswXSk7XHJcbiAgICBhWzFdID0gTWF0aC5mbG9vcihhWzFdKTtcclxuICAgIGFbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xyXG4gICAgYVszXSA9IE1hdGguZmxvb3IoYVszXSk7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy5mbG9vcjRNdXRhdGUgPSBmbG9vcjRNdXRhdGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZ2V0SW1hZ2VEYXRhID0gdm9pZCAwO1xyXG5jb25zdCBnZXRJbWFnZURhdGEgPSAoaW1hZ2UpID0+IHtcclxuICAgIGNvbnN0IGltYWdlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBpbWFnZUNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgaW1hZ2VDYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgY29uc3QgaW1hZ2VHcmFwaGljcyA9IGltYWdlQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIWltYWdlR3JhcGhpY3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBjcmVhdGUgY2FudmFzIHRvIGV4dHJhY3QgaW1hZ2UgZGF0YScpO1xyXG4gICAgfVxyXG4gICAgaW1hZ2VHcmFwaGljcy5jbGVhclJlY3QoMCwgMCwgaW1hZ2VDYW52YXMud2lkdGgsIGltYWdlQ2FudmFzLmhlaWdodCk7XHJcbiAgICBpbWFnZUdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XHJcbiAgICByZXR1cm4gaW1hZ2VHcmFwaGljcy5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2VDYW52YXMud2lkdGgsIGltYWdlQ2FudmFzLmhlaWdodCk7XHJcbn07XHJcbmV4cG9ydHMuZ2V0SW1hZ2VEYXRhID0gZ2V0SW1hZ2VEYXRhO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNjYWxlNE11dGF0ZSA9IHZvaWQgMDtcclxuY29uc3Qgc2NhbGU0TXV0YXRlID0gKGEsIG1hZykgPT4ge1xyXG4gICAgYVswXSAqPSBtYWc7XHJcbiAgICBhWzFdICo9IG1hZztcclxuICAgIGFbMl0gKj0gbWFnO1xyXG4gICAgYVszXSAqPSBtYWc7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy5zY2FsZTRNdXRhdGUgPSBzY2FsZTRNdXRhdGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuc3VidHJhY3Q0TXV0YXRlID0gdm9pZCAwO1xyXG5jb25zdCBzdWJ0cmFjdDRNdXRhdGUgPSAoYSwgYikgPT4ge1xyXG4gICAgYVswXSAtPSBiWzBdO1xyXG4gICAgYVsxXSAtPSBiWzFdO1xyXG4gICAgYVsyXSAtPSBiWzJdO1xyXG4gICAgYVszXSAtPSBiWzNdO1xyXG4gICAgcmV0dXJuIGE7XHJcbn07XHJcbmV4cG9ydHMuc3VidHJhY3Q0TXV0YXRlID0gc3VidHJhY3Q0TXV0YXRlO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgYXZlcmFnZU5haXZlXzEgPSByZXF1aXJlKFwiLi4vZHJhdy9hdmVyYWdlTmFpdmVcIik7XHJcbmNvbnN0IGF2ZXJhZ2VTdW1tZWRfMSA9IHJlcXVpcmUoXCIuLi9kcmF3L2F2ZXJhZ2VTdW1tZWRcIik7XHJcbmNvbnN0IGNyZWF0ZVJlbmRlcmVyXzEgPSByZXF1aXJlKFwiLi4vZHJhdy9jcmVhdGVSZW5kZXJlclwiKTtcclxuY29uc3QgY3JlYXRlU3VtbWVkVGV4dHVyZV8xID0gcmVxdWlyZShcIi4uL2RyYXcvY3JlYXRlU3VtbWVkVGV4dHVyZVwiKTtcclxuY29uc3QgY2xhbXBfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9jbGFtcFwiKTtcclxuY29uc3QgZ2V0SW1hZ2VEYXRhXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2V0SW1hZ2VEYXRhXCIpO1xyXG5jb25zdCBtYWtlTG9nU2NhbGVfMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9tYWtlTG9nU2NhbGVcIik7XHJcbmNvbnN0IGdhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVcIik7XHJcbmNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKTtcclxuY29uc3QgbWV0aG9kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXRob2RcIik7XHJcbmNvbnN0IGFtb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbW91bnRcIik7XHJcbmNvbnN0IGFtb3VudFZhbHVlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFtb3VudHZhbHVlXCIpO1xyXG5jb25zdCB0aW1ldGFrZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWV0YWtlblwiKTtcclxuY29uc3QgZyA9IGdhbWUuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5sZXQgYmx1ckFtb3VudCA9IDg7XHJcbmNvbnN0IGRyYXdJbWFnZSA9IChpbWFnZURhdGEsIHN1bW1lZFRleHR1cmUpID0+IHtcclxuICAgIGcuY2xlYXJSZWN0KDAsIDAsIGdhbWUud2lkdGgsIGdhbWUuaGVpZ2h0KTtcclxuICAgIGNvbnN0IGNhbnZhc0ltYWdlID0gZy5nZXRJbWFnZURhdGEoMCwgMCwgZ2FtZS53aWR0aCwgZ2FtZS5oZWlnaHQpO1xyXG4gICAgbGV0IHBpeGVsRnVuYztcclxuICAgIHN3aXRjaCAobWV0aG9kLnZhbHVlKSB7XHJcbiAgICAgICAgY2FzZSAnc3VtbWVkJzpcclxuICAgICAgICAgICAgcGl4ZWxGdW5jID0gKHgsIHksIHgyLCB5MikgPT4gYXZlcmFnZVN1bW1lZF8xLmF2ZXJhZ2VTdW1tZWQoc3VtbWVkVGV4dHVyZSwgaW1hZ2VEYXRhLCB4LCB5LCB4MiwgeTIpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICduYWl2ZSc6XHJcbiAgICAgICAgICAgIHBpeGVsRnVuYyA9ICh4LCB5LCB4MiwgeTIpID0+IGF2ZXJhZ2VOYWl2ZV8xLmF2ZXJhZ2VOYWl2ZShpbWFnZURhdGEsIHgsIHksIHgyLCB5Mik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXRob2QnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICBmb3IgKGxldCB5ID0gMCwgaSA9IDA7IHkgPCBnYW1lLmhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBnYW1lLndpZHRoOyB4KyssIGkgKz0gNCkge1xyXG4gICAgICAgICAgICBjb25zdCBwbG90WCA9IGNsYW1wXzEuY2xhbXAoeCAtIGJsdXJBbW91bnQsIDAsIGdhbWUud2lkdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBwbG90WSA9IGNsYW1wXzEuY2xhbXAoeSAtIGJsdXJBbW91bnQsIDAsIGdhbWUuaGVpZ2h0KTtcclxuICAgICAgICAgICAgY29uc3QgcGxvdFgyID0gY2xhbXBfMS5jbGFtcCh4ICsgYmx1ckFtb3VudCwgMCwgZ2FtZS53aWR0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsb3RZMiA9IGNsYW1wXzEuY2xhbXAoeSArIGJsdXJBbW91bnQsIDAsIGdhbWUuaGVpZ2h0KTtcclxuICAgICAgICAgICAgY29uc3QgcGl4ZWxDb2xvdXIgPSBwaXhlbEZ1bmMocGxvdFgsIHBsb3RZLCBwbG90WDIsIHBsb3RZMik7XHJcbiAgICAgICAgICAgIGNhbnZhc0ltYWdlLmRhdGEuc2V0KHBpeGVsQ29sb3VyLCBpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnLnB1dEltYWdlRGF0YShjYW52YXNJbWFnZSwgMCwgMCk7XHJcbiAgICB0aW1ldGFrZW4uaW5uZXJUZXh0ID0gYCR7KERhdGUubm93KCkgLSBzdGFydFRpbWUpfSBtc2A7XHJcbn07XHJcbmNvbnN0IHN0YXJ0ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gZ2V0SW1hZ2VEYXRhXzEuZ2V0SW1hZ2VEYXRhKGltYWdlKTtcclxuICAgIGNvbnN0IHN1bW1lZFRleHR1cmUgPSBjcmVhdGVTdW1tZWRUZXh0dXJlXzEuY3JlYXRlU3VtbWVkVGV4dHVyZShpbWFnZURhdGEpO1xyXG4gICAgY29uc3QgYmx1ckxvZ1NjYWxlID0gbWFrZUxvZ1NjYWxlXzEubWFrZUxvZ1NjYWxlKDAsIDUxMik7XHJcbiAgICBjb25zdCBkcmF3ID0gY3JlYXRlUmVuZGVyZXJfMS5jcmVhdGVSZW5kZXJlcigoKSA9PiB7XHJcbiAgICAgICAgYW1vdW50VmFsdWVJbnB1dC52YWx1ZSA9IGJsdXJBbW91bnQudG9TdHJpbmcoKTtcclxuICAgICAgICBhbW91bnRJbnB1dC52YWx1ZSA9IGJsdXJMb2dTY2FsZS50b0xpbmVhcihibHVyQW1vdW50KS50b1N0cmluZygpO1xyXG4gICAgICAgIGRyYXdJbWFnZShpbWFnZURhdGEsIHN1bW1lZFRleHR1cmUpO1xyXG4gICAgfSk7XHJcbiAgICBhbW91bnRJbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgIC8vY29udmVydCB0aGUgc2xpZGVyIHZhbHVlIGFzIGlmIGl0IHdhcyBleHBvbmVudGlhbFxyXG4gICAgICAgIGJsdXJBbW91bnQgPSBwYXJzZUZsb2F0KGJsdXJMb2dTY2FsZS5mcm9tTGluZWFyKHBhcnNlRmxvYXQoYW1vdW50SW5wdXQudmFsdWUpKS50b0ZpeGVkKDEpKTtcclxuICAgICAgICBkcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgYW1vdW50VmFsdWVJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICBibHVyQW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRWYWx1ZUlucHV0LnZhbHVlKTtcclxuICAgICAgICBkcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgbWV0aG9kLm9uY2hhbmdlID0gZHJhdztcclxuICAgIGRyYXcoKTtcclxufTtcclxuaWYgKGltYWdlLmNvbXBsZXRlKSB7XHJcbiAgICBzdGFydCgpO1xyXG59XHJcbmVsc2Uge1xyXG4gICAgaW1hZ2Uub25sb2FkID0gc3RhcnQ7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==