"use strict";(self.webpackChunksampling_coverage=self.webpackChunksampling_coverage||[]).push([[638],{673:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(o,c){function r(e){try{i(n.next(e))}catch(e){c(e)}}function l(e){try{i(n.throw(e))}catch(e){c(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}i((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=a(887),c=a(7787),r=a(4669),l=a(8372),i=a(3792),s=a(3345),d=document.getElementById("game"),u=document.getElementById("resolution"),p=document.getElementById("cache"),m=document.getElementById("timetaken"),v=d.getContext("2d"),h=o.vec2.fromValues(160,160),g=o.vec2.fromValues(250,130),f=o.vec2.fromValues(150,270),b={p1:h,p2:g,p3:f,points:[h,g,f],e1:(0,r.sub)(g,h),e2:(0,r.sub)(f,g),e3:(0,r.sub)(h,f)};let w,M,y;b.center=(0,r.avg)(...b.points);const P=2*Math.PI,I=(0,c.createRenderer)((()=>{b.points.forEach((e=>{o.vec2.rotate(e,e,b.center,.01)})),b.e1=(0,r.sub)(b.p2,b.p1),b.e2=(0,r.sub)(b.p3,b.p2),b.e3=(0,r.sub)(b.p1,b.p3),M&&y&&(()=>{v.clearRect(0,0,d.width,d.height);const e=(M.width-1)/(w-1),t=(M.height-1)/(w-1),a=Date.now(),n=w-1,o=(0,s.clamp)(Math.round(b.p1[0]/e),0,n),c=(0,s.clamp)(Math.round(b.p1[1]/t),0,n),r=(0,s.clamp)(Math.round(b.p2[0]/e),0,n),l=(0,s.clamp)(Math.round(b.p2[1]/t),0,n),i=(0,s.clamp)(Math.round(b.p3[0]/e),0,n),u=(0,s.clamp)(Math.round(b.p3[1]/t),0,n),p=u+w*(i+w*(l+w*(r+w*(c+w*o)))),h=y.data.slice(4*p,4*(p+1));m.innerText=Date.now()-a+" ms",v.putImageData(M,0,0);for(let a=0;a<M.width;a+=e)for(let e=0;e<M.height;e+=t)v.fillStyle="yellow",v.beginPath(),v.arc(a,e,4,0,P),v.fill();v.lineWidth=1,v.strokeStyle="red",v.beginPath(),v.moveTo(o*e,c*t),v.lineTo(r*e,l*t),v.lineTo(i*e,u*t),v.closePath(),v.stroke(),v.lineWidth=1,v.strokeStyle="black",v.fillStyle=`rgba(${Math.floor(h[0])}, ${Math.floor(h[1])}, ${Math.floor(h[2])}, ${Math.floor(h[3])})`,v.beginPath(),v.moveTo(b.p1[0],b.p1[1]),v.lineTo(b.p2[0],b.p2[1]),v.lineTo(b.p3[0],b.p3[1]),v.closePath(),v.fill(),v.stroke()})()}),(()=>I()));d.onwheel=function(e){const t=.1*Math.sign(e.deltaY);return o.vec2.add(b.p1,b.p1,(0,r.scale)((0,r.sub)(b.p1,b.center),t)),o.vec2.add(b.p2,b.p2,(0,r.scale)((0,r.sub)(b.p2,b.center),t)),o.vec2.add(b.p3,b.p3,(0,r.scale)((0,r.sub)(b.p3,b.center),t)),!1},d.onmousemove=e=>{const t=d.getBoundingClientRect(),a=o.vec2.fromValues(e.pageX-t.left-document.documentElement.scrollLeft,e.pageY-t.top-document.documentElement.scrollTop),n=(0,r.sub)(a,b.center);o.vec2.add(b.p1,b.p1,n),o.vec2.add(b.p2,b.p2,n),o.vec2.add(b.p3,b.p3,n),b.center=a,I()};const _=()=>n(void 0,void 0,void 0,(function*(){w=parseInt(u.value,10);const e=`media/cache/photo_${w}.png`,[t,a]=yield Promise.all([(0,i.loadImage)("media/photo.png"),(0,i.loadImage)(e)]);p.src=e,M=(0,l.getImageData)(t),y=(0,l.getImageData)(a),I()}));_(),u.onchange=_},7787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderer=void 0,t.createRenderer=(e,t)=>{let a=!1;return()=>{a||(a=!0,requestAnimationFrame((()=>{e(),a=!1,null==t||t()})))}}},3345:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lerp=t.timeAtPos=t.clamp=t.fract=t.negFract=t.EPSILON=void 0,t.EPSILON=1e-6,t.negFract=e=>1-e+Math.floor(e),t.fract=e=>e-Math.floor(e),t.clamp=(e,t,a)=>Math.max(Math.min(e,a),t),t.timeAtPos=(e,a,n)=>a?(0,t.clamp)((n-e)/a,0,1):0,t.lerp=(e,t,a)=>e*(1-a)+t*a},4669:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inRange=t.avg=t.max2=t.min2=t.toPrecision2=t.lerp2=t.normalize=t.length=t.dot=t.sign=t.abs=t.ceil=t.floor=t.sub=t.adds=t.add=t.divide=t.multiply=t.scale=t.equals=t.determinant2=t.clamp2=void 0;const n=a(887);t.clamp2=(e,t,a)=>{const o=n.vec2.clone(e);return n.vec2.min(o,o,a),n.vec2.max(o,o,t),o},t.determinant2=(e,t)=>e[0]*t[1]-e[1]*t[0],t.equals=n.vec2.equals,t.scale=(e,t)=>n.vec2.scale(n.vec2.create(),e,t),t.multiply=(e,t)=>n.vec2.multiply(n.vec2.create(),e,t),t.divide=(e,t)=>n.vec2.divide(n.vec2.create(),e,t),t.add=(e,t)=>n.vec2.add(n.vec2.create(),e,t),t.adds=(e,t)=>n.vec2.fromValues(e[0]+t,e[1]+t),t.sub=(e,t)=>n.vec2.sub(n.vec2.create(),e,t),t.floor=e=>n.vec2.floor(n.vec2.create(),e),t.ceil=e=>n.vec2.ceil(n.vec2.create(),e),t.abs=e=>n.vec2.fromValues(Math.abs(e[0]),Math.abs(e[1])),t.sign=e=>n.vec2.fromValues(Math.sign(e[0]),Math.sign(e[1])),t.dot=(e,t)=>n.vec2.dot(e,t),t.length=e=>n.vec2.length(e),t.normalize=e=>(0,t.scale)(e,1/(0,t.length)(e)),t.lerp2=(e,t,a)=>n.vec2.lerp(n.vec2.create(),e,t,a),t.toPrecision2=(e,t)=>(e[0]=parseFloat(e[0].toPrecision(t)),e[1]=parseFloat(e[1].toPrecision(t)),e),t.min2=(...e)=>{const[t,...a]=e,o=n.vec2.clone(t);return a.forEach((e=>{n.vec2.min(o,o,e)})),o},t.max2=(...e)=>{const[t,...a]=e,o=n.vec2.clone(t);return a.forEach((e=>{n.vec2.max(o,o,e)})),o},t.avg=(...e)=>{const t=n.vec2.create();return e.length&&(e.forEach((e=>{n.vec2.add(t,t,e)})),n.vec2.scale(t,t,1/e.length)),t},t.inRange=(e,t,a)=>!(e[0]>a[0]||e[0]<t[0]||e[1]>a[1]||e[1]<t[1])},8372:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getImageData=void 0,t.getImageData=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");if(!a)throw new Error("Could not create canvas to extract image data");return a.clearRect(0,0,t.width,t.height),a.drawImage(e,0,0),a.getImageData(0,0,t.width,t.height)}},3792:function(e,t){var a=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(o,c){function r(e){try{i(n.next(e))}catch(e){c(e)}}function l(e){try{i(n.throw(e))}catch(e){c(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}i((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=void 0,t.loadImage=e=>a(void 0,void 0,void 0,(function*(){const t=new Image;return new Promise(((a,n)=>{t.onload=()=>{a(t)},t.onerror=e=>{n(e)},t.src=e}))}))}},e=>{e(e.s=673)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBaUIsTUFBRUssSUFBVyxNQUFPRyxHQUFLTCxFQUFPSyxJQUN2RixTQUFTRixFQUFLSSxHQUpsQixJQUFlTCxFQUlhSyxFQUFPQyxLQUFPVCxFQUFRUSxFQUFPTCxRQUoxQ0EsRUFJeURLLEVBQU9MLE1BSmhEQSxhQUFpQk4sRUFBSU0sRUFBUSxJQUFJTixHQUFFLFNBQVVHLEdBQVdBLEVBQVFHLE9BSVRPLEtBQUtSLEVBQVdLLEdBQ2xHSCxHQUFNTixFQUFZQSxFQUFVYSxNQUFNaEIsRUFBU0MsR0FBYyxLQUFLUyxZQUd0RU8sT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVYLE9BQU8sSUFDdERXLEVBQVFpRyxlQUFZLEVBYXBCakcsRUFBUWlHLFVBWldDLEdBQVF2SCxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ3pELE1BQU15SyxFQUFNLElBQUlDLE1BQ2hCLE9BQU8sSUFBSXBLLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekJpSyxFQUFJRSxPQUFTLEtBQ1RwSyxFQUFRa0ssSUFFWkEsRUFBSUcsUUFBV0MsSUFDWHJLLEVBQU9xSyxJQUVYSixFQUFJbEQsSUFBTUEsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL2RlbW9zL3RyaWFuZ2xlRml0dGluZ0NwdS50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9kcmF3L2NyZWF0ZVJlbmRlcmVyLnRzIiwid2VicGFjazovL3NhbXBsaW5nLWNvdmVyYWdlLy4vc3JjL21hdGhzL2NvbW1vbi50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy9tYXRocy9wb2ludC50cyIsIndlYnBhY2s6Ly9zYW1wbGluZy1jb3ZlcmFnZS8uL3NyYy91dGlscy9nZXRJbWFnZURhdGEudHMiLCJ3ZWJwYWNrOi8vc2FtcGxpbmctY292ZXJhZ2UvLi9zcmMvdXRpbHMvbG9hZEltYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjcmVhdGVSZW5kZXJlcl8xID0gcmVxdWlyZShcIi4uL2RyYXcvY3JlYXRlUmVuZGVyZXJcIik7XHJcbmNvbnN0IHBvaW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvcG9pbnRcIik7XHJcbmNvbnN0IGdldEltYWdlRGF0YV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL2dldEltYWdlRGF0YVwiKTtcclxuY29uc3QgbG9hZEltYWdlXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbG9hZEltYWdlXCIpO1xyXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9jb21tb25cIik7XHJcbmNvbnN0IGdhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xyXG5jb25zdCByZXNvbHV0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc29sdXRpb24nKTtcclxuY29uc3QgY2FjaGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FjaGUnKTtcclxuY29uc3QgdGltZXRha2VuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWV0YWtlbicpO1xyXG5jb25zdCBnID0gZ2FtZS5nZXRDb250ZXh0KCcyZCcpO1xyXG5jb25zdCBwMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygxNjAsIDE2MCk7XHJcbmNvbnN0IHAyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDI1MCwgMTMwKTtcclxuY29uc3QgcDMgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoMTUwLCAyNzApO1xyXG5jb25zdCB0cmlhbmdsZSA9IHtcclxuICAgIHAxLFxyXG4gICAgcDIsXHJcbiAgICBwMyxcclxuICAgIHBvaW50czogW3AxLCBwMiwgcDNdLFxyXG4gICAgZTE6ICgwLCBwb2ludF8xLnN1YikocDIsIHAxKSxcclxuICAgIGUyOiAoMCwgcG9pbnRfMS5zdWIpKHAzLCBwMiksXHJcbiAgICBlMzogKDAsIHBvaW50XzEuc3ViKShwMSwgcDMpXHJcbn07XHJcbnRyaWFuZ2xlLmNlbnRlciA9ICgwLCBwb2ludF8xLmF2ZykoLi4udHJpYW5nbGUucG9pbnRzKTtcclxubGV0IG51bUl0ZXJhdGlvbnM7XHJcbmxldCBpbWFnZURhdGE7XHJcbmxldCB0cmlhbmdsZU1hcERhdGE7XHJcbmNvbnN0IGdyaWREb3RSYWRpdXMgPSA0O1xyXG5jb25zdCB0cmlhbmdsZU1hcEJ5dGVzID0gNDtcclxuY29uc3QgUEkyID0gTWF0aC5QSSAqIDI7XHJcbmNvbnN0IGRyYXdJbWFnZSA9ICgpID0+IHtcclxuICAgIGcuY2xlYXJSZWN0KDAsIDAsIGdhbWUud2lkdGgsIGdhbWUuaGVpZ2h0KTtcclxuICAgIGNvbnN0IHhTdGVwID0gKGltYWdlRGF0YS53aWR0aCAtIDEpIC8gKG51bUl0ZXJhdGlvbnMgLSAxKTtcclxuICAgIGNvbnN0IHlTdGVwID0gKGltYWdlRGF0YS5oZWlnaHQgLSAxKSAvIChudW1JdGVyYXRpb25zIC0gMSk7XHJcbiAgICAvL2dldCB0aGUgdGltZSBpdCB0YWtlcyB0byB0cmFuc2Zvcm0gb3VyIHRyaWFuZ2xlIGFuZCBwZXJmb3JtIHRoZSBsb29rdXBcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBtYXhJbmRleCA9IG51bUl0ZXJhdGlvbnMgLSAxO1xyXG4gICAgY29uc3QgcDFJbmRleCA9IHtcclxuICAgICAgICB4OiAoMCwgY29tbW9uXzEuY2xhbXApKE1hdGgucm91bmQodHJpYW5nbGUucDFbMF0gLyB4U3RlcCksIDAsIG1heEluZGV4KSxcclxuICAgICAgICB5OiAoMCwgY29tbW9uXzEuY2xhbXApKE1hdGgucm91bmQodHJpYW5nbGUucDFbMV0gLyB5U3RlcCksIDAsIG1heEluZGV4KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHAySW5kZXggPSB7XHJcbiAgICAgICAgeDogKDAsIGNvbW1vbl8xLmNsYW1wKShNYXRoLnJvdW5kKHRyaWFuZ2xlLnAyWzBdIC8geFN0ZXApLCAwLCBtYXhJbmRleCksXHJcbiAgICAgICAgeTogKDAsIGNvbW1vbl8xLmNsYW1wKShNYXRoLnJvdW5kKHRyaWFuZ2xlLnAyWzFdIC8geVN0ZXApLCAwLCBtYXhJbmRleClcclxuICAgIH07XHJcbiAgICBjb25zdCBwM0luZGV4ID0ge1xyXG4gICAgICAgIHg6ICgwLCBjb21tb25fMS5jbGFtcCkoTWF0aC5yb3VuZCh0cmlhbmdsZS5wM1swXSAvIHhTdGVwKSwgMCwgbWF4SW5kZXgpLFxyXG4gICAgICAgIHk6ICgwLCBjb21tb25fMS5jbGFtcCkoTWF0aC5yb3VuZCh0cmlhbmdsZS5wM1sxXSAvIHlTdGVwKSwgMCwgbWF4SW5kZXgpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgdHJpYW5nbGVNYXBJbmRleCA9IHAzSW5kZXgueSArXHJcbiAgICAgICAgbnVtSXRlcmF0aW9ucyAqXHJcbiAgICAgICAgICAgIChwM0luZGV4LnggK1xyXG4gICAgICAgICAgICAgICAgbnVtSXRlcmF0aW9ucyAqXHJcbiAgICAgICAgICAgICAgICAgICAgKHAySW5kZXgueSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bUl0ZXJhdGlvbnMgKiAocDJJbmRleC54ICsgbnVtSXRlcmF0aW9ucyAqIChwMUluZGV4LnkgKyBudW1JdGVyYXRpb25zICogcDFJbmRleC54KSkpKTtcclxuICAgIGNvbnN0IHRyaWFuZ2xlQ29sb3VyID0gdHJpYW5nbGVNYXBEYXRhLmRhdGEuc2xpY2UodHJpYW5nbGVNYXBJbmRleCAqIHRyaWFuZ2xlTWFwQnl0ZXMsICh0cmlhbmdsZU1hcEluZGV4ICsgMSkgKiB0cmlhbmdsZU1hcEJ5dGVzKTtcclxuICAgIHRpbWV0YWtlbi5pbm5lclRleHQgPSBgJHtEYXRlLm5vdygpIC0gc3RhcnRUaW1lfSBtc2A7XHJcbiAgICBnLnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xyXG4gICAgLy9wbG90IHRoZSB2aXJ0dWFsIGdyaWQgcG9pbnRzIGZvciBvdXIgcmVzb2x1dGlvblxyXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBpbWFnZURhdGEud2lkdGg7IHggKz0geFN0ZXApIHtcclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGltYWdlRGF0YS5oZWlnaHQ7IHkgKz0geVN0ZXApIHtcclxuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSAneWVsbG93JztcclxuICAgICAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgZy5hcmMoeCwgeSwgZ3JpZERvdFJhZGl1cywgMCwgUEkyKTtcclxuICAgICAgICAgICAgZy5maWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9yZW5kZXIgYW4gb3V0bGluZSBvZiB0aGUgdHJpYW5nbGUgY29vcmRzIHRoYXQgd2UgaGF2ZSBmaXR0ZWQgdG8gdGhlIGdyaWRcclxuICAgIGcubGluZVdpZHRoID0gMTtcclxuICAgIGcuc3Ryb2tlU3R5bGUgPSAncmVkJztcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICBnLm1vdmVUbyhwMUluZGV4LnggKiB4U3RlcCwgcDFJbmRleC55ICogeVN0ZXApO1xyXG4gICAgZy5saW5lVG8ocDJJbmRleC54ICogeFN0ZXAsIHAySW5kZXgueSAqIHlTdGVwKTtcclxuICAgIGcubGluZVRvKHAzSW5kZXgueCAqIHhTdGVwLCBwM0luZGV4LnkgKiB5U3RlcCk7XHJcbiAgICBnLmNsb3NlUGF0aCgpO1xyXG4gICAgZy5zdHJva2UoKTtcclxuICAgIC8vcmVuZGVyIG91ciB0cmlhbmdsZVxyXG4gICAgZy5saW5lV2lkdGggPSAxO1xyXG4gICAgZy5zdHJva2VTdHlsZSA9ICdibGFjayc7XHJcbiAgICBnLmZpbGxTdHlsZSA9IGByZ2JhKCR7TWF0aC5mbG9vcih0cmlhbmdsZUNvbG91clswXSl9LCAke01hdGguZmxvb3IodHJpYW5nbGVDb2xvdXJbMV0pfSwgJHtNYXRoLmZsb29yKHRyaWFuZ2xlQ29sb3VyWzJdKX0sICR7TWF0aC5mbG9vcih0cmlhbmdsZUNvbG91clszXSl9KWA7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8odHJpYW5nbGUucDFbMF0sIHRyaWFuZ2xlLnAxWzFdKTtcclxuICAgIGcubGluZVRvKHRyaWFuZ2xlLnAyWzBdLCB0cmlhbmdsZS5wMlsxXSk7XHJcbiAgICBnLmxpbmVUbyh0cmlhbmdsZS5wM1swXSwgdHJpYW5nbGUucDNbMV0pO1xyXG4gICAgZy5jbG9zZVBhdGgoKTtcclxuICAgIGcuZmlsbCgpO1xyXG4gICAgZy5zdHJva2UoKTtcclxufTtcclxuY29uc3Qgcm90YXRlQW1vdW50ID0gMC4wMTtcclxuY29uc3Qgc2NhbGVBbW91bnQgPSAwLjE7XHJcbmNvbnN0IGRyYXcgPSAoMCwgY3JlYXRlUmVuZGVyZXJfMS5jcmVhdGVSZW5kZXJlcikoKCkgPT4ge1xyXG4gICAgdHJpYW5nbGUucG9pbnRzLmZvckVhY2goKHBvaW50KSA9PiB7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5yb3RhdGUocG9pbnQsIHBvaW50LCB0cmlhbmdsZS5jZW50ZXIsIHJvdGF0ZUFtb3VudCk7XHJcbiAgICB9KTtcclxuICAgIHRyaWFuZ2xlLmUxID0gKDAsIHBvaW50XzEuc3ViKSh0cmlhbmdsZS5wMiwgdHJpYW5nbGUucDEpO1xyXG4gICAgdHJpYW5nbGUuZTIgPSAoMCwgcG9pbnRfMS5zdWIpKHRyaWFuZ2xlLnAzLCB0cmlhbmdsZS5wMik7XHJcbiAgICB0cmlhbmdsZS5lMyA9ICgwLCBwb2ludF8xLnN1YikodHJpYW5nbGUucDEsIHRyaWFuZ2xlLnAzKTtcclxuICAgIGlmIChpbWFnZURhdGEgJiYgdHJpYW5nbGVNYXBEYXRhKSB7XHJcbiAgICAgICAgZHJhd0ltYWdlKCk7XHJcbiAgICB9XHJcbn0sICgpID0+IGRyYXcoKSk7XHJcbmdhbWUub253aGVlbCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjb25zdCBzY2FsZUZhY3RvciA9IHNjYWxlQW1vdW50ICogTWF0aC5zaWduKGUuZGVsdGFZKTtcclxuICAgIGdsX21hdHJpeF8xLnZlYzIuYWRkKHRyaWFuZ2xlLnAxLCB0cmlhbmdsZS5wMSwgKDAsIHBvaW50XzEuc2NhbGUpKCgwLCBwb2ludF8xLnN1YikodHJpYW5nbGUucDEsIHRyaWFuZ2xlLmNlbnRlciksIHNjYWxlRmFjdG9yKSk7XHJcbiAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZCh0cmlhbmdsZS5wMiwgdHJpYW5nbGUucDIsICgwLCBwb2ludF8xLnNjYWxlKSgoMCwgcG9pbnRfMS5zdWIpKHRyaWFuZ2xlLnAyLCB0cmlhbmdsZS5jZW50ZXIpLCBzY2FsZUZhY3RvcikpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5hZGQodHJpYW5nbGUucDMsIHRyaWFuZ2xlLnAzLCAoMCwgcG9pbnRfMS5zY2FsZSkoKDAsIHBvaW50XzEuc3ViKSh0cmlhbmdsZS5wMywgdHJpYW5nbGUuY2VudGVyKSwgc2NhbGVGYWN0b3IpKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuZ2FtZS5vbm1vdXNlbW92ZSA9IChlKSA9PiB7XHJcbiAgICBjb25zdCBib3VuZHMgPSBnYW1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgbW91c2VQb3MgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoZS5wYWdlWCAtIGJvdW5kcy5sZWZ0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsIGUucGFnZVkgLSBib3VuZHMudG9wIC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCk7XHJcbiAgICBjb25zdCBkaWZmID0gKDAsIHBvaW50XzEuc3ViKShtb3VzZVBvcywgdHJpYW5nbGUuY2VudGVyKTtcclxuICAgIGdsX21hdHJpeF8xLnZlYzIuYWRkKHRyaWFuZ2xlLnAxLCB0cmlhbmdsZS5wMSwgZGlmZik7XHJcbiAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZCh0cmlhbmdsZS5wMiwgdHJpYW5nbGUucDIsIGRpZmYpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5hZGQodHJpYW5nbGUucDMsIHRyaWFuZ2xlLnAzLCBkaWZmKTtcclxuICAgIHRyaWFuZ2xlLmNlbnRlciA9IG1vdXNlUG9zO1xyXG4gICAgZHJhdygpO1xyXG59O1xyXG5jb25zdCBzdGFydCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgbnVtSXRlcmF0aW9ucyA9IHBhcnNlSW50KHJlc29sdXRpb24udmFsdWUsIDEwKTtcclxuICAgIGNvbnN0IGNhY2hlU3JjID0gYG1lZGlhL2NhY2hlL3Bob3RvXyR7bnVtSXRlcmF0aW9uc30ucG5nYDtcclxuICAgIGNvbnN0IFtpbWFnZSwgY2FjaGVJbWFnZV0gPSB5aWVsZCBQcm9taXNlLmFsbChbKDAsIGxvYWRJbWFnZV8xLmxvYWRJbWFnZSkoJ21lZGlhL3Bob3RvLnBuZycpLCAoMCwgbG9hZEltYWdlXzEubG9hZEltYWdlKShjYWNoZVNyYyldKTtcclxuICAgIGNhY2hlLnNyYyA9IGNhY2hlU3JjO1xyXG4gICAgaW1hZ2VEYXRhID0gKDAsIGdldEltYWdlRGF0YV8xLmdldEltYWdlRGF0YSkoaW1hZ2UpO1xyXG4gICAgdHJpYW5nbGVNYXBEYXRhID0gKDAsIGdldEltYWdlRGF0YV8xLmdldEltYWdlRGF0YSkoY2FjaGVJbWFnZSk7XHJcbiAgICBkcmF3KCk7XHJcbn0pO1xyXG5zdGFydCgpO1xyXG5yZXNvbHV0aW9uLm9uY2hhbmdlID0gc3RhcnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY3JlYXRlUmVuZGVyZXIgPSB2b2lkIDA7XHJcbmNvbnN0IGNyZWF0ZVJlbmRlcmVyID0gKHJlbmRlckZ1bmMsIGFmdGVyUmVuZGVyRnVuYykgPT4ge1xyXG4gICAgbGV0IGRyYXdpbmcgPSBmYWxzZTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFkcmF3aW5nKSB7XHJcbiAgICAgICAgICAgIGRyYXdpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgZHJhd2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJSZW5kZXJGdW5jID09PSBudWxsIHx8IGFmdGVyUmVuZGVyRnVuYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWZ0ZXJSZW5kZXJGdW5jKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcbmV4cG9ydHMuY3JlYXRlUmVuZGVyZXIgPSBjcmVhdGVSZW5kZXJlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5sZXJwID0gZXhwb3J0cy50aW1lQXRQb3MgPSBleHBvcnRzLmNsYW1wID0gZXhwb3J0cy5mcmFjdCA9IGV4cG9ydHMubmVnRnJhY3QgPSBleHBvcnRzLkVQU0lMT04gPSB2b2lkIDA7XHJcbmV4cG9ydHMuRVBTSUxPTiA9IDAuMDAwMDAxO1xyXG5jb25zdCBuZWdGcmFjdCA9ICh4KSA9PiAxLjAgLSB4ICsgTWF0aC5mbG9vcih4KTtcclxuZXhwb3J0cy5uZWdGcmFjdCA9IG5lZ0ZyYWN0O1xyXG5jb25zdCBmcmFjdCA9ICh4KSA9PiB4IC0gTWF0aC5mbG9vcih4KTtcclxuZXhwb3J0cy5mcmFjdCA9IGZyYWN0O1xyXG5jb25zdCBjbGFtcCA9IChhLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgoTWF0aC5taW4oYSwgbWF4KSwgbWluKTtcclxuZXhwb3J0cy5jbGFtcCA9IGNsYW1wO1xyXG5jb25zdCB0aW1lQXRQb3MgPSAoc3RhcnRQb3MsIGRpciwgbmV3UG9zKSA9PiBkaXIgPyAoMCwgZXhwb3J0cy5jbGFtcCkoKG5ld1BvcyAtIHN0YXJ0UG9zKSAvIGRpciwgMCwgMSkgOiAwO1xyXG5leHBvcnRzLnRpbWVBdFBvcyA9IHRpbWVBdFBvcztcclxuY29uc3QgbGVycCA9IChhLCBiLCB0KSA9PiBhICogKDEgLSB0KSArIGIgKiB0O1xyXG5leHBvcnRzLmxlcnAgPSBsZXJwO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmluUmFuZ2UgPSBleHBvcnRzLmF2ZyA9IGV4cG9ydHMubWF4MiA9IGV4cG9ydHMubWluMiA9IGV4cG9ydHMudG9QcmVjaXNpb24yID0gZXhwb3J0cy5sZXJwMiA9IGV4cG9ydHMubm9ybWFsaXplID0gZXhwb3J0cy5sZW5ndGggPSBleHBvcnRzLmRvdCA9IGV4cG9ydHMuc2lnbiA9IGV4cG9ydHMuYWJzID0gZXhwb3J0cy5jZWlsID0gZXhwb3J0cy5mbG9vciA9IGV4cG9ydHMuc3ViID0gZXhwb3J0cy5hZGRzID0gZXhwb3J0cy5hZGQgPSBleHBvcnRzLmRpdmlkZSA9IGV4cG9ydHMubXVsdGlwbHkgPSBleHBvcnRzLnNjYWxlID0gZXhwb3J0cy5lcXVhbHMgPSBleHBvcnRzLmRldGVybWluYW50MiA9IGV4cG9ydHMuY2xhbXAyID0gdm9pZCAwO1xyXG5jb25zdCBnbF9tYXRyaXhfMSA9IHJlcXVpcmUoXCJnbC1tYXRyaXhcIik7XHJcbmNvbnN0IGNsYW1wMiA9IChhLCBtaW4sIG1heCkgPT4ge1xyXG4gICAgY29uc3Qgb3V0ID0gZ2xfbWF0cml4XzEudmVjMi5jbG9uZShhKTtcclxuICAgIGdsX21hdHJpeF8xLnZlYzIubWluKG91dCwgb3V0LCBtYXgpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5tYXgob3V0LCBvdXQsIG1pbik7XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG5leHBvcnRzLmNsYW1wMiA9IGNsYW1wMjtcclxuY29uc3QgZGV0ZXJtaW5hbnQyID0gKHAxLCBwMikgPT4gcDFbMF0gKiBwMlsxXSAtIHAxWzFdICogcDJbMF07XHJcbmV4cG9ydHMuZGV0ZXJtaW5hbnQyID0gZGV0ZXJtaW5hbnQyO1xyXG5leHBvcnRzLmVxdWFscyA9IGdsX21hdHJpeF8xLnZlYzIuZXF1YWxzO1xyXG5jb25zdCBzY2FsZSA9IChwMSwgYSkgPT4gZ2xfbWF0cml4XzEudmVjMi5zY2FsZShnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgYSk7XHJcbmV4cG9ydHMuc2NhbGUgPSBzY2FsZTtcclxuY29uc3QgbXVsdGlwbHkgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLm11bHRpcGx5KGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMubXVsdGlwbHkgPSBtdWx0aXBseTtcclxuY29uc3QgZGl2aWRlID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5kaXZpZGUoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIHAyKTtcclxuZXhwb3J0cy5kaXZpZGUgPSBkaXZpZGU7XHJcbmNvbnN0IGFkZCA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIuYWRkKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMuYWRkID0gYWRkO1xyXG5jb25zdCBhZGRzID0gKHAxLCBhKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMocDFbMF0gKyBhLCBwMVsxXSArIGEpO1xyXG5leHBvcnRzLmFkZHMgPSBhZGRzO1xyXG5jb25zdCBzdWIgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLnN1YihnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgcDIpO1xyXG5leHBvcnRzLnN1YiA9IHN1YjtcclxuY29uc3QgZmxvb3IgPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuZmxvb3IoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEpO1xyXG5leHBvcnRzLmZsb29yID0gZmxvb3I7XHJcbmNvbnN0IGNlaWwgPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuY2VpbChnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSk7XHJcbmV4cG9ydHMuY2VpbCA9IGNlaWw7XHJcbmNvbnN0IGFicyA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKE1hdGguYWJzKHAxWzBdKSwgTWF0aC5hYnMocDFbMV0pKTtcclxuZXhwb3J0cy5hYnMgPSBhYnM7XHJcbmNvbnN0IHNpZ24gPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhNYXRoLnNpZ24ocDFbMF0pLCBNYXRoLnNpZ24ocDFbMV0pKTtcclxuZXhwb3J0cy5zaWduID0gc2lnbjtcclxuY29uc3QgZG90ID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5kb3QocDEsIHAyKTtcclxuZXhwb3J0cy5kb3QgPSBkb3Q7XHJcbmNvbnN0IGxlbmd0aCA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5sZW5ndGgocDEpO1xyXG5leHBvcnRzLmxlbmd0aCA9IGxlbmd0aDtcclxuY29uc3Qgbm9ybWFsaXplID0gKHAxKSA9PiAoMCwgZXhwb3J0cy5zY2FsZSkocDEsIDEgLyAoMCwgZXhwb3J0cy5sZW5ndGgpKHAxKSk7XHJcbmV4cG9ydHMubm9ybWFsaXplID0gbm9ybWFsaXplO1xyXG5jb25zdCBsZXJwMiA9IChhLCBiLCB0KSA9PiBnbF9tYXRyaXhfMS52ZWMyLmxlcnAoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgYSwgYiwgdCk7XHJcbmV4cG9ydHMubGVycDIgPSBsZXJwMjtcclxuLy93YXJuaW5nOiBtdXRhdGVzIGFcclxuY29uc3QgdG9QcmVjaXNpb24yID0gKGEsIGFtb3VudCkgPT4ge1xyXG4gICAgYVswXSA9IHBhcnNlRmxvYXQoYVswXS50b1ByZWNpc2lvbihhbW91bnQpKTtcclxuICAgIGFbMV0gPSBwYXJzZUZsb2F0KGFbMV0udG9QcmVjaXNpb24oYW1vdW50KSk7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy50b1ByZWNpc2lvbjIgPSB0b1ByZWNpc2lvbjI7XHJcbmNvbnN0IG1pbjIgPSAoLi4ub2JqcykgPT4ge1xyXG4gICAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IG9ianM7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGZpcnN0KTtcclxuICAgIHJlc3QuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5taW4ocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMubWluMiA9IG1pbjI7XHJcbmNvbnN0IG1heDIgPSAoLi4ub2JqcykgPT4ge1xyXG4gICAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IG9ianM7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGZpcnN0KTtcclxuICAgIHJlc3QuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5tYXgocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMubWF4MiA9IG1heDI7XHJcbmNvbnN0IGF2ZyA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpO1xyXG4gICAgaWYgKG9ianMubGVuZ3RoKSB7XHJcbiAgICAgICAgb2Jqcy5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5hZGQocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5zY2FsZShyZXN1bHQsIHJlc3VsdCwgMSAvIG9ianMubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMuYXZnID0gYXZnO1xyXG5jb25zdCBpblJhbmdlID0gKHAxLCBtaW4sIG1heCkgPT4ge1xyXG4gICAgcmV0dXJuICEocDFbMF0gPiBtYXhbMF0gfHwgcDFbMF0gPCBtaW5bMF0gfHwgcDFbMV0gPiBtYXhbMV0gfHwgcDFbMV0gPCBtaW5bMV0pO1xyXG59O1xyXG5leHBvcnRzLmluUmFuZ2UgPSBpblJhbmdlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmdldEltYWdlRGF0YSA9IHZvaWQgMDtcclxuY29uc3QgZ2V0SW1hZ2VEYXRhID0gKGltYWdlKSA9PiB7XHJcbiAgICBjb25zdCBpbWFnZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgaW1hZ2VDYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcclxuICAgIGltYWdlQ2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgIGNvbnN0IGltYWdlR3JhcGhpY3MgPSBpbWFnZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgaWYgKCFpbWFnZUdyYXBoaWNzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY3JlYXRlIGNhbnZhcyB0byBleHRyYWN0IGltYWdlIGRhdGEnKTtcclxuICAgIH1cclxuICAgIGltYWdlR3JhcGhpY3MuY2xlYXJSZWN0KDAsIDAsIGltYWdlQ2FudmFzLndpZHRoLCBpbWFnZUNhbnZhcy5oZWlnaHQpO1xyXG4gICAgaW1hZ2VHcmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xyXG4gICAgcmV0dXJuIGltYWdlR3JhcGhpY3MuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlQ2FudmFzLndpZHRoLCBpbWFnZUNhbnZhcy5oZWlnaHQpO1xyXG59O1xyXG5leHBvcnRzLmdldEltYWdlRGF0YSA9IGdldEltYWdlRGF0YTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmxvYWRJbWFnZSA9IHZvaWQgMDtcclxuY29uc3QgbG9hZEltYWdlID0gKHNyYykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZShpbWcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLnNyYyA9IHNyYztcclxuICAgIH0pO1xyXG59KTtcclxuZXhwb3J0cy5sb2FkSW1hZ2UgPSBsb2FkSW1hZ2U7XHJcbiJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsImdsX21hdHJpeF8xIiwiY3JlYXRlUmVuZGVyZXJfMSIsInBvaW50XzEiLCJnZXRJbWFnZURhdGFfMSIsImxvYWRJbWFnZV8xIiwiY29tbW9uXzEiLCJnYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJlc29sdXRpb24iLCJjYWNoZSIsInRpbWV0YWtlbiIsImciLCJnZXRDb250ZXh0IiwicDEiLCJ2ZWMyIiwiZnJvbVZhbHVlcyIsInAyIiwicDMiLCJ0cmlhbmdsZSIsInBvaW50cyIsImUxIiwic3ViIiwiZTIiLCJlMyIsIm51bUl0ZXJhdGlvbnMiLCJpbWFnZURhdGEiLCJ0cmlhbmdsZU1hcERhdGEiLCJjZW50ZXIiLCJhdmciLCJQSTIiLCJNYXRoIiwiUEkiLCJkcmF3IiwiY3JlYXRlUmVuZGVyZXIiLCJmb3JFYWNoIiwicG9pbnQiLCJyb3RhdGUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInhTdGVwIiwieVN0ZXAiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwibWF4SW5kZXgiLCJwMUluZGV4IiwiY2xhbXAiLCJyb3VuZCIsInAySW5kZXgiLCJwM0luZGV4IiwidHJpYW5nbGVNYXBJbmRleCIsInRyaWFuZ2xlQ29sb3VyIiwiZGF0YSIsInNsaWNlIiwiaW5uZXJUZXh0IiwicHV0SW1hZ2VEYXRhIiwieCIsInkiLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJhcmMiLCJmaWxsIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJmbG9vciIsImRyYXdJbWFnZSIsIm9ud2hlZWwiLCJzY2FsZUZhY3RvciIsInNpZ24iLCJkZWx0YVkiLCJhZGQiLCJzY2FsZSIsIm9ubW91c2Vtb3ZlIiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibW91c2VQb3MiLCJwYWdlWCIsImxlZnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxMZWZ0IiwicGFnZVkiLCJ0b3AiLCJzY3JvbGxUb3AiLCJkaWZmIiwic3RhcnQiLCJwYXJzZUludCIsImNhY2hlU3JjIiwiaW1hZ2UiLCJjYWNoZUltYWdlIiwiYWxsIiwibG9hZEltYWdlIiwic3JjIiwiZ2V0SW1hZ2VEYXRhIiwib25jaGFuZ2UiLCJyZW5kZXJGdW5jIiwiYWZ0ZXJSZW5kZXJGdW5jIiwiZHJhd2luZyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxlcnAiLCJ0aW1lQXRQb3MiLCJmcmFjdCIsIm5lZ0ZyYWN0IiwiRVBTSUxPTiIsImEiLCJtaW4iLCJtYXgiLCJzdGFydFBvcyIsImRpciIsIm5ld1BvcyIsImIiLCJ0IiwiaW5SYW5nZSIsIm1heDIiLCJtaW4yIiwidG9QcmVjaXNpb24yIiwibGVycDIiLCJub3JtYWxpemUiLCJsZW5ndGgiLCJkb3QiLCJhYnMiLCJjZWlsIiwiYWRkcyIsImRpdmlkZSIsIm11bHRpcGx5IiwiZXF1YWxzIiwiZGV0ZXJtaW5hbnQyIiwiY2xhbXAyIiwib3V0IiwiY2xvbmUiLCJjcmVhdGUiLCJhbW91bnQiLCJwYXJzZUZsb2F0IiwidG9QcmVjaXNpb24iLCJvYmpzIiwiZmlyc3QiLCJyZXN0Iiwib2JqIiwiaW1hZ2VDYW52YXMiLCJjcmVhdGVFbGVtZW50IiwiaW1hZ2VHcmFwaGljcyIsIkVycm9yIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJvbmVycm9yIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==